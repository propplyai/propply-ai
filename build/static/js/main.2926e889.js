/*! For license information please see main.2926e889.js.LICENSE.txt */
(()=>{"use strict";var e={11:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(427));class a extends n.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t){let{config:r,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="";"plain"===s?n="pl":"phrase"===s?n="ph":"websearch"===s&&(n="w");const a=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${n}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(e=>{let[t,r]=e;this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}t.default=a},47:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(11));t.default=class{constructor(e,t){let{headers:r={},schema:s,fetch:n}=t;this.url=e,this.headers=new Headers(r),this.schema=s,this.fetch=n}select(e){let{head:t=!1,count:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=t?"HEAD":"GET";let a=!1;const i=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new n.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new n.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new n.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return t&&this.headers.append("Prefer",`count=${t}`),new n.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer",`count=${e}`),new n.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},49:(e,t)=>{var r=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}function x(){}function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=v.prototype;var b=y.prototype=new x;b.constructor=y,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,j={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,s){var n,a={},i=null,o=null;if(null!=t)for(n in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)_.call(t,n)&&!N.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(1===l)a.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===a[n]&&(a[n]=l[n]);return{$$typeof:r,type:e,key:i,ref:o,props:a,_owner:j.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,n,a,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case s:l=!0}}if(l)return i=i(l=e),e=""===a?"."+E(l,0):a,w(i)?(n="",null!=e&&(n=e.replace(C,"$&/")+"/"),P(i,t,n,"",function(e){return e})):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var d=a+E(o=e[c],c);l+=P(o,t,n,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=P(o=o.value,t,n,d=a+E(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,r){if(null==e)return e;var s=[],n=0;return P(e,s,"","",function(e){return t.call(r,e,n++)}),s}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},A={transition:null},R={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:A,ReactCurrentOwner:j};function $(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,r){T(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=n,t.Profiler=i,t.PureComponent=y,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=$,t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=m({},e.props),a=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=j.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!N.hasOwnProperty(c)&&(n[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)n.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:r,type:e.type,key:a,ref:i,props:n,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=$,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,r){return O.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,r){return O.current.useReducer(e,t,r)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return O.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},53:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const n=s(r(71));t.PostgrestClient=n.default;const a=s(r(47));t.PostgrestQueryBuilder=a.default;const i=s(r(11));t.PostgrestFilterBuilder=i.default;const o=s(r(427));t.PostgrestTransformBuilder=o.default;const l=s(r(569));t.PostgrestBuilder=l.default;const c=s(r(732));t.PostgrestError=c.default,t.default={PostgrestClient:n.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}},71:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(47)),a=s(r(11));class i{constructor(e){let{headers:t={},schema:r,fetch:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new n.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:s=!1,count:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return[t,Array.isArray(r)?`{${r.join(",")}}`:`${r}`]}).forEach(e=>{let[t,r]=e;l.searchParams.append(t,r)})):(o="POST",c=t);const d=new Headers(this.headers);return n&&d.set("Prefer",`count=${n}`),new a.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}t.default=i},119:(e,t,r)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(345)},204:(e,t,r)=>{r.d(t,{vQ:()=>ir,ND:()=>ar});class s extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",r=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=r}}class n extends s{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class a extends s{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class i extends s{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var o;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(o||(o={}));var l=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class c{constructor(e){let{headers:t={},customFetch:s,region:n=o.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=n,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(r.bind(r,621)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return l(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:l,signal:c}=t;let d={},{region:u}=t;u||(u=this.region);const h=new URL(`${this.url}/${e}`);let p;u&&"any"!==u&&(d["x-region"]=u,h.searchParams.set("forceFunctionRegion",u)),l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",p=l):"string"===typeof l?(d["Content-Type"]="text/plain",p=l):"undefined"!==typeof FormData&&l instanceof FormData?p=l:(d["Content-Type"]="application/json",p=JSON.stringify(l)));const f=yield this.fetch(h.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),s),body:p,signal:c}).catch(e=>{if("AbortError"===e.name)throw e;throw new n(e)}),m=f.headers.get("x-relay-error");if(m&&"true"===m)throw new a(f);if(!f.ok)throw new i(f);let g,v=(null!==(r=f.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return g="application/json"===v?yield f.json():"application/octet-stream"===v?yield f.blob():"text/event-stream"===v?f:"multipart/form-data"===v?yield f.formData():yield f.text(),{data:g,error:null,response:f}}catch(s){return s instanceof Error&&"AbortError"===s.name?{data:null,error:new n(s)}:{data:null,error:s,response:s instanceof i||s instanceof a?s.context:void 0}}})}}var d=r(53);const{PostgrestClient:u,PostgrestQueryBuilder:h,PostgrestFilterBuilder:p,PostgrestTransformBuilder:f,PostgrestBuilder:m,PostgrestError:g}=d;const v=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof r.g&&"undefined"!==typeof r.g.WebSocket)return{type:"native",constructor:r.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process){const e=process.versions;if(e&&e.node){const t=e.node,r=parseInt(t.replace(/^v/,"").split(".")[0]);return r>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},x=1e4;var y,b,w,_,j,N;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(y||(y={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(b||(b={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(w||(w={})),function(e){e.websocket="websocket"}(_||(_={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(j||(j={}));class k{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),n=t.getUint8(2);let a=this.HEADER_LENGTH+2;const i=r.decode(e.slice(a,a+s));a+=s;const o=r.decode(e.slice(a,a+n));a+=n;return{ref:null,topic:i,event:o,payload:JSON.parse(r.decode(e.slice(a,e.byteLength)))}}}class S{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(N||(N={}));const C=function(e,t){var r;const s=null!==(r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((r,n)=>(r[n]=E(n,e,t,s),r),{})},E=(e,t,r,s)=>{const n=t.find(t=>t.name===e),a=null===n||void 0===n?void 0:n.type,i=r[e];return a&&!s.includes(a)?P(a,i):T(i)},P=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return R(t,r)}switch(e){case N.bool:return I(t);case N.float4:case N.float8:case N.int2:case N.int4:case N.int8:case N.numeric:case N.oid:return O(t);case N.json:case N.jsonb:return A(t);case N.timestamp:return $(t);case N.abstime:case N.date:case N.daterange:case N.int4range:case N.int8range:case N.money:case N.reltime:case N.text:case N.time:case N.timestamptz:case N.timetz:case N.tsrange:case N.tstzrange:default:return T(t)}},T=e=>e,I=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},O=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},A=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},R=(e,t)=>{if("string"!==typeof e)return e;const r=e.length-1,s=e[r];if("{"===e[0]&&"}"===s){let s;const a=e.slice(1,r);try{s=JSON.parse("["+a+"]")}catch(n){s=a?a.split(","):[]}return s.map(e=>P(t,e))}return e},$=e=>"string"===typeof e?e.replace(" ","T"):e,D=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class L{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:r}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var U,M,z,F;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(U||(U={}));class B{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=B.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=B.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=B.syncDiff(this.state,e,t,r),s())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const n=this.cloneDeep(e),a=this.transformState(t),i={},o={};return this.map(n,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{const r=n[e];if(r){const s=t.map(e=>e.presence_ref),n=r.map(e=>e.presence_ref),a=t.filter(e=>n.indexOf(e.presence_ref)<0),l=r.filter(e=>s.indexOf(e.presence_ref)<0);a.length>0&&(i[e]=a),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(n,{joins:i,leaves:o},r,s)}static syncDiff(e,t,r,s){const{joins:n,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(n,(t,s)=>{var n;const a=null!==(n=e[t])&&void 0!==n?n:[];if(e[t]=this.cloneDeep(s),a.length>0){const r=e[t].map(e=>e.presence_ref),s=a.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...s)}r(t,a,s)}),this.map(a,(t,r)=>{let n=e[t];if(!n)return;const a=r.map(e=>e.presence_ref);n=n.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=n,s(t,n,r),0===n.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return t[r]="metas"in s?s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(M||(M={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(z||(z={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(F||(F={}));class q{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},r=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=b.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new L(this,w.join,this.params,this.timeout),this.rejoinTimer=new S(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=b.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=b.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=b.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=b.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=b.errored,this.rejoinTimer.scheduleTimeout())}),this._on(w.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new B(this),this.broadcastEndpointURL=D(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var r,s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==b.closed){const{config:{broadcast:a,presence:i,private:o}}=this.params,l=null!==(s=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==s?s:[],c=!!this.bindings[z.PRESENCE]&&this.bindings[z.PRESENCE].length>0||!0===(null===(n=this.params.config.presence)||void 0===n?void 0:n.enabled),d={},u={broadcast:a,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(F.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(F.CLOSED)),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:r}=t;var s;if(this.socket.setAuth(),void 0!==r){const t=this.bindings.postgres_changes,n=null!==(s=null===t||void 0===t?void 0:t.length)&&void 0!==s?s:0,a=[];for(let s=0;s<n;s++){const n=t[s],{filter:{event:i,schema:o,table:l,filter:c}}=n,d=r&&r[s];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=b.errored,void(null===e||void 0===e||e(F.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},n),{id:d.id}))}return this.bindings.postgres_changes=a,void(e&&e(F.SUBSCRIBED))}null===e||void 0===e||e(F.SUBSCRIBED)}).receive("error",t=>{this.state=b.errored,null===e||void 0===e||e(F.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(F.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===b.joined&&e===z.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var s,n,a;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(n=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===n?void 0:n.broadcast)||void 0===a?void 0:a.ack)||r("ok"),i.receive("ok",()=>r("ok")),i.receive("error",()=>r("error")),i.receive("timeout",()=>r("timed out"))});{const{event:a,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(s=e.body)||void 0===s?void 0:s.cancel()),e.ok?"ok":"error"}catch(n){return"AbortError"===n.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=b.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(w.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new L(this,w.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null===r||void 0===r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=b.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,n=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(n),a}_push(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new L(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,n;const a=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=w;if(r&&[i,o,l,c].indexOf(a)>=0&&r!==this._joinRef())return;let d=this._onMessage(a,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter(e=>{var t,r,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===s?void 0:s.toLocaleLowerCase())===a}).map(e=>e.callback(d,r)):null===(n=this.bindings[a])||void 0===n||n.filter(e=>{var r,s,n,i,o,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,i=null===(r=e.filter)||void 0===r?void 0:r.event;return a&&(null===(s=t.ids)||void 0===s?void 0:s.includes(a))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(n=t.data)||void 0===n?void 0:n.type.toLocaleLowerCase()))}{const r=null===(o=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===r||r===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:r,commit_timestamp:s,type:n,errors:a}=e,i={schema:t,table:r,commit_timestamp:s,eventType:n,new:{},old:{},errors:a};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,r)})}_isClosed(){return this.state===b.closed}_isJoined(){return this.state===b.joined}_isJoining(){return this.state===b.joining}_isLeaving(){return this.state===b.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),n={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(n):this.bindings[s]=[n],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===r&&q.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(w.close,{},e)}_onError(e){this._on(w.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=b.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=C(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=C(e.columns,e.old_record)),t}}const V=()=>{},W=25e3,H=10,G=100,Y=[1e3,2e3,5e3,1e4];class K{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=x,this.transport=null,this.heartbeatIntervalMs=W,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=V,this.ref=0,this.reconnectTimer=null,this.logger=V,this.conn=null,this.sendBuffer=[],this.serializer=new k,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(r.bind(r,621)).then(e=>{let{default:r}=e;return r(...t)}).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)})}:fetch),function(){return t(...arguments)}},!(null===(s=null===t||void 0===t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${_.websocket}`,this.httpEndpoint=D(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=v.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case y.connecting:return j.Connecting;case y.open:return j.Open;case y.closing:return j.Closing;default:return j.Closed}}isConnected(){return this.connectionState()===j.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const r=`realtime:${e}`,s=this.getChannels().find(e=>e.topic===r);if(s)return s;{const r=new q(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:s,ref:n}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${r} (${n})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},G)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(o){this.log("error","error in heartbeat callback",o)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:s,ref:n}=e,a=n?`(${n})`:"",i=s.status||"";this.log("receive",`${i} ${t} ${r} ${a}`.trim(),s),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,s,n)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(w.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const r={access_token:e,version:"realtime-js/2.15.5"};e&&t.updateJoinPayload(r),t.joinedOnce&&t._isJoined()&&t._push(w.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new S(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},H)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,n,a,i,o,l,c;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null===e||void 0===e?void 0:e.timeout)&&void 0!==r?r:x,this.heartbeatIntervalMs=null!==(s=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==s?s:W,this.worker=null!==(n=null===e||void 0===e?void 0:e.worker)&&void 0!==n&&n,this.accessToken=null!==(a=null===e||void 0===e?void 0:e.accessToken)&&void 0!==a?a:null,this.heartbeatCallback=null!==(i=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==i?i:V,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>Y[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null===e||void 0===e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class J extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Q(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class X extends J{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Z extends J{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ee=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const te=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(r.bind(r,621)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},re=e=>{if(Array.isArray(e))return e.map(e=>re(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[r,s]=e;const n=r.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[n]=re(s)}),t};var se=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const ne=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ae=(e,t,s)=>se(void 0,void 0,void 0,function*(){const n=yield ee(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(r.bind(r,621))).Response:Response});e instanceof n&&!(null===s||void 0===s?void 0:s.noResolveJson)?e.json().then(r=>{const s=e.status||500,n=(null===r||void 0===r?void 0:r.statusCode)||s+"";t(new X(ne(r),s,n))}).catch(e=>{t(new Z(ne(e),e))}):t(new Z(ne(e),e))}),ie=(e,t,r,s)=>{const n={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&s?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(s)?(n.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),n.body=JSON.stringify(s)):n.body=s,(null===t||void 0===t?void 0:t.duplex)&&(n.duplex=t.duplex),Object.assign(Object.assign({},n),r)):n};function oe(e,t,r,s,n,a){return se(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(r,ie(t,s,n,a)).then(e=>{if(!e.ok)throw e;return(null===s||void 0===s?void 0:s.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>ae(e,o,s))})})}function le(e,t,r,s){return se(this,void 0,void 0,function*(){return oe(e,"GET",t,r,s)})}function ce(e,t,r,s,n){return se(this,void 0,void 0,function*(){return oe(e,"POST",t,s,n,r)})}function de(e,t,r,s,n){return se(this,void 0,void 0,function*(){return oe(e,"PUT",t,s,n,r)})}function ue(e,t,r,s,n){return se(this,void 0,void 0,function*(){return oe(e,"DELETE",t,s,n,r)})}var he=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class pe{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return he(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Q(e))return{data:null,error:e};throw e}})}}var fe=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class me{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new pe(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return fe(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Q(e))return{data:null,error:e};throw e}})}}var ge=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const ve={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xe={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ye{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=te(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,s){return ge(this,void 0,void 0,function*(){try{let n;const a=Object.assign(Object.assign({},xe),s);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const o=a.metadata;"undefined"!==typeof Blob&&r instanceof Blob?(n=new FormData,n.append("cacheControl",a.cacheControl),o&&n.append("metadata",this.encodeMetadata(o)),n.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(n=r,n.append("cacheControl",a.cacheControl),o&&n.append("metadata",this.encodeMetadata(o))):(n=r,i["cache-control"]=`max-age=${a.cacheControl}`,i["content-type"]=a.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===s||void 0===s?void 0:s.headers)&&(i=Object.assign(Object.assign({},i),s.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?de:ce)(this.fetch,`${this.url}/object/${c}`,n,Object.assign({headers:i},(null===a||void 0===a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Q(n))return{data:null,error:n};throw n}})}upload(e,t,r){return ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return ge(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),a=this._getFinalPath(n),i=new URL(this.url+`/object/upload/sign/${a}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:xe.upsert},s),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,a["cache-control"]=`max-age=${t.cacheControl}`,a["content-type"]=t.contentType);return{data:{path:n,fullPath:(yield de(this.fetch,i.toString(),e,{headers:a})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Q(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return ge(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(s["x-upsert"]="true");const n=yield ce(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+n.url),i=a.searchParams.get("token");if(!i)throw new J("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:i},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Q(r))return{data:null,error:r};throw r}})}update(e,t,r){return ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return ge(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Q(s))return{data:null,error:s};throw s}})}copy(e,t,r){return ge(this,void 0,void 0,function*(){try{return{data:{path:(yield ce(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Q(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return ge(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),n=yield ce(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},(null===r||void 0===r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const a=(null===r||void 0===r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${a}`)},{data:n,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Q(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return ge(this,void 0,void 0,function*(){try{const s=yield ce(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),n=(null===r||void 0===r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:s.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${n}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Q(s))return{data:null,error:s};throw s}})}download(e,t){const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),n=s?`?${s}`:"",a=this._getFinalPath(e);return new me(()=>le(this.fetch,`${this.url}/${r}/${a}${n}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return ge(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield le(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:re(e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Q(r))return{data:null,error:r};throw r}})}exists(e){return ge(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,s){return se(this,void 0,void 0,function*(){return oe(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Q(r)&&r instanceof Z){const e=r.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],n=(null===t||void 0===t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==n&&s.push(n);const a="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&s.push(i);let o=s.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${o}`)}}}remove(e){return ge(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Q(t))return{data:null,error:t};throw t}})}list(e,t,r){return ge(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},ve),t),{prefix:e||""});return{data:yield ce(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Q(s))return{data:null,error:s};throw s}})}listV2(e,t){return ge(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield ce(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Q(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const be={"X-Client-Info":"storage-js/2.12.2"};var we=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class _e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const n=new URL(e);if(null===s||void 0===s?void 0:s.useNewHostname){/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase."))}this.url=n.href,this.headers=Object.assign(Object.assign({},be),t),this.fetch=te(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return we(this,void 0,void 0,function*(){try{return{data:yield le(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Q(e))return{data:null,error:e};throw e}})}getBucket(e){return we(this,void 0,void 0,function*(){try{return{data:yield le(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Q(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return we(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Q(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return we(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Q(r))return{data:null,error:r};throw r}})}emptyBucket(e){return we(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Q(t))return{data:null,error:t};throw t}})}deleteBucket(e){return we(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Q(t))return{data:null,error:t};throw t}})}}class je extends _e{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new ye(this.url,this.headers,e,this.fetch)}}let Ne="";Ne="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const ke={headers:{"X-Client-Info":`supabase-js-${Ne}/2.58.0`}},Se={schema:"public"},Ce={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ee={};var Pe=r(621),Te=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const Ie=e=>{let t;return t=e||("undefined"===typeof fetch?Pe.default:fetch),function(){return t(...arguments)}},Oe=(e,t,r)=>{const s=Ie(r),n="undefined"===typeof Headers?Pe.Headers:Headers;return(r,a)=>Te(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new n(null===a||void 0===a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),s(r,Object.assign(Object.assign({},a),{headers:l}))})};var Ae=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const Re="2.72.0",$e=3e4,De=9e4,Le={"X-Client-Info":`gotrue-js/${Re}`},Ue="X-Supabase-Api-Version",Me={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},ze=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Fe extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Be(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class qe extends Fe{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class Ve extends Fe{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class We extends Fe{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class He extends We{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ge extends We{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ye extends We{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ke extends We{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Je extends We{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qe extends We{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Xe(e){return Be(e)&&"AuthRetryableFetchError"===e.name}class Ze extends We{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class et extends We{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rt=" \t\n\r=".split(""),st=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<rt.length;t+=1)e[rt[t].charCodeAt(0)]=-2;for(let t=0;t<tt.length;t+=1)e[tt[t].charCodeAt(0)]=t;return e})();function nt(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(tt[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(tt[e]),t.queuedBits-=6}}function at(e,t,r){const s=st[e];if(!(s>-1)){if(-2===s)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function it(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(0===(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,s,r)};for(let i=0;i<e.length;i+=1)at(e.charCodeAt(i),n,a);return t.join("")}function ot(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function lt(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const t=1024*(s-55296)&65535;s=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}ot(s,t)}}function ct(e){const t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let n=0;n<e.length;n+=1)at(e.charCodeAt(n),r,s);return new Uint8Array(t)}function dt(e){const t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>nt(e,r,s)),nt(null,r,s),t.join("")}const ut=()=>"undefined"!==typeof window&&"undefined"!==typeof document,ht={tested:!1,writable:!1},pt=()=>{if(!ut())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(ht.tested)return ht.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ht.tested=!0,ht.writable=!0}catch(t){ht.tested=!0,ht.writable=!1}return ht.writable};const ft=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(r.bind(r,621)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},mt=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},gt=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(s){return r}},vt=async(e,t)=>{await e.removeItem(t)};class xt{constructor(){this.promise=new xt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function yt(e){const t=e.split(".");if(3!==t.length)throw new et("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!ze.test(t[r]))throw new et("JWT not in base64url format");return{header:JSON.parse(it(t[0])),payload:JSON.parse(it(t[1])),signature:ct(t[2]),raw:{header:t[0],payload:t[1]}}}function bt(e){return("0"+e.toString(16)).substr(-2)}async function wt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _t(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let s=0;s<56;s++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,bt).join("")}();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await mt(e,`${t}-code-verifier`,n);const a=await wt(s);return[a,s===a?"plain":"s256"]}xt.promiseConstructor=Promise;const jt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Nt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function kt(e){if(!Nt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function St(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ct(e){return JSON.parse(JSON.stringify(e))}var Et=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r};const Pt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Tt=[502,503,504];async function It(e){var t,r;if(!("object"===typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"===typeof r.json))throw new Qe(Pt(e),0);if(Tt.includes(e.status))throw new Qe(Pt(e),e.status);let s,n;try{s=await e.json()}catch(i){throw new Ve(Pt(i),i)}const a=function(e){const t=e.headers.get(Ue);if(!t)return null;if(!t.match(jt))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(i){return null}}(e);if(a&&a.getTime()>=Me.timestamp&&"object"===typeof s&&s&&"string"===typeof s.code?n=s.code:"object"===typeof s&&s&&"string"===typeof s.error_code&&(n=s.error_code),n){if("weak_password"===n)throw new Ze(Pt(s),e.status,(null===(t=s.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===n)throw new He}else if("object"===typeof s&&s&&"object"===typeof s.weak_password&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Ze(Pt(s),e.status,s.weak_password.reasons);throw new qe(Pt(s),e.status||500,n)}async function Ot(e,t,r,s){var n;const a=Object.assign({},null===s||void 0===s?void 0:s.headers);a[Ue]||(a[Ue]=Me.name),(null===s||void 0===s?void 0:s.jwt)&&(a.Authorization=`Bearer ${s.jwt}`);const i=null!==(n=null===s||void 0===s?void 0:s.query)&&void 0!==n?n:{};(null===s||void 0===s?void 0:s.redirectTo)&&(i.redirect_to=s.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,r,s,n,a){const i=((e,t,r,s)=>{const n={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))})(t,s,n,a);let o;try{o=await e(r,Object.assign({},i))}catch(l){throw console.error(l),new Qe(Pt(l),0)}o.ok||await It(o);if(null===s||void 0===s?void 0:s.noResolveJson)return o;try{return await o.json()}catch(l){await It(l)}}(e,t,r+o,{headers:a,noResolveJson:null===s||void 0===s?void 0:s.noResolveJson},{},null===s||void 0===s?void 0:s.body);return(null===s||void 0===s?void 0:s.xform)?null===s||void 0===s?void 0:s.xform(l):{data:Object.assign({},l),error:null}}function At(e){var t;let r=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Rt(e){const t=At(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function $t(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Dt(e){return{data:e,error:null}}function Lt(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a}=e,i=Et(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a},user:Object.assign({},i)},error:null}}function Ut(e){return e}const Mt=["global","local","others"];var zt=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r};class Ft{constructor(e){let{url:t="",headers:r={},fetch:s}=e;this.url=t,this.headers=r,this.fetch=ft(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mt[0];if(Mt.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mt.join(", ")}`);try{return await Ot(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Ot(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:$t})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=zt(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=null===r||void 0===r?void 0:r.newEmail,delete s.newEmail),await Ot(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Lt,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Be(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ot(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:$t})}catch(t){if(Be(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,n,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Ot(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(n=null===(s=null===e||void 0===e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==n?n:""},xform:Ut});if(c.error)throw c.error;const d=await c.json(),u=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Be(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){kt(e);try{return await Ot(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:$t})}catch(t){if(Be(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){kt(e);try{return await Ot(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:$t})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];kt(e);try{return await Ot(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:$t})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){kt(e.userId);try{const{data:t,error:r}=await Ot(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _deleteFactor(e){kt(e.userId),kt(e.id);try{return{data:await Ot(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Be(t))return{data:null,error:t};throw t}}}function Bt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const qt=!!(globalThis&&pt()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Vt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Wt extends Vt{}async function Ht(e,t,r){qt&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),qt&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(!s){if(0===t)throw qt&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Wt(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(qt)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}qt&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{qt&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}))}function Gt(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Yt(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Kt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Le,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Jt(e,t,r){return await r()}const Qt={};class Xt{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Xt.nextInstanceID,Xt.nextInstanceID+=1,this.instanceID>0&&ut()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Kt),e);if(this.logDebugMessages=!!s.debug,"function"===typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Ft({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=ft(s.fetch),this.lock=s.lock||Jt,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ut()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Ht:this.lock=Jt,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:pt()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Bt(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Bt(this.memoryStorage)),ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Qt[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Qt[this.storageKey]=Object.assign(Object.assign({},Qt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Qt[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Qt[this.storageKey]=Object.assign(Object.assign({},Qt[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger(`GoTrueClient@${this.instanceID} (${Re}) ${(new Date).toISOString()}`,...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(s){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),ut()&&this.detectSessionInUrl&&"none"!==r){const{data:s,error:n}=await this._getSessionFromURL(t,r);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),function(e){return Be(e)&&"AuthImplicitGrantRedirectError"===e.name}(n)){const t=null===(e=n.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:n}}return await this._removeSession(),{error:n}}const{session:a,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Be(t)?{error:t}:{error:new Ve("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const n=await Ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken}},xform:At}),{data:a,error:i}=n;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var t,r,s;try{let n;if("email"in e){const{email:r,password:s,options:a}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await _t(this.storage,this.storageKey)),n=await Ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo,body:{email:r,password:s,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:o},xform:At})}else{if(!("phone"in e))throw new Ye("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:i}=e;n=await Ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:a,data:null!==(r=null===i||void 0===i?void 0:i.data)&&void 0!==r?r:{},channel:null!==(s=null===i||void 0===i?void 0:i.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:At})}}const{data:a,error:i}=n;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:s,options:n}=e;t=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},xform:Rt})}else{if(!("phone"in e))throw new Ye("You must provide either an email or phone number and a password");{const{phone:r,password:s,options:n}=e;t=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},xform:Rt})}}const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s}):{data:{user:null,session:null},error:new Ge}}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,n;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(n=e.options)||void 0===n?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,s,n,a,i,o,l,c,d,u;let h,p;if("message"in e)h=e.message,p=e.signature;else{const{chain:d,wallet:u,statement:f,options:m}=e;let g;if(ut())if("object"===typeof u)g=u;else{const e=window;if(!("ethereum"in e)||"object"!==typeof e.ethereum||!("request"in e.ethereum)||"function"!==typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!==typeof u||!(null===m||void 0===m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=u}const v=new URL(null!==(t=null===m||void 0===m?void 0:m.url)&&void 0!==t?t:window.location.href),x=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!x||0===x.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const y=Gt(x[0]);let b=null===(r=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===r?void 0:r.chainId;if(!b){const e=await g.request({method:"eth_chainId"});b=parseInt(e,16)}h=function(e){var t;const{chainId:r,domain:s,expirationTime:n,issuedAt:a=new Date,nonce:i,notBefore:o,requestId:l,resources:c,scheme:d,uri:u,version:h}=e;if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!u)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const p=`${d?`${d}://${s}`:s} wants you to sign in with your Ethereum account:\n${Gt(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let f=`URI: ${u}\nVersion: ${h}\nChain ID: ${r}${i?`\nNonce: ${i}`:""}\nIssued At: ${a.toISOString()}`;if(n&&(f+=`\nExpiration Time: ${n.toISOString()}`),o&&(f+=`\nNot Before: ${o.toISOString()}`),l&&(f+=`\nRequest ID: ${l}`),c){let e="\nResources:";for(const t of c){if(!t||"string"!==typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}f+=e}return`${p}\n${f}`}({domain:v.host,address:y,statement:f,uri:v.href,version:"1",chainId:b,nonce:null===(s=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(a=null===(n=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===n?void 0:n.issuedAt)&&void 0!==a?a:new Date,expirationTime:null===(i=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===i?void 0:i.expirationTime,notBefore:null===(o=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===o?void 0:o.notBefore,requestId:null===(l=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===c?void 0:c.resources}),p=await g.request({method:"personal_sign",params:[Yt(h),y]})}try{const{data:t,error:r}=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:p},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(u=e.options)||void 0===u?void 0:u.captchaToken}}:null),xform:At});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new Ge}}catch(f){if(Be(f))return{data:{user:null,session:null},error:f};throw f}}async signInWithSolana(e){var t,r,s,n,a,i,o,l,c,d,u,h;let p,f;if("message"in e)p=e.message,f=e.signature;else{const{chain:u,wallet:h,statement:m,options:g}=e;let v;if(ut())if("object"===typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const x=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),f=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${x.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${null!==(s=null===(r=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...(null===(n=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===n?void 0:n.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(p),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{const{data:t,error:r}=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:dt(f)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:At});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new Ge}}catch(m){if(Be(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await gt(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:n}=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:At});if(await vt(this.storage,`${this.storageKey}-code-verifier`),n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==s&&void 0!==s?s:null}),error:n}):{data:{user:null,session:null,redirectType:null},error:new Ge}}catch(n){if(Be(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:n,nonce:a}=e,i=await Ot(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:n,nonce:a,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:At}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new Ge}}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,n,a;try{if("email"in e){const{email:s,options:n}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=await _t(this.storage,this.storageKey));const{error:o}=await Ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:null!==(t=null===n||void 0===n?void 0:n.data)&&void 0!==t?t:{},create_user:null===(r=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null===n||void 0===n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:r}=e,{data:i,error:o}=await Ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(s=null===r||void 0===r?void 0:r.data)&&void 0!==s?s:{},create_user:null===(n=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},channel:null!==(a=null===r||void 0===r?void 0:r.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o}}throw new Ye("You must provide either an email or phone number.")}catch(i){if(Be(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,r;try{let s,n;"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,n=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:a,error:i}=await Ot(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:s,xform:At});if(i)throw i;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,l=a.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(Be(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let n=null,a=null;return"pkce"===this.flowType&&([n,a]=await _t(this.storage,this.storageKey)),await Ot(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:a}),headers:this.headers,xform:Dt})}catch(n){if(Be(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new He;const{error:s}=await Ot(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Be(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:n}=e,{error:a}=await Ot(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},redirectTo:null===n||void 0===n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:r,type:s,options:n}=e,{data:a,error:i}=await Ot(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:i}}throw new Ye("You must provide either an email or phone number and a type")}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await gt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<De;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const t=await gt(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=St()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,s)=>(t||"user"!==r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,s))})}return{data:{session:e},error:null}}const{session:s,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:$t}):await this._useSession(async e=>{var t,r,s;const{data:n,error:a}=e;if(a)throw a;return(null===(t=n.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(s=null===(r=n.session)||void 0===r?void 0:r.access_token)&&void 0!==s?s:void 0,xform:$t}):{data:{user:null},error:new He}})}catch(t){if(Be(t))return function(e){return Be(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await vt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async r=>{const{data:s,error:n}=r;if(n)throw n;if(!s.session)throw new He;const a=s.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await _t(this.storage,this.storageKey));const{data:l,error:c}=await Ot(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:a.access_token,xform:$t});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new He;const t=Date.now()/1e3;let r=t,s=!0,n=null;const{payload:a}=yt(e.access_token);if(a.exp&&(r=a.exp,s=r<=t),s){const{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};n=t}else{const{data:s,error:a}=await this._getUser(e.access_token);if(a)throw a;n={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if(Be(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:s,error:n}=t;if(n)throw n;e=null!==(r=s.session)&&void 0!==r?r:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new He;const{session:s,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ut())throw new Ke("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ke(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Je("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Ke("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Je("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:n,refresh_token:a,expires_in:i,expires_at:o,token_type:l}=e;if(!n||!i||!a||!l)throw new Ke("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=$e&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const p=u-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,u,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,u,c);const{data:f,error:m}=await this._getUser(n);if(m)throw m;const g={provider_token:r,provider_refresh_token:s,access_token:n,expires_in:d,expires_at:u,refresh_token:a,token_type:l,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(Be(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await gt(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var r;const{data:s,error:n}=t;if(n)return{error:n};const a=null===(r=s.session)||void 0===r?void 0:r.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return Be(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await vt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:s},error:n}=t;if(n)throw n;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(n){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,s=null;"pkce"===this.flowType&&([r,s]=await _t(this.storage,this.storageKey,!0));try{return await Ot(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(Be(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Be(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async t=>{var r,s,n,a,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:!0});return await Ot(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(a=o.session)||void 0===a?void 0:a.access_token)&&void 0!==i?i:void 0})});if(s)throw s;return ut()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===r||void 0===r?void 0:r.url),{data:{provider:e.provider,url:null===r||void 0===r?void 0:r.url},error:null}}catch(r){if(Be(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:n,error:a}=t;if(a)throw a;return await Ot(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(s=null===(r=n.session)||void 0===r?void 0:r.access_token)&&void 0!==s?s:void 0})})}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Ot(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:At})),s=(e,t)=>{const r=200*Math.pow(2,e);return t&&Xe(t)&&Date.now()+r-n<$e},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await r(a);if(!s(a,null,t))return void e(t)}catch(n){if(!s(a,n))return void t(n)}})()}))}catch(n){if(this._debug(t,"error",n),Be(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}var r,s}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ut()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await gt(this.storage,this.storageKey);if(n&&this.userStorage){let t=await gt(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:n.user},await mt(this.userStorage,this.storageKey+"-user",t)),n.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:St()}else if(n&&!n.user&&!n.user){const e=await gt(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(n.user=e.user,await vt(this.storage,this.storageKey+"-user"),await mt(this.storage,this.storageKey,n)):n.user=St()}if(this._debug(r,"session from storage",n),!this._isValidSession(n))return this._debug(r,"session is not valid"),void(null!==n&&await this._removeSession());const a=1e3*(null!==(t=n.expires_at)&&void 0!==t?t:1/0)-Date.now()<De;if(this._debug(r,`session has${a?"":" not"} expired with margin of 90000s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),Xe(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(n.user&&!0===n.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(n.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(n.user=e.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return this._debug(r,"error",n),void console.error(n)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new He;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new xt;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new He;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={session:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(n){if(this._debug(s,"error",n),Be(n)){const e={session:null,error:n};return Xe(n)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(n),n}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],n=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(n){s.push(n)}});if(await Promise.all(n),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await mt(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const s=Ct(e);await mt(this.storage,this.storageKey,s)}else{const e=Ct(t);await mt(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await vt(this.storage,this.storageKey),await vt(this.storage,this.storageKey+"-code-verifier"),await vt(this.storage,this.storageKey+"-user"),this.userStorage&&await vt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ut()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),$e);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*r.expires_at-t)/$e);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Vt))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ut()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if((null===r||void 0===r?void 0:r.redirectTo)&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null===r||void 0===r?void 0:r.scopes)&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await _t(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});s.push(r.toString())}if(null===r||void 0===r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);s.push(e.toString())}return(null===r||void 0===r?void 0:r.skipBrowserRedirect)&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;return n?{data:null,error:n}:await Ot(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null===s||void 0===s?void 0:s.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:n,error:a}=t;if(a)return{data:null,error:a};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await Ot(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(s=null===o||void 0===o?void 0:o.totp)||void 0===s?void 0:s.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(Be(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;if(n)return{data:null,error:n};const{data:a,error:i}=await Ot(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null===s||void 0===s?void 0:s.session)||void 0===r?void 0:r.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:i})})}catch(t){if(Be(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;return n?{data:null,error:n}:await Ot(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(r=null===s||void 0===s?void 0:s.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Be(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(null===e||void 0===e?void 0:e.factors)||[],s=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status),n=r.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:s,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:n}=e;if(n)return{data:null,error:n};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=yt(s.access_token);let i=null;a.aal&&(i=a.aal);let o=i;(null!==(r=null===(t=s.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==r?r:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:a.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const r=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>r)return t;const{data:s,error:n}=await Ot(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;return s.keys&&0!==s.keys.length?(this.jwks=s,this.jwks_cached_at=r,t=s.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};r=e.session.access_token}const{header:s,payload:n,signature:a,raw:{header:i,payload:o}}=yt(r);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(n.exp);const l=s.alg&&!s.alg.startsWith("HS")&&s.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(s.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:n,header:s,signature:a},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,a,function(e){const t=[];return lt(e,e=>t.push(e)),new Uint8Array(t)}(`${i}.${o}`)))throw new et("Invalid JWT signature");return{data:{claims:n,header:s,signature:a},error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}}}Xt.nextInstanceID=0;const Zt=Xt;class er extends Zt{constructor(e){super(e)}}var tr=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class rr{constructor(e,t,r){var s,n,a;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((r=t).endsWith("/")?r:r+"/")}catch(s){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var r}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l=function(e,t){var r,s;const{db:n,auth:a,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(r=null===u||void 0===u?void 0:u.headers)&&void 0!==r?r:{}),null!==(s=null===o||void 0===o?void 0:o.headers)&&void 0!==s?s:{})}),accessToken:()=>Ae(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==r&&void 0!==r?r:{},{db:Se,realtime:Ee,auth:Object.assign(Object.assign({},Ce),{storageKey:o}),global:ke});this.storageKey=null!==(s=l.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(n=l.global.headers)&&void 0!==n?n:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(a=l.auth)&&void 0!==a?a:{},this.headers,l.global.fetch),this.fetch=Oe(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new u(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new je(this.storageUrl.href,this.headers,this.fetch,null===r||void 0===r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new c(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,r)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return tr(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,r){let{autoRefreshToken:s,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:o,storageKey:l,flowType:c,lock:d,debug:u}=e;const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new er({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),t),storageKey:l,autoRefreshToken:s,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:o,flowType:c,lock:d,debug:u,fetch:r,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new K(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const sr="https://vlnnvxlgzhtaorpixsay.supabase.co",nr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZsbm52eGxnemh0YW9ycGl4c2F5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkyMTE1NjgsImV4cCI6MjA3NDc4NzU2OH0.yGC82Qop5M_CSA48nXpwC15HxrqqW7CugFIb-17nxG0";nr&&!nr.includes("your-anon-key")||(console.warn("\u26a0\ufe0f  Supabase environment variables not configured. Please set REACT_APP_SUPABASE_URL and REACT_APP_SUPABASE_ANON_KEY in your .env file."),console.warn("\ud83d\udcd6 See AUTHENTICATION_SETUP.md for setup instructions."));const ar=((e,t,r)=>new rr(e,t,r))(sr,nr,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",storage:"undefined"!==typeof window?window.localStorage:void 0,storageKey:"propply-auth",debug:!1},global:{headers:{"X-Client-Info":"propply-ai-web"}}});console.log("Supabase initialized with:",{url:sr,keyPrefix:(null===nr||void 0===nr?void 0:nr.substring(0,20))+"..."});const ir={name:"Propply AI",version:"1.0.0",supportedCities:["NYC","Philadelphia"],apiUrl:"http://localhost:5001",subscriptionTiers:{free:{id:"free",name:"Free",price:0,type:"free",reportsPerMonth:0,features:["Up to 3 properties","Basic compliance tracking","Email reminders","Community support"],stripeProductId:null,stripePriceId:null},single_location_one_time:{id:"single_location_one_time",name:"Single Location - 1 Time Report",price:49.99,type:"one_time",reportsPerMonth:1,features:["Full AI compliance analysis","Detailed violation reports","Cost estimates","Priority support","Single property focus"],stripeProductId:"prod_single_report",stripePriceId:"price_single_report"},single_location_monthly:{id:"single_location_monthly",name:"Single Location - Monthly Report",price:99.99,type:"subscription",interval:"month",reportsPerMonth:1,features:["Monthly compliance reports","Single property tracking","AI-powered analytics","Automated scheduling","Email & SMS alerts","Basic vendor marketplace"],stripeProductId:"prod_single_monthly",stripePriceId:"price_single_monthly"},multiple_locations_ongoing:{id:"multiple_locations_ongoing",name:"Multiple Locations - Ongoing",price:199.99,type:"subscription",interval:"month",reportsPerMonth:-1,features:["Unlimited properties","Unlimited reports","AI-powered analytics","Vendor marketplace access","Automated scheduling","Priority support","Custom integrations","Advanced reporting suite"],stripeProductId:"prod_multiple_ongoing",stripePriceId:"price_multiple_ongoing",popular:!0},enterprise_yearly:{id:"enterprise_yearly",name:"Enterprise Yearly",price:1999.99,type:"subscription",interval:"year",reportsPerMonth:-1,features:["Everything in Multiple Locations","Advanced reporting suite","Custom integrations","Dedicated account manager","White-label options","API access","Save 17% annually"],stripeProductId:"prod_enterprise_yearly",stripePriceId:"price_enterprise_yearly"}},stripe:{publishableKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5001",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyA4gSJ9LDVqQ9AVxw3zVoHSQQVr_9W2V54",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZsbm52eGxnemh0YW9ycGl4c2F5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkyMTE1NjgsImV4cCI6MjA3NDc4NzU2OH0.yGC82Qop5M_CSA48nXpwC15HxrqqW7CugFIb-17nxG0",REACT_APP_SUPABASE_URL:"https://vlnnvxlgzhtaorpixsay.supabase.co"}.REACT_APP_STRIPE_PUBLISHABLE_KEY||"pk_test_...",webhookSecret:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5001",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyA4gSJ9LDVqQ9AVxw3zVoHSQQVr_9W2V54",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZsbm52eGxnemh0YW9ycGl4c2F5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkyMTE1NjgsImV4cCI6MjA3NDc4NzU2OH0.yGC82Qop5M_CSA48nXpwC15HxrqqW7CugFIb-17nxG0",REACT_APP_SUPABASE_URL:"https://vlnnvxlgzhtaorpixsay.supabase.co"}.STRIPE_WEBHOOK_SECRET||"whsec_..."}}},340:(e,t,r)=>{e.exports=r(761)},345:(e,t,r)=>{var s=r(950),n=r(340);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,r,s,n,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function y(e,t,r,s){var n=g.hasOwnProperty(t)?g[t]:null;(null!==n?0!==n.type:s||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,s){if(null===t||"undefined"===typeof t||function(e,t,r,s){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,s))return!0;if(s)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,n,s)&&(r=null),s||null===n?function(e){return!!u.call(f,e)||!u.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=null===r?3!==n.type&&"":r:(t=n.attributeName,s=n.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(n=n.type)||4===n&&!0===r?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,x);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,x);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,x);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function $(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var D,L=Object.assign;function U(e){if(void 0===D)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var M=!1;function z(e,t){if(!e||M)return"";M=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&"string"===typeof c.stack){for(var n=c.stack.split("\n"),a=s.stack.split("\n"),i=n.length-1,o=a.length-1;1<=i&&0<=o&&n[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(n[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||n[i]!==a[o]){var l="\n"+n[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{M=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?U(e):""}function F(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case _:return"Portal";case k:return"Profiler";case N:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return B(e(t))}catch(r){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var n=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){s=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=W(e)?e.checked?"true":"false":e.value),(e=s)!==r&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var r=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function J(e,t){var r=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;r=V(null!=t.value?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function X(e,t){Q(e,t);var r=V(t.value),s=t.type;if(null!=r)"number"===s?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&Y(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,s){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&s&&(e[r].defaultSelected=!0)}else{for(r=""+V(r),t=null,n=0;n<e.length;n++){if(e[n].value===r)return e[n].selected=!0,void(s&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(a(92));if(te(r)){if(1<r.length)throw Error(a(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:V(r)}}function ae(e,t){var r=V(t.value),s=V(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=s&&(e.defaultValue=""+s)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var s=0===r.indexOf("--"),n=me(r,t[r],s);"float"===r&&(r="cssFloat"),s?e.setProperty(r,n):e[r]=n}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,je=null,Ne=null;function ke(e){if(e=yn(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wn(t),_e(e.stateNode,e.type,t))}}function Se(e){je?Ne?Ne.push(e):Ne=[e]:je=e}function Ce(){if(je){var e=je,t=Ne;if(Ne=je=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ee(e,t){return e(t)}function Pe(){}var Te=!1;function Ie(e,t,r){if(Te)return e(t,r);Te=!0;try{return Ee(e,t,r)}finally{Te=!1,(null!==je||null!==Ne)&&(Pe(),Ce())}}function Oe(e,t){var r=e.stateNode;if(null===r)return null;var s=wn(r);if(null===s)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(a(231,t,typeof r));return r}var Ae=!1;if(d)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(de){Ae=!1}function $e(e,t,r,s,n,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var De=!1,Le=null,Ue=!1,Me=null,ze={onError:function(e){De=!0,Le=e}};function Fe(e,t,r,s,n,a,i,o,l){De=!1,Le=null,$e.apply(ze,arguments)}function Be(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(Be(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var r=e,s=t;;){var n=r.return;if(null===n)break;var i=n.alternate;if(null===i){if(null!==(s=n.return)){r=s;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return Ve(n),e;if(i===s)return Ve(n),t;i=i.sibling}throw Error(a(188))}if(r.return!==s.return)r=n,s=i;else{for(var o=!1,l=n.child;l;){if(l===r){o=!0,r=n,s=i;break}if(l===s){o=!0,s=n,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=n;break}if(l===s){o=!0,s=i,r=n;break}l=l.sibling}if(!o)throw Error(a(189))}}if(r.alternate!==s)throw Error(a(190))}if(3!==r.tag)throw Error(a(188));return r.stateNode.current===r?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=n.unstable_scheduleCallback,Ye=n.unstable_cancelCallback,Ke=n.unstable_shouldYield,Je=n.unstable_requestPaint,Qe=n.unstable_now,Xe=n.unstable_getCurrentPriorityLevel,Ze=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,tt=n.unstable_NormalPriority,rt=n.unstable_LowPriority,st=n.unstable_IdlePriority,nt=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var s=0,n=e.suspendedLanes,a=e.pingedLanes,i=268435455&r;if(0!==i){var o=i&~n;0!==o?s=ut(o):0!==(a&=i)&&(s=ut(a))}else 0!==(i=r&~n)?s=ut(i):0!==a&&(s=ut(a));if(0===s)return 0;if(0!==t&&t!==s&&0===(t&n)&&((n=s&-s)>=(a=t&-t)||16===n&&0!==(4194240&a)))return t;if(0!==(4&s)&&(s|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)n=1<<(r=31-it(t)),s|=e[r],t&=~n;return s}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function vt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=r}function xt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-it(r),n=1<<s;n&t|e[s]&t&&(e[s]|=t),r&=~n}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,jt,Nt,kt,St=!1,Ct=[],Et=null,Pt=null,Tt=null,It=new Map,Ot=new Map,At=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $t(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Dt(e,t,r,s,n,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[n]},null!==t&&(null!==(t=yn(t))&&_t(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function Lt(e){var t=xn(e.target);if(null!==t){var r=Be(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=qe(r)))return e.blockedOn=t,void kt(e.priority,function(){jt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=yn(r))&&_t(t),e.blockedOn=r,!1;var s=new(r=e.nativeEvent).constructor(r.type,r);be=s,r.target.dispatchEvent(s),be=null,t.shift()}return!0}function Mt(e,t,r){Ut(e)&&r.delete(t)}function zt(){St=!1,null!==Et&&Ut(Et)&&(Et=null),null!==Pt&&Ut(Pt)&&(Pt=null),null!==Tt&&Ut(Tt)&&(Tt=null),It.forEach(Mt),Ot.forEach(Mt)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return Ft(t,e)}if(0<Ct.length){Ft(Ct[0],e);for(var r=1;r<Ct.length;r++){var s=Ct[r];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==Et&&Ft(Et,e),null!==Pt&&Ft(Pt,e),null!==Tt&&Ft(Tt,e),It.forEach(t),Ot.forEach(t),r=0;r<At.length;r++)(s=At[r]).blockedOn===e&&(s.blockedOn=null);for(;0<At.length&&null===(r=At[0]).blockedOn;)Lt(r),null===r.blockedOn&&At.shift()}var qt=b.ReactCurrentBatchConfig,Vt=!0;function Wt(e,t,r,s){var n=yt,a=qt.transition;qt.transition=null;try{yt=1,Gt(e,t,r,s)}finally{yt=n,qt.transition=a}}function Ht(e,t,r,s){var n=yt,a=qt.transition;qt.transition=null;try{yt=4,Gt(e,t,r,s)}finally{yt=n,qt.transition=a}}function Gt(e,t,r,s){if(Vt){var n=Kt(e,t,r,s);if(null===n)qs(e,t,s,Yt,r),$t(e,s);else if(function(e,t,r,s,n){switch(t){case"focusin":return Et=Dt(Et,e,t,r,s,n),!0;case"dragenter":return Pt=Dt(Pt,e,t,r,s,n),!0;case"mouseover":return Tt=Dt(Tt,e,t,r,s,n),!0;case"pointerover":var a=n.pointerId;return It.set(a,Dt(It.get(a)||null,e,t,r,s,n)),!0;case"gotpointercapture":return a=n.pointerId,Ot.set(a,Dt(Ot.get(a)||null,e,t,r,s,n)),!0}return!1}(n,e,t,r,s))s.stopPropagation();else if($t(e,s),4&t&&-1<Rt.indexOf(e)){for(;null!==n;){var a=yn(n);if(null!==a&&wt(a),null===(a=Kt(e,t,r,s))&&qs(e,t,s,Yt,r),a===n)break;n=a}null!==n&&s.stopPropagation()}else qs(e,t,s,null,r)}}var Yt=null;function Kt(e,t,r,s){if(Yt=null,null!==(e=xn(e=we(s))))if(null===(t=Be(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case st:return 536870912;default:return 16}default:return 16}}var Qt=null,Xt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Xt,s=r.length,n="value"in Qt?Qt.value:Qt.textContent,a=n.length;for(e=0;e<s&&r[e]===n[e];e++);var i=s-e;for(t=1;t<=i&&r[s-t]===n[a-t];t++);return Zt=n.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function sr(){return!1}function nr(e){function t(t,r,s,n,a){for(var i in this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=n,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(n):n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?rr:sr,this.isPropagationStopped=sr,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ar,ir,or,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=nr(lr),dr=L({},lr,{view:0,detail:0}),ur=nr(dr),hr=L({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(ar=e.screenX-or.screenX,ir=e.screenY-or.screenY):ir=ar=0,or=e),ar)},movementY:function(e){return"movementY"in e?e.movementY:ir}}),pr=nr(hr),fr=nr(L({},hr,{dataTransfer:0})),mr=nr(L({},dr,{relatedTarget:0})),gr=nr(L({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),vr=L({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xr=nr(vr),yr=nr(L({},lr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_r[e])&&!!t[e]}function Nr(){return jr}var kr=L({},dr,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sr=nr(kr),Cr=nr(L({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=nr(L({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nr})),Pr=nr(L({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tr=L({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ir=nr(Tr),Or=[9,13,27,32],Ar=d&&"CompositionEvent"in window,Rr=null;d&&"documentMode"in document&&(Rr=document.documentMode);var $r=d&&"TextEvent"in window&&!Rr,Dr=d&&(!Ar||Rr&&8<Rr&&11>=Rr),Lr=String.fromCharCode(32),Ur=!1;function Mr(e,t){switch(e){case"keyup":return-1!==Or.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Fr=!1;var Br={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Br[e.type]:"textarea"===t}function Vr(e,t,r,s){Se(s),0<(t=Ws(t,"onChange")).length&&(r=new cr("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Wr=null,Hr=null;function Gr(e){Ls(e,0)}function Yr(e){if(G(bn(e)))return e}function Kr(e,t){if("change"===e)return t}var Jr=!1;if(d){var Qr;if(d){var Xr="oninput"in document;if(!Xr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Xr="function"===typeof Zr.oninput}Qr=Xr}else Qr=!1;Jr=Qr&&(!document.documentMode||9<document.documentMode)}function es(){Wr&&(Wr.detachEvent("onpropertychange",ts),Hr=Wr=null)}function ts(e){if("value"===e.propertyName&&Yr(Hr)){var t=[];Vr(t,Hr,e,we(e)),Ie(Gr,t)}}function rs(e,t,r){"focusin"===e?(es(),Hr=r,(Wr=t).attachEvent("onpropertychange",ts)):"focusout"===e&&es()}function ss(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yr(Hr)}function ns(e,t){if("click"===e)return Yr(t)}function as(e,t){if("input"===e||"change"===e)return Yr(t)}var is="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function os(e,t){if(is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!u.call(t,n)||!is(e[n],t[n]))return!1}return!0}function ls(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cs(e,t){var r,s=ls(e);for(e=0;s;){if(3===s.nodeType){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=ls(s)}}function ds(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ds(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function us(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(s){r=!1}if(!r)break;t=Y((e=t.contentWindow).document)}return t}function hs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ps(e){var t=us(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ds(r.ownerDocument.documentElement,r)){if(null!==s&&hs(r))if(t=s.start,void 0===(e=s.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var n=r.textContent.length,a=Math.min(s.start,n);s=void 0===s.end?a:Math.min(s.end,n),!e.extend&&a>s&&(n=s,s=a,a=n),n=cs(r,a);var i=cs(r,s);n&&i&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fs=d&&"documentMode"in document&&11>=document.documentMode,ms=null,gs=null,vs=null,xs=!1;function ys(e,t,r){var s=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;xs||null==ms||ms!==Y(s)||("selectionStart"in(s=ms)&&hs(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},vs&&os(vs,s)||(vs=s,0<(s=Ws(gs,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=ms)))}function bs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ws={animationend:bs("Animation","AnimationEnd"),animationiteration:bs("Animation","AnimationIteration"),animationstart:bs("Animation","AnimationStart"),transitionend:bs("Transition","TransitionEnd")},_s={},js={};function Ns(e){if(_s[e])return _s[e];if(!ws[e])return e;var t,r=ws[e];for(t in r)if(r.hasOwnProperty(t)&&t in js)return _s[e]=r[t];return e}d&&(js=document.createElement("div").style,"AnimationEvent"in window||(delete ws.animationend.animation,delete ws.animationiteration.animation,delete ws.animationstart.animation),"TransitionEvent"in window||delete ws.transitionend.transition);var ks=Ns("animationend"),Ss=Ns("animationiteration"),Cs=Ns("animationstart"),Es=Ns("transitionend"),Ps=new Map,Ts="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(e,t){Ps.set(e,t),l(t,[e])}for(var Os=0;Os<Ts.length;Os++){var As=Ts[Os];Is(As.toLowerCase(),"on"+(As[0].toUpperCase()+As.slice(1)))}Is(ks,"onAnimationEnd"),Is(Ss,"onAnimationIteration"),Is(Cs,"onAnimationStart"),Is("dblclick","onDoubleClick"),Is("focusin","onFocus"),Is("focusout","onBlur"),Is(Es,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$s=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rs));function Ds(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,s,n,i,o,l,c){if(Fe.apply(this,arguments),De){if(!De)throw Error(a(198));var d=Le;De=!1,Le=null,Ue||(Ue=!0,Me=d)}}(s,t,void 0,e),e.currentTarget=null}function Ls(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var s=e[r],n=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var i=s.length-1;0<=i;i--){var o=s[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&n.isPropagationStopped())break e;Ds(n,o,c),a=l}else for(i=0;i<s.length;i++){if(l=(o=s[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&n.isPropagationStopped())break e;Ds(n,o,c),a=l}}}if(Ue)throw e=Me,Ue=!1,Me=null,e}function Us(e,t){var r=t[mn];void 0===r&&(r=t[mn]=new Set);var s=e+"__bubble";r.has(s)||(Bs(t,e,2,!1),r.add(s))}function Ms(e,t,r){var s=0;t&&(s|=4),Bs(r,e,s,t)}var zs="_reactListening"+Math.random().toString(36).slice(2);function Fs(e){if(!e[zs]){e[zs]=!0,i.forEach(function(t){"selectionchange"!==t&&($s.has(t)||Ms(t,!1,e),Ms(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zs]||(t[zs]=!0,Ms("selectionchange",!1,t))}}function Bs(e,t,r,s){switch(Jt(t)){case 1:var n=Wt;break;case 4:n=Ht;break;default:n=Gt}r=n.bind(null,t,r,e),n=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),s?void 0!==n?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):void 0!==n?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function qs(e,t,r,s,n){var a=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var i=s.tag;if(3===i||4===i){var o=s.stateNode.containerInfo;if(o===n||8===o.nodeType&&o.parentNode===n)break;if(4===i)for(i=s.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===n||8===l.nodeType&&l.parentNode===n))return;i=i.return}for(;null!==o;){if(null===(i=xn(o)))return;if(5===(l=i.tag)||6===l){s=a=i;continue e}o=o.parentNode}}s=s.return}Ie(function(){var s=a,n=we(r),i=[];e:{var o=Ps.get(e);if(void 0!==o){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Sr;break;case"focusin":c="focus",l=mr;break;case"focusout":c="blur",l=mr;break;case"beforeblur":case"afterblur":l=mr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Er;break;case ks:case Ss:case Cs:l=gr;break;case Es:l=Pr;break;case"scroll":l=ur;break;case"wheel":l=Ir;break;case"copy":case"cut":case"paste":l=xr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cr}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var p,f=s;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Oe(f,h))&&d.push(Vs(f,m,p)))),u)break;f=f.return}0<d.length&&(o=new l(o,c,null,r,n),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===be||!(c=r.relatedTarget||r.fromElement)||!xn(c)&&!c[fn])&&(l||o)&&(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=s,null!==(c=(c=r.relatedTarget||r.toElement)?xn(c):null)&&(c!==(u=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=s),l!==c)){if(d=pr,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=Cr,m="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==l?o:bn(l),p=null==c?o:bn(c),(o=new d(m,f+"leave",l,r,n)).target=u,o.relatedTarget=p,m=null,xn(n)===s&&((d=new d(h,f+"enter",c,r,n)).target=p,d.relatedTarget=u,m=d),u=m,l&&c)e:{for(h=c,f=0,p=d=l;p;p=Hs(p))f++;for(p=0,m=h;m;m=Hs(m))p++;for(;0<f-p;)d=Hs(d),f--;for(;0<p-f;)h=Hs(h),p--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=Hs(d),h=Hs(h)}d=null}else d=null;null!==l&&Gs(i,o,l,d,!1),null!==c&&null!==u&&Gs(i,u,c,d,!0)}if("select"===(l=(o=s?bn(s):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Kr;else if(qr(o))if(Jr)g=as;else{g=ss;var v=rs}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ns);switch(g&&(g=g(e,s))?Vr(i,g,r,n):(v&&v(e,o,s),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=s?bn(s):window,e){case"focusin":(qr(v)||"true"===v.contentEditable)&&(ms=v,gs=s,vs=null);break;case"focusout":vs=gs=ms=null;break;case"mousedown":xs=!0;break;case"contextmenu":case"mouseup":case"dragend":xs=!1,ys(i,r,n);break;case"selectionchange":if(fs)break;case"keydown":case"keyup":ys(i,r,n)}var x;if(Ar)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Fr?Mr(e,r)&&(y="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(y="onCompositionStart");y&&(Dr&&"ko"!==r.locale&&(Fr||"onCompositionStart"!==y?"onCompositionEnd"===y&&Fr&&(x=er()):(Xt="value"in(Qt=n)?Qt.value:Qt.textContent,Fr=!0)),0<(v=Ws(s,y)).length&&(y=new yr(y,e,null,r,n),i.push({event:y,listeners:v}),x?y.data=x:null!==(x=zr(r))&&(y.data=x))),(x=$r?function(e,t){switch(e){case"compositionend":return zr(t);case"keypress":return 32!==t.which?null:(Ur=!0,Lr);case"textInput":return(e=t.data)===Lr&&Ur?null:e;default:return null}}(e,r):function(e,t){if(Fr)return"compositionend"===e||!Ar&&Mr(e,t)?(e=er(),Zt=Xt=Qt=null,Fr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(s=Ws(s,"onBeforeInput")).length&&(n=new yr("onBeforeInput","beforeinput",null,r,n),i.push({event:n,listeners:s}),n.data=x))}Ls(i,t)})}function Vs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ws(e,t){for(var r=t+"Capture",s=[];null!==e;){var n=e,a=n.stateNode;5===n.tag&&null!==a&&(n=a,null!=(a=Oe(e,r))&&s.unshift(Vs(e,a,n)),null!=(a=Oe(e,t))&&s.push(Vs(e,a,n))),e=e.return}return s}function Hs(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gs(e,t,r,s,n){for(var a=t._reactName,i=[];null!==r&&r!==s;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===s)break;5===o.tag&&null!==c&&(o=c,n?null!=(l=Oe(r,a))&&i.unshift(Vs(r,l,o)):n||null!=(l=Oe(r,a))&&i.push(Vs(r,l,o))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var Ys=/\r\n?/g,Ks=/\u0000|\uFFFD/g;function Js(e){return("string"===typeof e?e:""+e).replace(Ys,"\n").replace(Ks,"")}function Qs(e,t,r){if(t=Js(t),Js(e)!==t&&r)throw Error(a(425))}function Xs(){}var Zs=null,en=null;function tn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rn="function"===typeof setTimeout?setTimeout:void 0,sn="function"===typeof clearTimeout?clearTimeout:void 0,nn="function"===typeof Promise?Promise:void 0,an="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nn?function(e){return nn.resolve(null).then(e).catch(on)}:rn;function on(e){setTimeout(function(){throw e})}function ln(e,t){var r=t,s=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&8===n.nodeType)if("/$"===(r=n.data)){if(0===s)return e.removeChild(n),void Bt(t);s--}else"$"!==r&&"$?"!==r&&"$!"!==r||s++;r=n}while(r);Bt(t)}function cn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var un=Math.random().toString(36).slice(2),hn="__reactFiber$"+un,pn="__reactProps$"+un,fn="__reactContainer$"+un,mn="__reactEvents$"+un,gn="__reactListeners$"+un,vn="__reactHandles$"+un;function xn(e){var t=e[hn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fn]||r[hn]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=dn(e);null!==e;){if(r=e[hn])return r;e=dn(e)}return t}r=(e=r).parentNode}return null}function yn(e){return!(e=e[hn]||e[fn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wn(e){return e[pn]||null}var _n=[],jn=-1;function Nn(e){return{current:e}}function kn(e){0>jn||(e.current=_n[jn],_n[jn]=null,jn--)}function Sn(e,t){jn++,_n[jn]=e.current,e.current=t}var Cn={},En=Nn(Cn),Pn=Nn(!1),Tn=Cn;function In(e,t){var r=e.type.contextTypes;if(!r)return Cn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var n,a={};for(n in r)a[n]=t[n];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function On(e){return null!==(e=e.childContextTypes)&&void 0!==e}function An(){kn(Pn),kn(En)}function Rn(e,t,r){if(En.current!==Cn)throw Error(a(168));Sn(En,t),Sn(Pn,r)}function $n(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,"function"!==typeof s.getChildContext)return r;for(var n in s=s.getChildContext())if(!(n in t))throw Error(a(108,q(e)||"Unknown",n));return L({},r,s)}function Dn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cn,Tn=En.current,Sn(En,e),Sn(Pn,Pn.current),!0}function Ln(e,t,r){var s=e.stateNode;if(!s)throw Error(a(169));r?(e=$n(e,t,Tn),s.__reactInternalMemoizedMergedChildContext=e,kn(Pn),kn(En),Sn(En,e)):kn(Pn),Sn(Pn,r)}var Un=null,Mn=!1,zn=!1;function Fn(e){null===Un?Un=[e]:Un.push(e)}function Bn(){if(!zn&&null!==Un){zn=!0;var e=0,t=yt;try{var r=Un;for(yt=1;e<r.length;e++){var s=r[e];do{s=s(!0)}while(null!==s)}Un=null,Mn=!1}catch(n){throw null!==Un&&(Un=Un.slice(e+1)),Ge(Ze,Bn),n}finally{yt=t,zn=!1}}return null}var qn=[],Vn=0,Wn=null,Hn=0,Gn=[],Yn=0,Kn=null,Jn=1,Qn="";function Xn(e,t){qn[Vn++]=Hn,qn[Vn++]=Wn,Wn=e,Hn=t}function Zn(e,t,r){Gn[Yn++]=Jn,Gn[Yn++]=Qn,Gn[Yn++]=Kn,Kn=e;var s=Jn;e=Qn;var n=32-it(s)-1;s&=~(1<<n),r+=1;var a=32-it(t)+n;if(30<a){var i=n-n%5;a=(s&(1<<i)-1).toString(32),s>>=i,n-=i,Jn=1<<32-it(t)+n|r<<n|s,Qn=a+e}else Jn=1<<a|r<<n|s,Qn=e}function ea(e){null!==e.return&&(Xn(e,1),Zn(e,1,0))}function ta(e){for(;e===Wn;)Wn=qn[--Vn],qn[Vn]=null,Hn=qn[--Vn],qn[Vn]=null;for(;e===Kn;)Kn=Gn[--Yn],Gn[Yn]=null,Qn=Gn[--Yn],Gn[Yn]=null,Jn=Gn[--Yn],Gn[Yn]=null}var ra=null,sa=null,na=!1,aa=null;function ia(e,t){var r=Ic(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function oa(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,sa=cn(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,sa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Kn?{id:Jn,overflow:Qn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Ic(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ra=e,sa=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(na){var t=sa;if(t){var r=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=cn(r.nextSibling);var s=ra;t&&oa(e,t)?ia(s,r):(e.flags=-4097&e.flags|2,na=!1,ra=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,na=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function ua(e){if(e!==ra)return!1;if(!na)return da(e),na=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!tn(e.type,e.memoizedProps)),t&&(t=sa)){if(la(e))throw ha(),Error(a(418));for(;t;)ia(e,t),t=cn(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){sa=cn(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}sa=null}}else sa=ra?cn(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=sa;e;)e=cn(e.nextSibling)}function pa(){sa=ra=null,na=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ma=b.ReactCurrentBatchConfig;function ga(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(a(309));var s=r.stateNode}if(!s)throw Error(a(147,e));var n=s,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=n.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xa(e){return(0,e._init)(e._payload)}function ya(e){function t(t,r){if(e){var s=t.deletions;null===s?(t.deletions=[r],t.flags|=16):s.push(r)}}function r(r,s){if(!e)return null;for(;null!==s;)t(r,s),s=s.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=Ac(e,t)).index=0,e.sibling=null,e}function i(t,r,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<r?(t.flags|=2,r):s:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,s){return null===t||6!==t.tag?((t=Lc(r,e.mode,s)).return=e,t):((t=n(t,r)).return=e,t)}function c(e,t,r,s){var a=r.type;return a===j?u(e,t,r.props.children,s,r.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&xa(a)===t.type)?((s=n(t,r.props)).ref=ga(e,t,r),s.return=e,s):((s=Rc(r.type,r.key,r.props,null,e.mode,s)).ref=ga(e,t,r),s.return=e,s)}function d(e,t,r,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Uc(r,e.mode,s)).return=e,t):((t=n(t,r.children||[])).return=e,t)}function u(e,t,r,s,a){return null===t||7!==t.tag?((t=$c(r,e.mode,s,a)).return=e,t):((t=n(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(r=Rc(t.type,t.key,t.props,null,e.mode,r)).ref=ga(e,null,t),r.return=e,r;case _:return(t=Uc(t,e.mode,r)).return=e,t;case O:return h(e,(0,t._init)(t._payload),r)}if(te(t)||$(t))return(t=$c(t,e.mode,r,null)).return=e,t;va(e,t)}return null}function p(e,t,r,s){var n=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==n?null:l(e,t,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===n?c(e,t,r,s):null;case _:return r.key===n?d(e,t,r,s):null;case O:return p(e,t,(n=r._init)(r._payload),s)}if(te(r)||$(r))return null!==n?null:u(e,t,r,s,null);va(e,r)}return null}function f(e,t,r,s,n){if("string"===typeof s&&""!==s||"number"===typeof s)return l(t,e=e.get(r)||null,""+s,n);if("object"===typeof s&&null!==s){switch(s.$$typeof){case w:return c(t,e=e.get(null===s.key?r:s.key)||null,s,n);case _:return d(t,e=e.get(null===s.key?r:s.key)||null,s,n);case O:return f(e,t,r,(0,s._init)(s._payload),n)}if(te(s)||$(s))return u(t,e=e.get(r)||null,s,n,null);va(t,s)}return null}function m(n,a,o,l){for(var c=null,d=null,u=a,m=a=0,g=null;null!==u&&m<o.length;m++){u.index>m?(g=u,u=null):g=u.sibling;var v=p(n,u,o[m],l);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(n,u),a=i(v,a,m),null===d?c=v:d.sibling=v,d=v,u=g}if(m===o.length)return r(n,u),na&&Xn(n,m),c;if(null===u){for(;m<o.length;m++)null!==(u=h(n,o[m],l))&&(a=i(u,a,m),null===d?c=u:d.sibling=u,d=u);return na&&Xn(n,m),c}for(u=s(n,u);m<o.length;m++)null!==(g=f(u,n,m,o[m],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?m:g.key),a=i(g,a,m),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(n,e)}),na&&Xn(n,m),c}function g(n,o,l,c){var d=$(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var u=d=null,m=o,g=o=0,v=null,x=l.next();null!==m&&!x.done;g++,x=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var y=p(n,m,x.value,c);if(null===y){null===m&&(m=v);break}e&&m&&null===y.alternate&&t(n,m),o=i(y,o,g),null===u?d=y:u.sibling=y,u=y,m=v}if(x.done)return r(n,m),na&&Xn(n,g),d;if(null===m){for(;!x.done;g++,x=l.next())null!==(x=h(n,x.value,c))&&(o=i(x,o,g),null===u?d=x:u.sibling=x,u=x);return na&&Xn(n,g),d}for(m=s(n,m);!x.done;g++,x=l.next())null!==(x=f(m,n,g,x.value,c))&&(e&&null!==x.alternate&&m.delete(null===x.key?g:x.key),o=i(x,o,g),null===u?d=x:u.sibling=x,u=x);return e&&m.forEach(function(e){return t(n,e)}),na&&Xn(n,g),d}return function e(s,a,i,l){if("object"===typeof i&&null!==i&&i.type===j&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,d=a;null!==d;){if(d.key===c){if((c=i.type)===j){if(7===d.tag){r(s,d.sibling),(a=n(d,i.props.children)).return=s,s=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&xa(c)===d.type){r(s,d.sibling),(a=n(d,i.props)).ref=ga(s,d,i),a.return=s,s=a;break e}r(s,d);break}t(s,d),d=d.sibling}i.type===j?((a=$c(i.props.children,s.mode,l,i.key)).return=s,s=a):((l=Rc(i.type,i.key,i.props,null,s.mode,l)).ref=ga(s,a,i),l.return=s,s=l)}return o(s);case _:e:{for(d=i.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){r(s,a.sibling),(a=n(a,i.children||[])).return=s,s=a;break e}r(s,a);break}t(s,a),a=a.sibling}(a=Uc(i,s.mode,l)).return=s,s=a}return o(s);case O:return e(s,a,(d=i._init)(i._payload),l)}if(te(i))return m(s,a,i,l);if($(i))return g(s,a,i,l);va(s,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(r(s,a.sibling),(a=n(a,i)).return=s,s=a):(r(s,a),(a=Lc(i,s.mode,l)).return=s,s=a),o(s)):r(s,a)}}var ba=ya(!0),wa=ya(!1),_a=Nn(null),ja=null,Na=null,ka=null;function Sa(){ka=Na=ja=null}function Ca(e){var t=_a.current;kn(_a),e._currentValue=t}function Ea(e,t,r){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Pa(e,t){ja=e,ka=Na=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yo=!0),e.firstContext=null)}function Ta(e){var t=e._currentValue;if(ka!==e)if(e={context:e,memoizedValue:t,next:null},null===Na){if(null===ja)throw Error(a(308));Na=e,ja.dependencies={lanes:0,firstContext:e}}else Na=Na.next=e;return t}var Ia=null;function Oa(e){null===Ia?Ia=[e]:Ia.push(e)}function Aa(e,t,r,s){var n=t.interleaved;return null===n?(r.next=r,Oa(t)):(r.next=n.next,n.next=r),t.interleaved=r,Ra(e,s)}function Ra(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var $a=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function La(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ua(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ma(e,t,r){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&El)){var n=s.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),s.pending=t,Ra(e,r)}return null===(n=s.interleaved)?(t.next=t,Oa(s)):(t.next=n.next,n.next=t),s.interleaved=t,Ra(e,r)}function za(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var s=t.lanes;r|=s&=e.pendingLanes,t.lanes=r,xt(e,r)}}function Fa(e,t){var r=e.updateQueue,s=e.alternate;if(null!==s&&r===(s=s.updateQueue)){var n=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?n=a=i:a=a.next=i,r=r.next}while(null!==r);null===a?n=a=t:a=a.next=t}else n=a=t;return r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:a,shared:s.shared,effects:s.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ba(e,t,r,s){var n=e.updateQueue;$a=!1;var a=n.firstBaseUpdate,i=n.lastBaseUpdate,o=n.shared.pending;if(null!==o){n.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=n.baseState;for(i=0,d=c=l=null,o=a;;){var h=o.lane,p=o.eventTime;if((s&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=r,m.tag){case 1:if("function"===typeof(f=m.payload)){u=f.call(p,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,u,h):f)||void 0===h)break e;u=L({},u,h);break e;case 2:$a=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=n.effects)?n.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,i|=h;if(null===(o=o.next)){if(null===(o=n.shared.pending))break;o=(h=o).next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}if(null===d&&(l=u),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=d,null!==(t=n.shared.interleaved)){n=t;do{i|=n.lane,n=n.next}while(n!==t)}else null===a&&(n.shared.lanes=0);Dl|=i,e.lanes=i,e.memoizedState=u}}function qa(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],n=s.callback;if(null!==n){if(s.callback=null,s=r,"function"!==typeof n)throw Error(a(191,n));n.call(s)}}}var Va={},Wa=Nn(Va),Ha=Nn(Va),Ga=Nn(Va);function Ya(e){if(e===Va)throw Error(a(174));return e}function Ka(e,t){switch(Sn(Ga,t),Sn(Ha,e),Sn(Wa,Va),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}kn(Wa),Sn(Wa,t)}function Ja(){kn(Wa),kn(Ha),kn(Ga)}function Qa(e){Ya(Ga.current);var t=Ya(Wa.current),r=le(t,e.type);t!==r&&(Sn(Ha,e),Sn(Wa,r))}function Xa(e){Ha.current===e&&(kn(Wa),kn(Ha))}var Za=Nn(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ri(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var si=b.ReactCurrentDispatcher,ni=b.ReactCurrentBatchConfig,ai=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,hi=0;function pi(){throw Error(a(321))}function fi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!is(e[r],t[r]))return!1;return!0}function mi(e,t,r,s,n,i){if(ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,si.current=null===e||null===e.memoizedState?Xi:Zi,e=r(s,n),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(a(301));i+=1,li=oi=null,t.updateQueue=null,si.current=eo,e=r(s,n)}while(di)}if(si.current=Qi,t=null!==oi&&null!==oi.next,ai=0,li=oi=ii=null,ci=!1,t)throw Error(a(300));return e}function gi(){var e=0!==ui;return ui=0,e}function vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function xi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function yi(e,t){return"function"===typeof t?t(e):t}function bi(e){var t=xi(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var s=oi,n=s.baseQueue,i=r.pending;if(null!==i){if(null!==n){var o=n.next;n.next=i.next,i.next=o}s.baseQueue=n=i,r.pending=null}if(null!==n){i=n.next,s=s.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ai&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=s):c=c.next=h,ii.lanes|=u,Dl|=u}d=d.next}while(null!==d&&d!==i);null===c?o=s:c.next=l,is(s,t.memoizedState)||(yo=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,r.lastRenderedState=s}if(null!==(e=r.interleaved)){n=e;do{i=n.lane,ii.lanes|=i,Dl|=i,n=n.next}while(n!==e)}else null===n&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function wi(e){var t=xi(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var s=r.dispatch,n=r.pending,i=t.memoizedState;if(null!==n){r.pending=null;var o=n=n.next;do{i=e(i,o.action),o=o.next}while(o!==n);is(i,t.memoizedState)||(yo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function _i(){}function ji(e,t){var r=ii,s=xi(),n=t(),i=!is(s.memoizedState,n);if(i&&(s.memoizedState=n,yo=!0),s=s.queue,$i(Si.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(r.flags|=2048,Ti(9,ki.bind(null,r,s,n,t),void 0,null),null===Pl)throw Error(a(349));0!==(30&ai)||Ni(r,t,n)}return n}function Ni(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function ki(e,t,r,s){t.value=r,t.getSnapshot=s,Ci(t)&&Ei(e)}function Si(e,t,r){return r(function(){Ci(t)&&Ei(e)})}function Ci(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!is(e,r)}catch(s){return!0}}function Ei(e){var t=Ra(e,1);null!==t&&rc(t,e,1,-1)}function Pi(e){var t=vi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[t.memoizedState,e]}function Ti(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e),e}function Ii(){return xi().memoizedState}function Oi(e,t,r,s){var n=vi();ii.flags|=e,n.memoizedState=Ti(1|t,r,void 0,void 0===s?null:s)}function Ai(e,t,r,s){var n=xi();s=void 0===s?null:s;var a=void 0;if(null!==oi){var i=oi.memoizedState;if(a=i.destroy,null!==s&&fi(s,i.deps))return void(n.memoizedState=Ti(t,r,a,s))}ii.flags|=e,n.memoizedState=Ti(1|t,r,a,s)}function Ri(e,t){return Oi(8390656,8,e,t)}function $i(e,t){return Ai(2048,8,e,t)}function Di(e,t){return Ai(4,2,e,t)}function Li(e,t){return Ai(4,4,e,t)}function Ui(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Mi(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ai(4,4,Ui.bind(null,t,e),r)}function zi(){}function Fi(e,t){var r=xi();t=void 0===t?null:t;var s=r.memoizedState;return null!==s&&null!==t&&fi(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Bi(e,t){var r=xi();t=void 0===t?null:t;var s=r.memoizedState;return null!==s&&null!==t&&fi(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function qi(e,t,r){return 0===(21&ai)?(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=r):(is(r,t)||(r=mt(),ii.lanes|=r,Dl|=r,e.baseState=!0),t)}function Vi(e,t){var r=yt;yt=0!==r&&4>r?r:4,e(!0);var s=ni.transition;ni.transition={};try{e(!1),t()}finally{yt=r,ni.transition=s}}function Wi(){return xi().memoizedState}function Hi(e,t,r){var s=tc(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Yi(e))Ki(t,r);else if(null!==(r=Aa(e,t,r,s))){rc(r,e,s,ec()),Ji(r,t,s)}}function Gi(e,t,r){var s=tc(e),n={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Yi(e))Ki(t,n);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,r);if(n.hasEagerState=!0,n.eagerState=o,is(o,i)){var l=t.interleaved;return null===l?(n.next=n,Oa(t)):(n.next=l.next,l.next=n),void(t.interleaved=n)}}catch(c){}null!==(r=Aa(e,t,n,s))&&(rc(r,e,s,n=ec()),Ji(r,t,s))}}function Yi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Ki(e,t){di=ci=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ji(e,t,r){if(0!==(4194240&r)){var s=t.lanes;r|=s&=e.pendingLanes,t.lanes=r,xt(e,r)}}var Qi={readContext:Ta,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Xi={readContext:Ta,useCallback:function(e,t){return vi().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:Ri,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Oi(4194308,4,Ui.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Oi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oi(4,2,e,t)},useMemo:function(e,t){var r=vi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=vi();return t=void 0!==r?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Hi.bind(null,ii,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},vi().memoizedState=e},useState:Pi,useDebugValue:zi,useDeferredValue:function(e){return vi().memoizedState=e},useTransition:function(){var e=Pi(!1),t=e[0];return e=Vi.bind(null,e[1]),vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=ii,n=vi();if(na){if(void 0===r)throw Error(a(407));r=r()}else{if(r=t(),null===Pl)throw Error(a(349));0!==(30&ai)||Ni(s,t,r)}n.memoizedState=r;var i={value:r,getSnapshot:t};return n.queue=i,Ri(Si.bind(null,s,i,e),[e]),s.flags|=2048,Ti(9,ki.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=vi(),t=Pl.identifierPrefix;if(na){var r=Qn;t=":"+t+"R"+(r=(Jn&~(1<<32-it(Jn)-1)).toString(32)+r),0<(r=ui++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Ta,useCallback:Fi,useContext:Ta,useEffect:$i,useImperativeHandle:Mi,useInsertionEffect:Di,useLayoutEffect:Li,useMemo:Bi,useReducer:bi,useRef:Ii,useState:function(){return bi(yi)},useDebugValue:zi,useDeferredValue:function(e){return qi(xi(),oi.memoizedState,e)},useTransition:function(){return[bi(yi)[0],xi().memoizedState]},useMutableSource:_i,useSyncExternalStore:ji,useId:Wi,unstable_isNewReconciler:!1},eo={readContext:Ta,useCallback:Fi,useContext:Ta,useEffect:$i,useImperativeHandle:Mi,useInsertionEffect:Di,useLayoutEffect:Li,useMemo:Bi,useReducer:wi,useRef:Ii,useState:function(){return wi(yi)},useDebugValue:zi,useDeferredValue:function(e){var t=xi();return null===oi?t.memoizedState=e:qi(t,oi.memoizedState,e)},useTransition:function(){return[wi(yi)[0],xi().memoizedState]},useMutableSource:_i,useSyncExternalStore:ji,useId:Wi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var r in t=L({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ro(e,t,r,s){r=null===(r=r(s,t=e.memoizedState))||void 0===r?t:L({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=ec(),n=tc(e),a=Ua(s,n);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Ma(e,a,n))&&(rc(t,e,n,s),za(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=ec(),n=tc(e),a=Ua(s,n);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Ma(e,a,n))&&(rc(t,e,n,s),za(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),s=tc(e),n=Ua(r,s);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=Ma(e,n,s))&&(rc(t,e,s,r),za(t,e,s))}};function no(e,t,r,s,n,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!os(r,s)||!os(n,a))}function ao(e,t,r){var s=!1,n=Cn,a=t.contextType;return"object"===typeof a&&null!==a?a=Ta(a):(n=On(t)?Tn:En.current,a=(s=null!==(s=t.contextTypes)&&void 0!==s)?In(e,n):Cn),t=new t(r,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),t}function io(e,t,r,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function oo(e,t,r,s){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},Da(e);var a=t.contextType;"object"===typeof a&&null!==a?n.context=Ta(a):(a=On(t)?Tn:En.current,n.context=In(e,a)),n.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ro(e,t,a,r),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&so.enqueueReplaceState(n,n.state,null),Ba(e,r,n,s),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var r="",s=t;do{r+=F(s),s=s.return}while(s);var n=r}catch(a){n="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:n,digest:null}}function co(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,r){(r=Ua(-1,r)).tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Vl||(Vl=!0,Wl=s),uo(0,t)},r}function fo(e,t,r){(r=Ua(-1,r)).tag=3;var s=e.type.getDerivedStateFromError;if("function"===typeof s){var n=t.value;r.payload=function(){return s(n)},r.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(r.callback=function(){uo(0,t),"function"!==typeof s&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function mo(e,t,r){var s=e.pingCache;if(null===s){s=e.pingCache=new ho;var n=new Set;s.set(t,n)}else void 0===(n=s.get(t))&&(n=new Set,s.set(t,n));n.has(r)||(n.add(r),e=kc.bind(null,e,t,r),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,r,s,n){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ua(-1,1)).tag=2,Ma(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var xo=b.ReactCurrentOwner,yo=!1;function bo(e,t,r,s){t.child=null===e?wa(t,null,r,s):ba(t,e.child,r,s)}function wo(e,t,r,s,n){r=r.render;var a=t.ref;return Pa(t,n),s=mi(e,t,r,s,a,n),r=gi(),null===e||yo?(na&&r&&ea(t),t.flags|=1,bo(e,t,s,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Vo(e,t,n))}function _o(e,t,r,s,n){if(null===e){var a=r.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Rc(r.type,null,s,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,jo(e,t,a,s,n))}if(a=e.child,0===(e.lanes&n)){var i=a.memoizedProps;if((r=null!==(r=r.compare)?r:os)(i,s)&&e.ref===t.ref)return Vo(e,t,n)}return t.flags|=1,(e=Ac(a,s)).ref=t.ref,e.return=t,t.child=e}function jo(e,t,r,s,n){if(null!==e){var a=e.memoizedProps;if(os(a,s)&&e.ref===t.ref){if(yo=!1,t.pendingProps=s=a,0===(e.lanes&n))return t.lanes=e.lanes,Vo(e,t,n);0!==(131072&e.flags)&&(yo=!0)}}return So(e,t,r,s,n)}function No(e,t,r){var s=t.pendingProps,n=s.children,a=null!==e?e.memoizedState:null;if("hidden"===s.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sn(Al,Ol),Ol|=r;else{if(0===(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sn(Al,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==a?a.baseLanes:r,Sn(Al,Ol),Ol|=s}else null!==a?(s=a.baseLanes|r,t.memoizedState=null):s=r,Sn(Al,Ol),Ol|=s;return bo(e,t,n,r),t.child}function ko(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,r,s,n){var a=On(r)?Tn:En.current;return a=In(t,a),Pa(t,n),r=mi(e,t,r,s,a,n),s=gi(),null===e||yo?(na&&s&&ea(t),t.flags|=1,bo(e,t,r,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Vo(e,t,n))}function Co(e,t,r,s,n){if(On(r)){var a=!0;Dn(t)}else a=!1;if(Pa(t,n),null===t.stateNode)qo(e,t),ao(t,r,s),oo(t,r,s,n),s=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=r.contextType;"object"===typeof c&&null!==c?c=Ta(c):c=In(t,c=On(r)?Tn:En.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==s||l!==c)&&io(t,i,s,c),$a=!1;var h=t.memoizedState;i.state=h,Ba(t,s,i,n),l=t.memoizedState,o!==s||h!==l||Pn.current||$a?("function"===typeof d&&(ro(t,r,d,s),l=t.memoizedState),(o=$a||no(t,r,o,s,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),i.props=s,i.state=l,i.context=c,s=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,La(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=r.contextType)&&null!==l?l=Ta(l):l=In(t,l=On(r)?Tn:En.current);var p=r.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&io(t,i,s,l),$a=!1,h=t.memoizedState,i.state=h,Ba(t,s,i,n);var f=t.memoizedState;o!==u||h!==f||Pn.current||$a?("function"===typeof p&&(ro(t,r,p,s),f=t.memoizedState),(c=$a||no(t,r,c,s,h,f,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(s,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(s,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=f),i.props=s,i.state=f,i.context=l,s=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return Eo(e,t,r,s,a,n)}function Eo(e,t,r,s,n,a){ko(e,t);var i=0!==(128&t.flags);if(!s&&!i)return n&&Ln(t,r,!1),Vo(e,t,a);s=t.stateNode,xo.current=t;var o=i&&"function"!==typeof r.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&i?(t.child=ba(t,e.child,null,a),t.child=ba(t,null,o,a)):bo(e,t,o,a),t.memoizedState=s.state,n&&Ln(t,r,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Rn(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rn(0,t.context,!1),Ka(e,t.containerInfo)}function To(e,t,r,s,n){return pa(),fa(n),t.flags|=256,bo(e,t,r,s),t.child}var Io,Oo,Ao,Ro,$o={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,r){var s,n=t.pendingProps,i=Za.current,o=!1,l=0!==(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&0!==(2&i)),s?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Sn(Za,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=n.children,e=n.fallback,o?(n=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&n)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Dc(l,n,0,null),e=$c(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Do(r),t.memoizedState=$o,e):Uo(t,l));if(null!==(i=e.memoizedState)&&null!==(s=i.dehydrated))return function(e,t,r,s,n,i,o){if(r)return 256&t.flags?(t.flags&=-257,Mo(e,t,o,s=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=s.fallback,n=t.mode,s=Dc({mode:"visible",children:s.children},n,0,null),(i=$c(i,n,o,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,0!==(1&t.mode)&&ba(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=$o,i);if(0===(1&t.mode))return Mo(e,t,o,null);if("$!"===n.data){if(s=n.nextSibling&&n.nextSibling.dataset)var l=s.dgst;return s=l,Mo(e,t,o,s=co(i=Error(a(419)),s,void 0))}if(l=0!==(o&e.childLanes),yo||l){if(null!==(s=Pl)){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(s.suspendedLanes|o))?0:n)&&n!==i.retryLane&&(i.retryLane=n,Ra(e,n),rc(s,e,n,-1))}return mc(),Mo(e,t,o,s=co(Error(a(421))))}return"$?"===n.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,sa=cn(n.nextSibling),ra=t,na=!0,aa=null,null!==e&&(Gn[Yn++]=Jn,Gn[Yn++]=Qn,Gn[Yn++]=Kn,Jn=e.id,Qn=e.overflow,Kn=t),t=Uo(t,s.children),t.flags|=4096,t)}(e,t,l,n,s,i,r);if(o){o=n.fallback,l=t.mode,s=(i=e.child).sibling;var c={mode:"hidden",children:n.children};return 0===(1&l)&&t.child!==i?((n=t.child).childLanes=0,n.pendingProps=c,t.deletions=null):(n=Ac(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==s?o=Ac(s,o):(o=$c(o,l,r,null)).flags|=2,o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,l=null===(l=e.child.memoizedState)?Do(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=$o,n}return e=(o=e.child).sibling,n=Ac(o,{mode:"visible",children:n.children}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Uo(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Mo(e,t,r,s){return null!==s&&fa(s),ba(t,e.child,null,r),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,r){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Ea(e.return,t,r)}function Fo(e,t,r,s,n){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=n)}function Bo(e,t,r){var s=t.pendingProps,n=s.revealOrder,a=s.tail;if(bo(e,t,s.children,r),0!==(2&(s=Za.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,r,t);else if(19===e.tag)zo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Sn(Za,s),0===(1&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;null!==r;)null!==(e=r.alternate)&&null===ei(e)&&(n=r),r=r.sibling;null===(r=n)?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Fo(t,!1,n,r,a);break;case"backwards":for(r=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===ei(e)){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Fo(t,!0,r,null,a);break;case"together":Fo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vo(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(r=Ac(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Ac(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Wo(e,t){if(!na)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;null!==r;)null!==r.alternate&&(s=r),r=r.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ho(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,s=0;if(t)for(var n=e.child;null!==n;)r|=n.lanes|n.childLanes,s|=14680064&n.subtreeFlags,s|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Go(e,t,r){var s=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(t),null;case 1:case 17:return On(t.type)&&An(),Ho(t),null;case 3:return s=t.stateNode,Ja(),kn(Pn),kn(En),ri(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ic(aa),aa=null))),Oo(e,t),Ho(t),null;case 5:Xa(t);var n=Ya(Ga.current);if(r=t.type,null!==e&&null!=t.stateNode)Ao(e,t,r,s,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(a(166));return Ho(t),null}if(e=Ya(Wa.current),ua(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[hn]=t,s[pn]=i,e=0!==(1&t.mode),r){case"dialog":Us("cancel",s),Us("close",s);break;case"iframe":case"object":case"embed":Us("load",s);break;case"video":case"audio":for(n=0;n<Rs.length;n++)Us(Rs[n],s);break;case"source":Us("error",s);break;case"img":case"image":case"link":Us("error",s),Us("load",s);break;case"details":Us("toggle",s);break;case"input":J(s,i),Us("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Us("invalid",s);break;case"textarea":ne(s,i),Us("invalid",s)}for(var l in xe(r,i),n=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?s.textContent!==c&&(!0!==i.suppressHydrationWarning&&Qs(s.textContent,c,e),n=["children",c]):"number"===typeof c&&s.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Qs(s.textContent,c,e),n=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Us("scroll",s)}switch(r){case"input":H(s),Z(s,i,!0);break;case"textarea":H(s),ie(s);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(s.onclick=Xs)}s=n,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof s.is?e=l.createElement(r,{is:s.is}):(e=l.createElement(r),"select"===r&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,r),e[hn]=t,e[pn]=s,Io(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(r,s),r){case"dialog":Us("cancel",e),Us("close",e),n=s;break;case"iframe":case"object":case"embed":Us("load",e),n=s;break;case"video":case"audio":for(n=0;n<Rs.length;n++)Us(Rs[n],e);n=s;break;case"source":Us("error",e),n=s;break;case"img":case"image":case"link":Us("error",e),Us("load",e),n=s;break;case"details":Us("toggle",e),n=s;break;case"input":J(e,s),n=K(e,s),Us("invalid",e);break;case"option":default:n=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},n=L({},s,{value:void 0}),Us("invalid",e);break;case"textarea":ne(e,s),n=se(e,s),Us("invalid",e)}for(i in xe(r,n),c=n)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ge(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==r||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Us("scroll",e):null!=d&&y(e,i,d,l))}switch(r){case"input":H(e),Z(e,s,!1);break;case"textarea":H(e),ie(e);break;case"option":null!=s.value&&e.setAttribute("value",""+V(s.value));break;case"select":e.multiple=!!s.multiple,null!=(i=s.value)?re(e,!!s.multiple,i,!1):null!=s.defaultValue&&re(e,!!s.multiple,s.defaultValue,!0);break;default:"function"===typeof n.onClick&&(e.onclick=Xs)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ho(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,s);else{if("string"!==typeof s&&null===t.stateNode)throw Error(a(166));if(r=Ya(Ga.current),Ya(Wa.current),ua(t)){if(s=t.stateNode,r=t.memoizedProps,s[hn]=t,(i=s.nodeValue!==r)&&null!==(e=ra))switch(e.tag){case 3:Qs(s.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qs(s.nodeValue,r,0!==(1&e.mode))}i&&(t.flags|=4)}else(s=(9===r.nodeType?r:r.ownerDocument).createTextNode(s))[hn]=t,t.stateNode=s}return Ho(t),null;case 13:if(kn(Za),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(na&&null!==sa&&0!==(1&t.mode)&&0===(128&t.flags))ha(),pa(),t.flags|=98560,i=!1;else if(i=ua(t),null!==s&&null!==s.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[hn]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ho(t),i=!1}else null!==aa&&(ic(aa),aa=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Za.current)?0===Rl&&(Rl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ho(t),null);case 4:return Ja(),Oo(e,t),null===e&&Fs(t.stateNode.containerInfo),Ho(t),null;case 10:return Ca(t.type._context),Ho(t),null;case 19:if(kn(Za),null===(i=t.memoizedState))return Ho(t),null;if(s=0!==(128&t.flags),null===(l=i.rendering))if(s)Wo(i,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Wo(i,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;null!==r;)e=s,(i=r).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Sn(Za,1&Za.current|2),t.child}e=e.sibling}null!==i.tail&&Qe()>Bl&&(t.flags|=128,s=!0,Wo(i,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=ei(l))){if(t.flags|=128,s=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Wo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!na)return Ho(t),null}else 2*Qe()-i.renderingStartTime>Bl&&1073741824!==r&&(t.flags|=128,s=!0,Wo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=i.last)?r.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qe(),t.sibling=null,r=Za.current,Sn(Za,s?1&r|2:1&r),t):(Ho(t),null);case 22:case 23:return uc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Ho(t),6&t.subtreeFlags&&(t.flags|=8192)):Ho(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yo(e,t){switch(ta(t),t.tag){case 1:return On(t.type)&&An(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ja(),kn(Pn),kn(En),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xa(t),null;case 13:if(kn(Za),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return kn(Za),null;case 4:return Ja(),null;case 10:return Ca(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Io=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Oo=function(){},Ao=function(e,t,r,s){var n=e.memoizedProps;if(n!==s){e=t.stateNode,Ya(Wa.current);var a,i=null;switch(r){case"input":n=K(e,n),s=K(e,s),i=[];break;case"select":n=L({},n,{value:void 0}),s=L({},s,{value:void 0}),i=[];break;case"textarea":n=se(e,n),s=se(e,s),i=[];break;default:"function"!==typeof n.onClick&&"function"===typeof s.onClick&&(e.onclick=Xs)}for(d in xe(r,s),r=null,n)if(!s.hasOwnProperty(d)&&n.hasOwnProperty(d)&&null!=n[d])if("style"===d){var l=n[d];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=null!=n?n[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Us("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Ro=function(e,t,r,s){r!==s&&(t.flags|=4)};var Ko=!1,Jo=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(s){Nc(e,t,s)}else r.current=null}function el(e,t,r){try{r()}catch(s){Nc(e,t,s)}}var tl=!1;function rl(e,t,r){var s=t.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var n=s=s.next;do{if((n.tag&e)===e){var a=n.destroy;n.destroy=void 0,void 0!==a&&el(t,r,a)}n=n.next}while(n!==s)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function nl(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hn],delete t[pn],delete t[mn],delete t[gn],delete t[vn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Xs));else if(4!==s&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==s&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var dl=null,ul=!1;function hl(e,t,r){for(r=r.child;null!==r;)pl(e,t,r),r=r.sibling}function pl(e,t,r){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(nt,r)}catch(o){}switch(r.tag){case 5:Jo||Zo(r,t);case 6:var s=dl,n=ul;dl=null,hl(e,t,r),ul=n,null!==(dl=s)&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?ln(e.parentNode,r):1===e.nodeType&&ln(e,r),Bt(e)):ln(dl,r.stateNode));break;case 4:s=dl,n=ul,dl=r.stateNode.containerInfo,ul=!0,hl(e,t,r),dl=s,ul=n;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(s=r.updateQueue)&&null!==(s=s.lastEffect))){n=s=s.next;do{var a=n,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&el(r,t,i),n=n.next}while(n!==s)}hl(e,t,r);break;case 1:if(!Jo&&(Zo(r,t),"function"===typeof(s=r.stateNode).componentWillUnmount))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){Nc(r,t,o)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Jo=(s=Jo)||null!==r.memoizedState,hl(e,t,r),Jo=s):hl(e,t,r);break;default:hl(e,t,r)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Qo),t.forEach(function(t){var s=Ec.bind(null,e,t);r.has(t)||(r.add(t),t.then(s,s))})}}function ml(e,t){var r=t.deletions;if(null!==r)for(var s=0;s<r.length;s++){var n=r[s];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(a(160));pl(i,o,n),dl=null,ul=!1;var c=n.alternate;null!==c&&(c.return=null),n.return=null}catch(d){Nc(n,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&s){try{rl(3,e,e.return),sl(3,e)}catch(g){Nc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Nc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&s&&null!==r&&Zo(r,r.return);break;case 5:if(ml(t,e),vl(e),512&s&&null!==r&&Zo(r,r.return),32&e.flags){var n=e.stateNode;try{he(n,"")}catch(g){Nc(e,e.return,g)}}if(4&s&&null!=(n=e.stateNode)){var i=e.memoizedProps,o=null!==r?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Q(n,i),ye(l,o);var d=ye(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(n,h):"dangerouslySetInnerHTML"===u?ue(n,h):"children"===u?he(n,h):y(n,u,h,d)}switch(l){case"input":X(n,i);break;case"textarea":ae(n,i);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var f=i.value;null!=f?re(n,!!i.multiple,f,!1):p!==!!i.multiple&&(null!=i.defaultValue?re(n,!!i.multiple,i.defaultValue,!0):re(n,!!i.multiple,i.multiple?[]:"",!1))}n[pn]=i}catch(g){Nc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&s){if(null===e.stateNode)throw Error(a(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(g){Nc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&s&&null!==r&&r.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Nc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(n=e.child).flags&&(i=null!==n.memoizedState,n.stateNode.isHidden=i,!i||null!==n.alternate&&null!==n.alternate.memoizedState||(Fl=Qe())),4&s&&fl(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Jo=(d=Jo)||u,ml(t,e),Jo=d):ml(t,e),vl(e),8192&s){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Xo=e,u=e.child;null!==u;){for(h=Xo=u;null!==Xo;){switch(f=(p=Xo).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:Zo(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){s=p,r=p.return;try{t=s,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Nc(s,r,g)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==f?(f.return=p,Xo=f):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{n=h.stateNode,d?"function"===typeof(i=n.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Nc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Nc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&s&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(il(r)){var s=r;break e}r=r.return}throw Error(a(160))}switch(s.tag){case 5:var n=s.stateNode;32&s.flags&&(he(n,""),s.flags&=-33),cl(e,ol(e),n);break;case 3:case 4:var i=s.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(a(161))}}catch(o){Nc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,r){Xo=e,yl(e,t,r)}function yl(e,t,r){for(var s=0!==(1&e.mode);null!==Xo;){var n=Xo,a=n.child;if(22===n.tag&&s){var i=null!==n.memoizedState||Ko;if(!i){var o=n.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Ko;var c=Jo;if(Ko=i,(Jo=l)&&!c)for(Xo=n;null!==Xo;)l=(i=Xo).child,22===i.tag&&null!==i.memoizedState?_l(n):null!==l?(l.return=i,Xo=l):_l(n);for(;null!==a;)Xo=a,yl(a,t,r),a=a.sibling;Xo=n,Ko=o,Jo=c}bl(e)}else 0!==(8772&n.subtreeFlags)&&null!==a?(a.return=n,Xo=a):bl(e)}}function bl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||sl(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!Jo)if(null===r)s.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:to(t.type,r.memoizedProps);s.componentDidUpdate(n,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&qa(t,i,s);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}qa(t,o,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Jo||512&t.flags&&nl(t)}catch(p){Nc(t,t.return,p)}}if(t===e){Xo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Xo=r;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Xo=r;break}Xo=t.return}}function _l(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{sl(4,t)}catch(l){Nc(t,r,l)}break;case 1:var s=t.stateNode;if("function"===typeof s.componentDidMount){var n=t.return;try{s.componentDidMount()}catch(l){Nc(t,n,l)}}var a=t.return;try{nl(t)}catch(l){Nc(t,a,l)}break;case 5:var i=t.return;try{nl(t)}catch(l){Nc(t,i,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var jl,Nl=Math.ceil,kl=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,El=0,Pl=null,Tl=null,Il=0,Ol=0,Al=Nn(0),Rl=0,$l=null,Dl=0,Ll=0,Ul=0,Ml=null,zl=null,Fl=0,Bl=1/0,ql=null,Vl=!1,Wl=null,Hl=null,Gl=!1,Yl=null,Kl=0,Jl=0,Ql=null,Xl=-1,Zl=0;function ec(){return 0!==(6&El)?Qe():-1!==Xl?Xl:Xl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Il?Il&-Il:null!==ma.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function rc(e,t,r,s){if(50<Jl)throw Jl=0,Ql=null,Error(a(185));vt(e,r,s),0!==(2&El)&&e===Pl||(e===Pl&&(0===(2&El)&&(Ll|=r),4===Rl&&oc(e,Il)),sc(e,s),1===r&&0===El&&0===(1&t.mode)&&(Bl=Qe()+500,Mn&&Bn()))}function sc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),o=1<<i,l=n[i];-1===l?0!==(o&r)&&0===(o&s)||(n[i]=pt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var s=ht(e,e===Pl?Il:0);if(0===s)null!==r&&Ye(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=r&&Ye(r),1===t)0===e.tag?function(e){Mn=!0,Fn(e)}(lc.bind(null,e)):Fn(lc.bind(null,e)),an(function(){0===(6&El)&&Bn()}),r=null;else{switch(bt(s)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=st}r=Pc(r,nc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function nc(e,t){if(Xl=-1,Zl=0,0!==(6&El))throw Error(a(327));var r=e.callbackNode;if(_c()&&e.callbackNode!==r)return null;var s=ht(e,e===Pl?Il:0);if(0===s)return null;if(0!==(30&s)||0!==(s&e.expiredLanes)||t)t=gc(e,s);else{t=s;var n=El;El|=2;var i=fc();for(Pl===e&&Il===t||(ql=null,Bl=Qe()+500,hc(e,t));;)try{xc();break}catch(l){pc(e,l)}Sa(),kl.current=i,El=n,null!==Tl?t=0:(Pl=null,Il=0,t=Rl)}if(0!==t){if(2===t&&(0!==(n=ft(e))&&(s=n,t=ac(e,n))),1===t)throw r=$l,hc(e,0),oc(e,s),sc(e,Qe()),r;if(6===t)oc(e,s);else{if(n=e.current.alternate,0===(30&s)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var s=0;s<r.length;s++){var n=r[s],a=n.getSnapshot;n=n.value;try{if(!is(a(),n))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)&&(2===(t=gc(e,s))&&(0!==(i=ft(e))&&(s=i,t=ac(e,i))),1===t))throw r=$l,hc(e,0),oc(e,s),sc(e,Qe()),r;switch(e.finishedWork=n,e.finishedLanes=s,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,zl,ql);break;case 3:if(oc(e,s),(130023424&s)===s&&10<(t=Fl+500-Qe())){if(0!==ht(e,0))break;if(((n=e.suspendedLanes)&s)!==s){ec(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=rn(wc.bind(null,e,zl,ql),t);break}wc(e,zl,ql);break;case 4:if(oc(e,s),(4194240&s)===s)break;for(t=e.eventTimes,n=-1;0<s;){var o=31-it(s);i=1<<o,(o=t[o])>n&&(n=o),s&=~i}if(s=n,10<(s=(120>(s=Qe()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Nl(s/1960))-s)){e.timeoutHandle=rn(wc.bind(null,e,zl,ql),s);break}wc(e,zl,ql);break;default:throw Error(a(329))}}}return sc(e,Qe()),e.callbackNode===r?nc.bind(null,e):null}function ac(e,t){var r=Ml;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zl,zl=r,null!==t&&ic(t)),e}function ic(e){null===zl?zl=e:zl.push.apply(zl,e)}function oc(e,t){for(t&=~Ul,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-it(t),s=1<<r;e[r]=-1,t&=~s}}function lc(e){if(0!==(6&El))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return sc(e,Qe()),null;var r=gc(e,t);if(0!==e.tag&&2===r){var s=ft(e);0!==s&&(t=s,r=ac(e,s))}if(1===r)throw r=$l,hc(e,0),oc(e,t),sc(e,Qe()),r;if(6===r)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,zl,ql),sc(e,Qe()),null}function cc(e,t){var r=El;El|=1;try{return e(t)}finally{0===(El=r)&&(Bl=Qe()+500,Mn&&Bn())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&El)&&_c();var t=El;El|=1;var r=Cl.transition,s=yt;try{if(Cl.transition=null,yt=1,e)return e()}finally{yt=s,Cl.transition=r,0===(6&(El=t))&&Bn()}}function uc(){Ol=Al.current,kn(Al)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,sn(r)),null!==Tl)for(r=Tl.return;null!==r;){var s=r;switch(ta(s),s.tag){case 1:null!==(s=s.type.childContextTypes)&&void 0!==s&&An();break;case 3:Ja(),kn(Pn),kn(En),ri();break;case 5:Xa(s);break;case 4:Ja();break;case 13:case 19:kn(Za);break;case 10:Ca(s.type._context);break;case 22:case 23:uc()}r=r.return}if(Pl=e,Tl=e=Ac(e.current,null),Il=Ol=t,Rl=0,$l=null,Ul=Ll=Dl=0,zl=Ml=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(s=(r=Ia[t]).interleaved)){r.interleaved=null;var n=s.next,a=r.pending;if(null!==a){var i=a.next;a.next=n,s.next=i}r.pending=s}Ia=null}return e}function pc(e,t){for(;;){var r=Tl;try{if(Sa(),si.current=Qi,ci){for(var s=ii.memoizedState;null!==s;){var n=s.queue;null!==n&&(n.pending=null),s=s.next}ci=!1}if(ai=0,li=oi=ii=null,di=!1,ui=0,Sl.current=null,null===r||null===r.return){Rl=1,$l=t,Tl=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Il,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=go(o);if(null!==f){f.flags&=-257,vo(f,o,l,0,t),1&f.mode&&mo(i,d,t),c=d;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(i,d,t),mc();break e}c=Error(a(426))}else if(na&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),fa(lo(c,l));break e}}i=c=lo(c,l),4!==Rl&&(Rl=2),null===Ml?Ml=[i]:Ml.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Fa(i,po(0,c,t));break e;case 1:l=c;var x=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof x.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Hl||!Hl.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,Fa(i,fo(i,l,t));break e}}i=i.return}while(null!==i)}bc(r)}catch(b){t=b,Tl===r&&null!==r&&(Tl=r=r.return);continue}break}}function fc(){var e=kl.current;return kl.current=Qi,null===e?Qi:e}function mc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Pl||0===(268435455&Dl)&&0===(268435455&Ll)||oc(Pl,Il)}function gc(e,t){var r=El;El|=2;var s=fc();for(Pl===e&&Il===t||(ql=null,hc(e,t));;)try{vc();break}catch(n){pc(e,n)}if(Sa(),El=r,kl.current=s,null!==Tl)throw Error(a(261));return Pl=null,Il=0,Rl}function vc(){for(;null!==Tl;)yc(Tl)}function xc(){for(;null!==Tl&&!Ke();)yc(Tl)}function yc(e){var t=jl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?bc(e):Tl=t,Sl.current=null}function bc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Go(r,t,Ol)))return void(Tl=r)}else{if(null!==(r=Yo(r,t)))return r.flags&=32767,void(Tl=r);if(null===e)return Rl=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Rl&&(Rl=5)}function wc(e,t,r){var s=yt,n=Cl.transition;try{Cl.transition=null,yt=1,function(e,t,r,s){do{_c()}while(null!==Yl);if(0!==(6&El))throw Error(a(327));r=e.finishedWork;var n=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-it(r),a=1<<n;t[n]=0,s[n]=-1,e[n]=-1,r&=~a}}(e,i),e===Pl&&(Tl=Pl=null,Il=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Gl||(Gl=!0,Pc(tt,function(){return _c(),null})),i=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||i){i=Cl.transition,Cl.transition=null;var o=yt;yt=1;var l=El;El|=4,Sl.current=null,function(e,t){if(Zs=Vt,hs(e=us())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(s&&0!==s.rangeCount){r=s.anchorNode;var n=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch(w){r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==r||0!==n&&3!==h.nodeType||(l=o+n),h!==i||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===r&&++d===n&&(l=o),p===i&&++u===s&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(en={focusedElem:e,selectionRange:r},Vt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Nc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}m=tl,tl=!1}(e,r),gl(r,e),ps(en),Vt=!!Zs,en=Zs=null,e.current=r,xl(r,e,n),Je(),El=l,yt=o,Cl.transition=i}else e.current=r;if(Gl&&(Gl=!1,Yl=e,Kl=n),i=e.pendingLanes,0===i&&(Hl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(nt,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),sc(e,Qe()),null!==t)for(s=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],s(n.value,{componentStack:n.stack,digest:n.digest});if(Vl)throw Vl=!1,e=Wl,Wl=null,e;0!==(1&Kl)&&0!==e.tag&&_c(),i=e.pendingLanes,0!==(1&i)?e===Ql?Jl++:(Jl=0,Ql=e):Jl=0,Bn()}(e,t,r,s)}finally{Cl.transition=n,yt=s}return null}function _c(){if(null!==Yl){var e=bt(Kl),t=Cl.transition,r=yt;try{if(Cl.transition=null,yt=16>e?16:e,null===Yl)var s=!1;else{if(e=Yl,Yl=null,Kl=0,0!==(6&El))throw Error(a(331));var n=El;for(El|=4,Xo=e.current;null!==Xo;){var i=Xo,o=i.child;if(0!==(16&Xo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Xo=d;null!==Xo;){var u=Xo;switch(u.tag){case 0:case 11:case 15:rl(8,u,i)}var h=u.child;if(null!==h)h.return=u,Xo=h;else for(;null!==Xo;){var p=(u=Xo).sibling,f=u.return;if(al(u),u===d){Xo=null;break}if(null!==p){p.return=f,Xo=p;break}Xo=f}}}var m=i.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(i=Xo).flags))switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var x=i.sibling;if(null!==x){x.return=i.return,Xo=x;break e}Xo=i.return}}var y=e.current;for(Xo=y;null!==Xo;){var b=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Xo=b;else e:for(o=y;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(_){Nc(l,l.return,_)}if(l===o){Xo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xo=w;break e}Xo=l.return}}if(El=n,Bn(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(nt,e)}catch(_){}s=!0}return s}finally{yt=r,Cl.transition=t}}return!1}function jc(e,t,r){e=Ma(e,t=po(0,t=lo(r,t),1),1),t=ec(),null!==e&&(vt(e,1,t),sc(e,t))}function Nc(e,t,r){if(3===e.tag)jc(e,e,r);else for(;null!==t;){if(3===t.tag){jc(t,e,r);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Hl||!Hl.has(s))){t=Ma(t,e=fo(t,e=lo(r,e),1),1),e=ec(),null!==t&&(vt(t,1,e),sc(t,e));break}}t=t.return}}function kc(e,t,r){var s=e.pingCache;null!==s&&s.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Pl===e&&(Il&r)===r&&(4===Rl||3===Rl&&(130023424&Il)===Il&&500>Qe()-Fl?hc(e,0):Ul|=r),sc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Ra(e,t))&&(vt(e,t,r),sc(e,r))}function Cc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Sc(e,r)}function Ec(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;null!==n&&(r=n.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(a(314))}null!==s&&s.delete(t),Sc(e,r)}function Pc(e,t){return Ge(e,t)}function Tc(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ic(e,t,r,s){return new Tc(e,t,r,s)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ac(e,t){var r=e.alternate;return null===r?((r=Ic(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Rc(e,t,r,s,n,i){var o=2;if(s=e,"function"===typeof e)Oc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case j:return $c(r.children,n,i,t);case N:o=8,n|=8;break;case k:return(e=Ic(12,r,t,2|n)).elementType=k,e.lanes=i,e;case P:return(e=Ic(13,r,t,n)).elementType=P,e.lanes=i,e;case T:return(e=Ic(19,r,t,n)).elementType=T,e.lanes=i,e;case A:return Dc(r,n,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case C:o=9;break e;case E:o=11;break e;case I:o=14;break e;case O:o=16,s=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ic(o,r,t,n)).elementType=e,t.type=s,t.lanes=i,t}function $c(e,t,r,s){return(e=Ic(7,e,s,t)).lanes=r,e}function Dc(e,t,r,s){return(e=Ic(22,e,s,t)).elementType=A,e.lanes=r,e.stateNode={isHidden:!1},e}function Lc(e,t,r){return(e=Ic(6,e,null,t)).lanes=r,e}function Uc(e,t,r){return(t=Ic(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Mc(e,t,r,s,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function zc(e,t,r,s,n,a,i,o,l){return e=new Mc(e,t,r,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ic(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function Fc(e){if(!e)return Cn;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(On(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var r=e.type;if(On(r))return $n(e,r,t)}return t}function Bc(e,t,r,s,n,a,i,o,l){return(e=zc(r,s,!0,e,0,a,0,o,l)).context=Fc(null),r=e.current,(a=Ua(s=ec(),n=tc(r))).callback=void 0!==t&&null!==t?t:null,Ma(r,a,n),e.current.lanes=n,vt(e,n,s),sc(e,s),e}function qc(e,t,r,s){var n=t.current,a=ec(),i=tc(n);return r=Fc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ua(a,i)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),null!==(e=Ma(n,t,i))&&(rc(e,n,i,a),za(e,n,i)),i}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Hc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}jl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pn.current)yo=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return yo=!1,function(e,t,r){switch(t.tag){case 3:Po(t),pa();break;case 5:Qa(t);break;case 1:On(t.type)&&Dn(t);break;case 4:Ka(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,n=t.memoizedProps.value;Sn(_a,s._currentValue),s._currentValue=n;break;case 13:if(null!==(s=t.memoizedState))return null!==s.dehydrated?(Sn(Za,1&Za.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Lo(e,t,r):(Sn(Za,1&Za.current),null!==(e=Vo(e,t,r))?e.sibling:null);Sn(Za,1&Za.current);break;case 19:if(s=0!==(r&t.childLanes),0!==(128&e.flags)){if(s)return Bo(e,t,r);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),Sn(Za,Za.current),s)break;return null;case 22:case 23:return t.lanes=0,No(e,t,r)}return Vo(e,t,r)}(e,t,r);yo=0!==(131072&e.flags)}else yo=!1,na&&0!==(1048576&t.flags)&&Zn(t,Hn,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;qo(e,t),e=t.pendingProps;var n=In(t,En.current);Pa(t,r),n=mi(null,t,s,e,n,r);var i=gi();return t.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,On(s)?(i=!0,Dn(t)):i=!1,t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,Da(t),n.updater=so,t.stateNode=n,n._reactInternals=t,oo(t,s,e,r),t=Eo(null,t,s,!0,i,r)):(t.tag=0,na&&i&&ea(t),bo(null,t,n,r),t=t.child),t;case 16:s=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,s=(n=s._init)(s._payload),t.type=s,n=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===I)return 14}return 2}(s),e=to(s,e),n){case 0:t=So(null,t,s,e,r);break e;case 1:t=Co(null,t,s,e,r);break e;case 11:t=wo(null,t,s,e,r);break e;case 14:t=_o(null,t,s,to(s.type,e),r);break e}throw Error(a(306,s,""))}return t;case 0:return s=t.type,n=t.pendingProps,So(e,t,s,n=t.elementType===s?n:to(s,n),r);case 1:return s=t.type,n=t.pendingProps,Co(e,t,s,n=t.elementType===s?n:to(s,n),r);case 3:e:{if(Po(t),null===e)throw Error(a(387));s=t.pendingProps,n=(i=t.memoizedState).element,La(e,t),Ba(t,s,null,r);var o=t.memoizedState;if(s=o.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=To(e,t,s,r,n=lo(Error(a(423)),t));break e}if(s!==n){t=To(e,t,s,r,n=lo(Error(a(424)),t));break e}for(sa=cn(t.stateNode.containerInfo.firstChild),ra=t,na=!0,aa=null,r=wa(t,null,s,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(pa(),s===n){t=Vo(e,t,r);break e}bo(e,t,s,r)}t=t.child}return t;case 5:return Qa(t),null===e&&ca(t),s=t.type,n=t.pendingProps,i=null!==e?e.memoizedProps:null,o=n.children,tn(s,n)?o=null:null!==i&&tn(s,i)&&(t.flags|=32),ko(e,t),bo(e,t,o,r),t.child;case 6:return null===e&&ca(t),null;case 13:return Lo(e,t,r);case 4:return Ka(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=ba(t,null,s,r):bo(e,t,s,r),t.child;case 11:return s=t.type,n=t.pendingProps,wo(e,t,s,n=t.elementType===s?n:to(s,n),r);case 7:return bo(e,t,t.pendingProps,r),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,n=t.pendingProps,i=t.memoizedProps,o=n.value,Sn(_a,s._currentValue),s._currentValue=o,null!==i)if(is(i.value,o)){if(i.children===n.children&&!Pn.current){t=Vo(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===s){if(1===i.tag){(c=Ua(-1,r&-r)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,null!==(c=i.alternate)&&(c.lanes|=r),Ea(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),Ea(o,r,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}bo(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,s=t.pendingProps.children,Pa(t,r),s=s(n=Ta(n)),t.flags|=1,bo(e,t,s,r),t.child;case 14:return n=to(s=t.type,t.pendingProps),_o(e,t,s,n=to(s.type,n),r);case 15:return jo(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:to(s,n),qo(e,t),t.tag=1,On(s)?(e=!0,Dn(t)):e=!1,Pa(t,r),ao(t,s,n),oo(t,s,n,r),Eo(null,t,s,!0,e,r);case 19:return Bo(e,t,r);case 22:return No(e,t,r)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,r,s,n){var a=r._reactRootContainer;if(a){var i=a;if("function"===typeof n){var o=n;n=function(){var e=Vc(i);o.call(e)}}qc(t,i,e,n)}else i=function(e,t,r,s,n){if(n){if("function"===typeof s){var a=s;s=function(){var e=Vc(i);a.call(e)}}var i=Bc(t,s,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[fn]=i.current,Fs(8===e.nodeType?e.parentNode:e),dc(),i}for(;n=e.lastChild;)e.removeChild(n);if("function"===typeof s){var o=s;s=function(){var e=Vc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[fn]=l.current,Fs(8===e.nodeType?e.parentNode:e),dc(function(){qc(t,l,r,s)}),l}(r,t,e,n,s);return Vc(i)}Kc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));qc(e,t,null,null)},Kc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){qc(null,e,null,null)}),t[fn]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<At.length&&0!==t&&t<At[r].priority;r++);At.splice(r,0,e),0===r&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(xt(t,1|r),sc(t,Qe()),0===(6&El)&&(Bl=Qe()+500,Bn()))}break;case 13:dc(function(){var t=Ra(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Hc(e,1)}},_t=function(e){if(13===e.tag){var t=Ra(e,134217728);if(null!==t)rc(t,e,134217728,ec());Hc(e,134217728)}},jt=function(e){if(13===e.tag){var t=tc(e),r=Ra(e,t);if(null!==r)rc(r,e,t,ec());Hc(e,t)}},Nt=function(){return yt},kt=function(e,t){var r=yt;try{return yt=e,t()}finally{yt=r}},_e=function(e,t,r){switch(t){case"input":if(X(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var n=wn(s);if(!n)throw Error(a(90));G(s),X(s,n)}}}break;case"textarea":ae(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ee=cc,Pe=dc;var ed={usingClientEntryPoint:!1,Events:[yn,bn,wn,Se,Ce,cc]},td={findFiberByHostInstance:xn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{nt=sd.inject(rd),at=sd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,r){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==s?null:""+s,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var r=!1,s="",n=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(n=t.onRecoverableError)),t=zc(e,1,!1,null,0,r,0,s,n),e[fn]=t.current,Fs(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Qc(t))throw Error(a(200));return Zc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Jc(e))throw Error(a(405));var s=null!=r&&r.hydratedSources||null,n=!1,i="",o=Gc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=Bc(t,null,e,1,null!=r?r:null,n,0,i,o),e[fn]=t.current,Fs(e),s)for(e=0;e<s.length;e++)n=(n=(r=s[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new Kc(t)},t.render=function(e,t,r){if(!Qc(t))throw Error(a(200));return Zc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[fn]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Qc(r))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,r,!1,s)},t.version="18.3.1-next-f1338f8080-20240426"},352:(e,t,r)=>{var s=r(119);t.createRoot=s.createRoot,t.hydrateRoot=s.hydrateRoot},414:(e,t,r)=>{e.exports=r(654)},427:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(569));class a extends n.default{select(e){let t=!1;const r=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:n=s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=n?`${n}.order`:"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s="undefined"===typeof r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t){let{foreignTable:r,referencedTable:s=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n="undefined"===typeof s?"offset":`${s}.offset`,a="undefined"===typeof s?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(a,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:n=!1,format:a="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}t.default=a},569:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(621)),a=s(r(732));t.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,s,n;let i=null,o=null,l=null,c=e.status,d=e.statusText;if(e.ok){if("HEAD"!==this.method){const r=await e.text();""===r||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?r:JSON.parse(r))}const n=null===(r=this.headers.get("Prefer"))||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),a=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");n&&a&&a.length>1&&(l=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,d="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,d="OK")}catch(u){404===e.status&&""===t?(c=204,d="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(n=null===i||void 0===i?void 0:i.details)||void 0===n?void 0:n.includes("0 rows"))&&(i=null,c=200,d="OK"),i&&this.shouldThrowOnError)throw new a.default(i)}return{error:i,data:o,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,s;return{error:{message:`${null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null===e||void 0===e?void 0:e.message}`,details:`${null!==(r=null===e||void 0===e?void 0:e.stack)&&void 0!==r?r:""}`,hint:"",code:`${null!==(s=null===e||void 0===e?void 0:e.code)&&void 0!==s?s:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}}},621:(e,t,r)=>{r.r(t),r.d(t,{Headers:()=>i,Request:()=>o,Response:()=>l,default:()=>a,fetch:()=>n});var s=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("unable to locate global object")}();const n=s.fetch,a=s.fetch.bind(s),i=s.Headers,o=s.Request,l=s.Response},654:(e,t,r)=>{var s=r(950),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var s,a={},c=null,d=null;for(s in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,s)&&!l.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:n,type:e,key:c,ref:d,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},732:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=r},761:(e,t)=>{function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var s=r-1>>>1,n=e[s];if(!(0<a(n,t)))break e;e[s]=t,e[r]=n,r=s}}function s(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var s=0,n=e.length,i=n>>>1;s<i;){var o=2*(s+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,r))c<n&&0>a(d,l)?(e[s]=d,e[c]=r,s=c):(e[s]=l,e[o]=r,s=o);else{if(!(c<n&&0>a(d,r)))break e;e[s]=d,e[c]=r,s=c}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=s(d);null!==t;){if(null===t.callback)n(d);else{if(!(t.startTime<=e))break;n(d),t.sortIndex=t.expirationTime,r(c,t)}t=s(d)}}function w(e){if(g=!1,b(e),!m)if(null!==s(c))m=!0,A(_);else{var t=s(d);null!==t&&R(w,t.startTime-e)}}function _(e,r){m=!1,g&&(g=!1,x(S),S=-1),f=!0;var a=p;try{for(b(r),h=s(c);null!==h&&(!(h.expirationTime>r)||e&&!P());){var i=h.callback;if("function"===typeof i){h.callback=null,p=h.priorityLevel;var o=i(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?h.callback=o:h===s(c)&&n(c),b(r)}else n(c);h=s(c)}if(null!==h)var l=!0;else{var u=s(d);null!==u&&R(w,u.startTime-r),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,N=!1,k=null,S=-1,C=5,E=-1;function P(){return!(t.unstable_now()-E<C)}function T(){if(null!==k){var e=t.unstable_now();E=e;var r=!0;try{r=k(!0,e)}finally{r?j():(N=!1,k=null)}}else N=!1}if("function"===typeof y)j=function(){y(T)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,O=I.port2;I.port1.onmessage=T,j=function(){O.postMessage(null)}}else j=function(){v(T,0)};function A(e){k=e,N||(N=!0,j())}function R(e,r){S=v(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,A(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,n,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:n,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(e.sortIndex=a,r(d,e),null===s(c)&&e===s(d)&&(g?(x(S),S=-1):g=!0,R(w,a-i))):(e.sortIndex=o,r(c,e),m||f||(m=!0,A(_))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},768:(e,t,r)=>{r.d(t,{generateSampleReport:()=>n});var s=r(204);const n=async(e,t)=>{try{console.log("\ud83d\udcca Generating compliance report for:",e.address);let a=null,i=Math.floor(30*Math.random())+70,o=Math.random()>.7?"HIGH":Math.random()>.4?"MEDIUM":"LOW",l={hpd:[],dob:[]},c={summary:`Property at ${e.address} shows moderate compliance with some areas needing attention.`,key_findings:["Heat and hot water systems need maintenance","Recent construction work requires permits","Overall building structure is sound"],recommendations:["Schedule heating system inspection","Obtain proper permits for construction work","Implement regular maintenance schedule"],risk_factors:["Older building systems","Recent construction activity","Seasonal heating requirements"]};if("NYC"===e.city)try{console.log("\ud83d\udd0d Checking for real NYC data...");const{data:t}=await s.ND.from("nyc_properties").select("*").eq("property_id",e.id).single();if(t){console.log("\u2705 Found NYC property record with BIN:",t.bin);const{data:n}=await s.ND.from("nyc_compliance_summary").select("*").eq("nyc_property_id",t.id).single();if(n){console.log("\ud83d\udcca Using real compliance data"),a=n,i=Math.round(n.overall_compliance_score||i),o=n.risk_level||o;try{const{data:r}=await s.ND.from("nyc_hpd_violations").select("*").eq("nyc_property_id",t.id).limit(10),{data:a}=await s.ND.from("nyc_dob_violations").select("*").eq("nyc_property_id",t.id).limit(10),{data:o}=await s.ND.from("nyc_elevator_inspections").select("*").eq("nyc_property_id",t.id).limit(10),{data:d}=await s.ND.from("nyc_boiler_inspections").select("*").eq("nyc_property_id",t.id).limit(10);l={hpd:(r||[]).map(e=>({id:e.violation_id,type:e.violation_class,status:e.violation_status,date:e.inspection_date,description:e.violation_description,apartment:e.apartment,story:e.story})),dob:(a||[]).map(e=>({id:e.violation_id,type:e.violation_type,status:e.violation_status,date:e.issue_date,description:e.violation_description,category:e.violation_category}))};const u={elevators:(o||[]).map(e=>({device_number:e.device_number,device_type:e.device_type,status:e.device_status,last_inspection:e.last_inspection_date,result:e.inspection_result,next_inspection:e.next_inspection_date})),boilers:(d||[]).map(e=>({device_number:e.device_number,boiler_type:e.boiler_type,last_inspection:e.inspection_date,result:e.inspection_result,next_inspection:e.next_inspection_date}))},h=((null===r||void 0===r?void 0:r.length)||0)+((null===a||void 0===a?void 0:a.length)||0),p=((null===r||void 0===r?void 0:r.filter(e=>"OPEN"===e.violation_status).length)||0)+((null===a||void 0===a?void 0:a.filter(e=>"ACTIVE"===e.violation_status).length)||0);c={summary:`Property at ${e.address} has ${h} total violations with ${p} currently active. ${u.elevators.length} elevator(s) and ${u.boilers.length} boiler(s) are registered.`,key_findings:[`HPD violations: ${(null===r||void 0===r?void 0:r.length)||0} total, ${(null===r||void 0===r?void 0:r.filter(e=>"OPEN"===e.violation_status).length)||0} active`,`DOB violations: ${(null===a||void 0===a?void 0:a.length)||0} total, ${(null===a||void 0===a?void 0:a.filter(e=>"ACTIVE"===e.violation_status).length)||0} active`,`Equipment status: ${u.elevators.length} elevators, ${u.boilers.length} boilers`],recommendations:[...(null===r||void 0===r?void 0:r.filter(e=>"OPEN"===e.violation_status).length)>0?[`Address ${r.filter(e=>"OPEN"===e.violation_status).length} open HPD violations`]:[],...(null===a||void 0===a?void 0:a.filter(e=>"ACTIVE"===e.violation_status).length)>0?[`Resolve ${a.filter(e=>"ACTIVE"===e.violation_status).length} active DOB violations`]:[],...u.elevators.length>0?[`Schedule elevator inspections for ${u.elevators.length} device(s)`]:[],...u.boilers.length>0?[`Schedule boiler inspections for ${u.boilers.length} device(s)`]:[],"Monitor compliance status regularly"],risk_factors:[n.open_violations>10?"High number of active violations":null,n.elevator_devices_active<n.elevator_devices_total?"Some elevator equipment inactive":null,i<70?"Below average compliance score":null].filter(Boolean),equipment:u,violations_detail:l}}catch(r){console.warn("\u26a0\ufe0f Error parsing real violations data:",r)}}}}catch(n){console.warn("\u26a0\ufe0f Error fetching real NYC data:",n)}const d={property_id:e.id,user_id:t,report_type:"full_compliance",status:"completed",compliance_score:i,risk_level:o,violations:JSON.stringify(l),ai_analysis:JSON.stringify(c),recommendations:JSON.stringify(c.recommendations||["Schedule heating system inspection within 30 days","Obtain proper permits for any construction work","Implement quarterly maintenance checks","Consider upgrading heating systems for efficiency"]),generated_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},{data:u,error:h}=await s.ND.from("compliance_reports").insert([d]).select();if(h)throw console.error("\u274c Error creating compliance report:",h),h;return console.log("\u2705 Sample compliance report generated:",u[0]),u[0]}catch(n){throw console.error("\u274c Error generating sample report:",n),n}}},950:(e,t,r)=>{e.exports=r(49)}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,r),a.exports}r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s=r(950),n=r(352),a=r(204);const i={signUp:async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{console.log("Attempting to sign up user:",e),console.log("Supabase URL:",a.ND.supabaseUrl);const{data:s,error:n}=await a.ND.auth.signUp({email:e,password:t,options:{data:{full_name:r.fullName||"",company:r.company||"",phone:r.phone||"",subscription_tier:"free",...r}}});if(console.log("Supabase response:",{data:s,error:n}),n)throw n;const i=null!==s.session,o=i?"Account created successfully!":"Account created successfully! Please check your email to verify your account.";return console.log(`Signup complete. Has session: ${i}`),{success:!0,user:s.user,session:s.session,message:o}}catch(s){return console.error("Sign up error:",s),{success:!1,error:s.message||"Failed to create account"}}},signIn:async(e,t)=>{try{console.log("Attempting to sign in user:",e);const{data:r,error:s}=await a.ND.auth.signInWithPassword({email:e,password:t});if(console.log("Sign in response:",{data:r,error:s}),s)throw s;return r.user&&await i.updateLastLogin(r.user.id),{success:!0,user:r.user,session:r.session}}catch(r){return console.error("Sign in error:",r),{success:!1,error:r.message||"Failed to sign in"}}},signInWithGoogle:async()=>{try{console.log("Attempting to sign in with Google");const e=window.location.origin;console.log("Using redirect URL:",e),console.log("Starting OAuth with PKCE flow...");const{data:t,error:r}=await a.ND.auth.signInWithOAuth({provider:"google",options:{redirectTo:e,skipBrowserRedirect:!1,queryParams:{access_type:"offline",prompt:"consent"}}});if(console.log("Google sign in response:",{data:t,error:r}),r)throw r;return{success:!0,data:t}}catch(e){return console.error("Google sign in error:",e),{success:!1,error:e.message||"Failed to sign in with Google"}}},signOut:async()=>{try{const{error:e}=await a.ND.auth.signOut();if(e)throw e;return{success:!0}}catch(e){return console.error("Sign out error:",e),{success:!1,error:e.message}}},resetPassword:async e=>{try{const{error:t}=await a.ND.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});if(t)throw t;return{success:!0,message:"Password reset email sent! Check your inbox."}}catch(t){return console.error("Reset password error:",t),{success:!1,error:t.message}}},updatePassword:async e=>{try{const{error:t}=await a.ND.auth.updateUser({password:e});if(t)throw t;return{success:!0,message:"Password updated successfully!"}}catch(t){return console.error("Update password error:",t),{success:!1,error:t.message}}},getCurrentUser:async()=>{try{const{data:{user:e},error:t}=await a.ND.auth.getUser();if(t)throw t;if(e){const t=await i.getUserProfile(e.id);return{success:!0,user:{...e,profile:t.data}}}return{success:!0,user:null}}catch(e){return console.error("Get current user error:",e),{success:!1,error:e.message}}},createUserProfile:async e=>{try{var t,r,s,n,i;console.log("Creating user profile for:",e.id,e.email);const{data:o}=await a.ND.from("user_profiles").select("*").eq("id",e.id).maybeSingle();if(o)return console.log("User profile already exists:",o.id),{success:!0,data:[o]};const l=(null===(t=e.user_metadata)||void 0===t?void 0:t.full_name)||(null===(r=e.user_metadata)||void 0===r?void 0:r.name)||(null===(s=e.user_metadata)||void 0===s?void 0:s.display_name)||"",{data:c,error:d}=await a.ND.from("user_profiles").insert([{id:e.id,email:e.email,full_name:l,company:(null===(n=e.user_metadata)||void 0===n?void 0:n.company)||"",phone:(null===(i=e.user_metadata)||void 0===i?void 0:i.phone)||"",subscription_tier:"free",subscription_status:"active",reports_used:0,reports_limit:0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}]).select();if(d){if("23505"===d.code){console.log("Profile already exists (created by trigger), fetching...");const{data:t}=await a.ND.from("user_profiles").select("*").eq("id",e.id).single();return{success:!0,data:[t]}}throw d}return console.log("User profile created successfully:",c),{success:!0,data:c}}catch(o){return console.error("Create user profile error:",o),{success:!1,error:o.message}}},getUserProfile:async e=>{try{const{data:t,error:r}=await a.ND.from("user_profiles").select("*").eq("id",e).single();if(r)throw r;return{success:!0,data:t}}catch(t){return console.error("Get user profile error:",t),{success:!1,error:t.message}}},updateUserProfile:async(e,t)=>{try{const{data:r,error:s}=await a.ND.from("user_profiles").update({...t,updated_at:(new Date).toISOString()}).eq("id",e).select();if(s)throw s;return{success:!0,data:r}}catch(r){return console.error("Update user profile error:",r),{success:!1,error:r.message}}},updateSubscription:async(e,t)=>{try{const r={subscription_tier:t.tierId,subscription_status:t.status,subscription_id:t.subscriptionId,customer_id:t.customerId,current_period_start:t.currentPeriodStart,current_period_end:t.currentPeriodEnd,reports_limit:t.reportsLimit||0,updated_at:(new Date).toISOString()},{data:s,error:n}=await a.ND.from("user_profiles").update(r).eq("id",e).select();if(n)throw n;return{success:!0,data:s}}catch(r){return console.error("Update subscription error:",r),{success:!1,error:r.message}}},updateLastLogin:async e=>{try{const{error:t}=await a.ND.from("user_profiles").update({last_login:(new Date).toISOString(),updated_at:(new Date).toISOString()}).eq("id",e);if(t)throw t;return{success:!0}}catch(t){return console.error("Update last login error:",t),{success:!1}}},canGenerateReport:async e=>{try{const t=await i.getUserProfile(e);if(!t.success)throw new Error("Could not get user profile");const{subscription_tier:r,reports_used:s,reports_limit:n}=t.data;if("free"===r)return{canGenerate:!1,reason:"Please upgrade your plan to generate reports",reportsUsed:0,reportsLimit:0};if(-1===n)return{canGenerate:!0,reportsUsed:s||0,reportsLimit:-1};const a=(n||0)-(s||0);return{canGenerate:a>0,reason:a<=0?"Monthly report limit reached":null,reportsUsed:s||0,reportsLimit:n||0,reportsRemaining:a}}catch(t){return console.error("Check report generation error:",t),{canGenerate:!1,reason:"System error",error:t.message}}},consumeReportCredit:async e=>{try{const t=await i.getUserProfile(e);if(!t.success)throw new Error("Could not get user profile");const r=(t.data.reports_used||0)+1,{error:s}=await a.ND.from("user_profiles").update({reports_used:r,updated_at:(new Date).toISOString()}).eq("id",e);if(s)throw s;return{success:!0,reportsUsed:r,reportsRemaining:-1===t.data.reports_limit?-1:(t.data.reports_limit||0)-r}}catch(t){return console.error("Consume report credit error:",t),{success:!1,error:t.message}}}};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const l=(e,t)=>{const r=(0,s.forwardRef)((r,n)=>{let{color:a="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:d="",children:u,...h}=r;return(0,s.createElement)("svg",{ref:n,...o,width:i,height:i,stroke:a,strokeWidth:c?24*Number(l)/Number(i):l,className:["lucide",`lucide-${p=e,p.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,d].join(" "),...h},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(u)?u:[u]]);var p});return r.displayName=`${e}`,r},c=l("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),d=l("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),u=l("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),h=l("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),p=l("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),f=l("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),m=l("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),g=l("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),v=l("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),x=l("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),y=l("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),b=l("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var w=r(414);const _=e=>{let{onLogin:t}=e;const[r,n]=(0,s.useState)(!1),[a,o]=(0,s.useState)("signin"),[l,_]=(0,s.useState)({email:"",password:"",fullName:""}),[j,N]=(0,s.useState)(!1),[k,S]=(0,s.useState)(""),[C,E]=(0,s.useState)(!1),P=()=>{_({email:"",password:"",fullName:""}),S(""),E(!1)},T=e=>{o(e),n(!0),P()};return(0,w.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[(0,w.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,w.jsx)("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),(0,w.jsx)("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),(0,w.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"}),(0,w.jsx)("div",{className:"absolute top-20 right-20 w-32 h-32 bg-yellow-400 rounded-full mix-blend-multiply filter blur-2xl opacity-30 animate-glow"}),(0,w.jsx)("div",{className:"absolute bottom-20 left-20 w-24 h-24 bg-cyan-400 rounded-full mix-blend-multiply filter blur-2xl opacity-30 animate-glow animation-delay-1000"}),(0,w.jsx)("div",{className:"absolute top-1/3 left-1/4 w-16 h-16 bg-emerald-400 rounded-full mix-blend-multiply filter blur-xl opacity-40 animate-float"}),(0,w.jsx)("div",{className:"absolute bottom-1/3 right-1/4 w-20 h-20 bg-rose-400 rounded-full mix-blend-multiply filter blur-xl opacity-40 animate-float animation-delay-2000"})]}),(0,w.jsx)("nav",{className:"relative z-10 container mx-auto px-6 py-8",children:(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,w.jsx)("img",{src:"/propply-logo-transparent.png",alt:"Propply AI",className:"h-12 w-auto"}),(0,w.jsx)("span",{className:"text-2xl font-bold text-white",children:"Propply"})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,w.jsx)("button",{onClick:()=>T("signin"),className:"px-6 py-3 text-white hover:text-purple-200 font-medium transition-all duration-300 hover:scale-105",children:"Sign In"}),(0,w.jsx)("button",{onClick:()=>T("signup"),className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-2xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 shadow-lg transform hover:scale-105 font-medium",children:"Get Started"})]})]})}),(0,w.jsx)("div",{className:"relative z-10 container mx-auto px-6 pt-16 pb-24",children:(0,w.jsxs)("div",{className:"max-w-6xl mx-auto text-center",children:[(0,w.jsxs)("div",{className:"inline-flex items-center space-x-2 bg-white/10 backdrop-blur-sm px-6 py-3 rounded-full mb-8 border border-white/20 shadow-lg",children:[(0,w.jsx)(c,{className:"h-5 w-5 text-yellow-300"}),(0,w.jsx)("span",{className:"text-sm font-semibold text-white",children:"AI-Powered Property Compliance"})]}),(0,w.jsxs)("h1",{className:"text-7xl md:text-8xl font-bold mb-8 text-white leading-tight",children:["Property Compliance",(0,w.jsx)("br",{}),(0,w.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 via-pink-300 to-purple-300",children:"Made Simple"})]}),(0,w.jsx)("p",{className:"text-2xl text-gray-200 mb-12 max-w-3xl mx-auto leading-relaxed font-medium",children:"Automate inspections, track violations, and stay compliant with AI-powered insights for NYC & Philadelphia properties."}),(0,w.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-6 mb-16",children:[(0,w.jsxs)("button",{onClick:()=>T("signup"),className:"group px-10 py-5 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-2xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 shadow-2xl transform hover:scale-105 font-semibold text-xl flex items-center space-x-3",children:[(0,w.jsx)("span",{children:"Start Free Trial"}),(0,w.jsx)(d,{className:"h-6 w-6 group-hover:translate-x-1 transition-transform"})]}),(0,w.jsx)("button",{onClick:()=>T("signin"),className:"px-10 py-5 bg-white/10 backdrop-blur-sm text-white rounded-2xl hover:bg-white/20 transition-all duration-300 shadow-lg border border-white/30 font-semibold text-xl",children:"Sign In"})]}),(0,w.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto",children:[(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)("div",{className:"text-4xl font-bold text-white mb-2",children:"10K+"}),(0,w.jsx)("div",{className:"text-gray-300",children:"Properties Managed"})]}),(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)("div",{className:"text-4xl font-bold text-white mb-2",children:"99.9%"}),(0,w.jsx)("div",{className:"text-gray-300",children:"Compliance Rate"})]}),(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)("div",{className:"text-4xl font-bold text-white mb-2",children:"24/7"}),(0,w.jsx)("div",{className:"text-gray-300",children:"AI Monitoring"})]})]})]})}),(0,w.jsxs)("div",{className:"relative z-10 container mx-auto px-6 py-24",children:[(0,w.jsxs)("div",{className:"text-center mb-16",children:[(0,w.jsx)("h2",{className:"text-5xl font-bold text-white mb-6",children:"Powerful Features"}),(0,w.jsx)("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"Everything you need to manage property compliance with AI-powered insights and automation."})]}),(0,w.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[(0,w.jsxs)("div",{className:"group bg-white/10 backdrop-blur-xl p-8 rounded-3xl border border-white/20 shadow-xl hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-4 hover:scale-105",children:[(0,w.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300",children:(0,w.jsx)(u,{className:"h-8 w-8 text-white"})}),(0,w.jsx)("h3",{className:"text-2xl font-bold text-white mb-4 group-hover:text-blue-300 transition-colors",children:"Smart Compliance"}),(0,w.jsx)("p",{className:"text-gray-300 leading-relaxed group-hover:text-white transition-colors",children:"AI-powered compliance tracking for NYC & Philadelphia properties with automated violation detection and real-time alerts."}),(0,w.jsxs)("div",{className:"mt-6 flex items-center text-blue-300 font-medium group-hover:text-blue-200 transition-colors",children:[(0,w.jsx)("span",{children:"Learn more"}),(0,w.jsx)(h,{className:"h-4 w-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]}),(0,w.jsxs)("div",{className:"group bg-white/10 backdrop-blur-xl p-8 rounded-3xl border border-white/20 shadow-xl hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-4 hover:scale-105",children:[(0,w.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300",children:(0,w.jsx)(p,{className:"h-8 w-8 text-white"})}),(0,w.jsx)("h3",{className:"text-2xl font-bold text-white mb-4 group-hover:text-purple-300 transition-colors",children:"Instant Reports"}),(0,w.jsx)("p",{className:"text-gray-300 leading-relaxed group-hover:text-white transition-colors",children:"Generate comprehensive compliance reports in seconds with actionable insights, recommendations, and automated scheduling."}),(0,w.jsxs)("div",{className:"mt-6 flex items-center text-purple-300 font-medium group-hover:text-purple-200 transition-colors",children:[(0,w.jsx)("span",{children:"Learn more"}),(0,w.jsx)(h,{className:"h-4 w-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]}),(0,w.jsxs)("div",{className:"group bg-white/10 backdrop-blur-xl p-8 rounded-3xl border border-white/20 shadow-xl hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-4 hover:scale-105",children:[(0,w.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300",children:(0,w.jsx)(f,{className:"h-8 w-8 text-white"})}),(0,w.jsx)("h3",{className:"text-2xl font-bold text-white mb-4 group-hover:text-green-300 transition-colors",children:"Stay Compliant"}),(0,w.jsx)("p",{className:"text-gray-300 leading-relaxed group-hover:text-white transition-colors",children:"Never miss a deadline with automated scheduling, reminders, and vendor marketplace integration for seamless compliance."}),(0,w.jsxs)("div",{className:"mt-6 flex items-center text-green-300 font-medium group-hover:text-green-200 transition-colors",children:[(0,w.jsx)("span",{children:"Learn more"}),(0,w.jsx)(h,{className:"h-4 w-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]}),(0,w.jsxs)("div",{className:"group bg-white/10 backdrop-blur-xl p-8 rounded-3xl border border-white/20 shadow-xl hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-4 hover:scale-105",children:[(0,w.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300",children:(0,w.jsx)(m,{className:"h-8 w-8 text-white"})}),(0,w.jsx)("h3",{className:"text-2xl font-bold text-white mb-4 group-hover:text-orange-300 transition-colors",children:"Analytics Dashboard"}),(0,w.jsx)("p",{className:"text-gray-300 leading-relaxed group-hover:text-white transition-colors",children:"Track performance metrics, identify trends, and optimize your property management with comprehensive analytics."}),(0,w.jsxs)("div",{className:"mt-6 flex items-center text-orange-300 font-medium group-hover:text-orange-200 transition-colors",children:[(0,w.jsx)("span",{children:"Learn more"}),(0,w.jsx)(h,{className:"h-4 w-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]}),(0,w.jsxs)("div",{className:"group bg-white/10 backdrop-blur-xl p-8 rounded-3xl border border-white/20 shadow-xl hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-4 hover:scale-105",children:[(0,w.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-indigo-500 to-blue-500 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300",children:(0,w.jsx)(g,{className:"h-8 w-8 text-white"})}),(0,w.jsx)("h3",{className:"text-2xl font-bold text-white mb-4 group-hover:text-indigo-300 transition-colors",children:"Team Collaboration"}),(0,w.jsx)("p",{className:"text-gray-300 leading-relaxed group-hover:text-white transition-colors",children:"Collaborate with your team, assign tasks, and track progress with role-based permissions and real-time updates."}),(0,w.jsxs)("div",{className:"mt-6 flex items-center text-indigo-300 font-medium group-hover:text-indigo-200 transition-colors",children:[(0,w.jsx)("span",{children:"Learn more"}),(0,w.jsx)(h,{className:"h-4 w-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]}),(0,w.jsxs)("div",{className:"group bg-white/10 backdrop-blur-xl p-8 rounded-3xl border border-white/20 shadow-xl hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-4 hover:scale-105",children:[(0,w.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-pink-500 to-rose-500 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300",children:(0,w.jsx)(v,{className:"h-8 w-8 text-white"})}),(0,w.jsx)("h3",{className:"text-2xl font-bold text-white mb-4 group-hover:text-pink-300 transition-colors",children:"Smart Alerts"}),(0,w.jsx)("p",{className:"text-gray-300 leading-relaxed group-hover:text-white transition-colors",children:"Get intelligent notifications about potential violations, upcoming deadlines, and compliance opportunities."}),(0,w.jsxs)("div",{className:"mt-6 flex items-center text-pink-300 font-medium group-hover:text-pink-200 transition-colors",children:[(0,w.jsx)("span",{children:"Learn more"}),(0,w.jsx)(h,{className:"h-4 w-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})]})]}),(0,w.jsx)("div",{className:"relative z-10 container mx-auto px-6 py-24",children:(0,w.jsxs)("div",{className:"bg-gradient-to-r from-purple-600/20 to-pink-600/20 backdrop-blur-xl rounded-3xl p-16 text-center border border-white/20 shadow-2xl",children:[(0,w.jsx)("h2",{className:"text-5xl font-bold text-white mb-6",children:"Ready to Get Started?"}),(0,w.jsx)("p",{className:"text-xl text-gray-300 mb-12 max-w-2xl mx-auto",children:"Join thousands of property managers who trust Propply for their compliance needs."}),(0,w.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-6",children:[(0,w.jsxs)("button",{onClick:()=>T("signup"),className:"group px-12 py-5 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-2xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 shadow-2xl transform hover:scale-105 font-semibold text-xl flex items-center space-x-3",children:[(0,w.jsx)("span",{children:"Start Your Free Trial"}),(0,w.jsx)(d,{className:"h-6 w-6 group-hover:translate-x-1 transition-transform"})]}),(0,w.jsx)("button",{onClick:()=>T("signin"),className:"px-12 py-5 bg-white/10 backdrop-blur-sm text-white rounded-2xl hover:bg-white/20 transition-all duration-300 shadow-lg border border-white/30 font-semibold text-xl",children:"Sign In to Dashboard"})]})]})}),r&&(0,w.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,w.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,w.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"signin"===a?"Welcome Back":"Create Account"}),(0,w.jsx)("button",{onClick:()=>{n(!1),P()},className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,w.jsx)(x,{className:"h-5 w-5 text-gray-500"})})]}),(0,w.jsx)("p",{className:"text-gray-600 mt-2",children:"signin"===a?"Sign in to access your dashboard":"Get started with your free account"})]}),(0,w.jsxs)("div",{className:"p-6",children:[k&&(0,w.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm",children:k}),(0,w.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),N(!0),S("");try{if("signin"===a){const e=await i.signIn(l.email,l.password);e.success?(console.log("Sign in successful, redirecting to profile..."),await t(e.user,!0),n(!1),P(),N(!1)):(S(e.error||"Failed to sign in"),N(!1))}else{const e=await i.signUp(l.email,l.password,{fullName:l.fullName});console.log("Signup result:",e),e.success?e.session&&e.user?(console.log("Session available, logging in user and redirecting to profile..."),await t(e.user,!0),n(!1),P(),N(!1)):e.user&&!e.session?(console.log("No session - email confirmation required"),n(!1),P(),N(!1),alert("\u2705 Account created successfully!\n\nPlease check your email to verify your account, then sign in.")):(S("Account created but user data missing. Please try signing in."),N(!1)):(S(e.error||"Failed to create account"),N(!1))}}catch(k){console.error("Auth error:",k),S(k.message||"An error occurred"),N(!1)}},className:"space-y-4",children:["signup"===a&&(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name"}),(0,w.jsx)("input",{type:"text",value:l.fullName,onChange:e=>_({...l,fullName:e.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"John Doe",required:!0})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),(0,w.jsx)("input",{type:"email",value:l.email,onChange:e=>_({...l,email:e.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"you@example.com",required:!0})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsx)("input",{type:C?"text":"password",value:l.password,onChange:e=>_({...l,password:e.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all pr-12",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,minLength:6}),(0,w.jsx)("button",{type:"button",onClick:()=>E(!C),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:C?(0,w.jsx)(y,{className:"h-5 w-5"}):(0,w.jsx)(b,{className:"h-5 w-5"})})]})]}),(0,w.jsx)("button",{type:"submit",disabled:j,className:"w-full py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl hover:from-blue-600 hover:to-purple-700 transition-all duration-300 shadow-lg transform hover:scale-105 font-medium disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:j?(0,w.jsxs)("span",{className:"flex items-center justify-center space-x-2",children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,w.jsx)("span",{children:"signin"===a?"Signing In...":"Creating Account..."})]}):(0,w.jsx)("span",{children:"signin"===a?"Sign In":"Create Account"})})]}),(0,w.jsxs)("div",{className:"mt-6",children:[(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,w.jsx)("div",{className:"w-full border-t border-gray-200"})}),(0,w.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,w.jsx)("span",{className:"px-4 bg-white text-gray-500",children:"Or continue with"})})]}),(0,w.jsxs)("button",{onClick:async()=>{N(!0),S("");try{console.log("Starting Google OAuth..."),console.log("Browser allows popups:",!window.navigator.userAgent.includes("Headless"));const e=await i.signInWithGoogle();if(console.log("OAuth result:",e),!e.success)throw new Error(e.error);console.log("Google OAuth initiated successfully - redirecting to Google..."),setTimeout(()=>{window.location.href.includes("accounts.google.com")||(console.warn("Redirect did not happen - check if popups are blocked"),S("Popup blocked? Please allow popups for this site and try again."),N(!1))},2e3)}catch(k){var e,t,r;console.error("Google OAuth error:",k),null!==(e=k.message)&&void 0!==e&&e.includes("Provider not found")?S("Google authentication is not configured in Supabase. Please use email/password or contact support."):null!==(t=k.message)&&void 0!==t&&t.includes("Invalid provider")?S("Google provider is disabled. Please use email/password login."):null!==(r=k.message)&&void 0!==r&&r.includes("popup")?S("Popup blocked! Please allow popups for this site and try again."):S(k.message||"Failed to start Google sign-in. Please check console for details."),N(!1)}},disabled:j,className:"mt-4 w-full py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all duration-300 font-medium flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,w.jsxs)("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[(0,w.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,w.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,w.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,w.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),(0,w.jsx)("span",{children:"Google"})]})]}),(0,w.jsx)("div",{className:"mt-6 text-center",children:(0,w.jsx)("button",{onClick:()=>{o("signin"===a?"signup":"signin"),S("")},className:"text-sm text-gray-600 hover:text-gray-900 font-medium",children:"signin"===a?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})}),(0,w.jsx)("style",{jsx:!0,children:"\n        @keyframes blob {\n          0%, 100% { transform: translate(0, 0) scale(1); }\n          33% { transform: translate(30px, -50px) scale(1.1); }\n          66% { transform: translate(-20px, 20px) scale(0.9); }\n        }\n        @keyframes float {\n          0%, 100% { transform: translateY(0px); }\n          50% { transform: translateY(-20px); }\n        }\n        @keyframes glow {\n          0%, 100% { opacity: 0.3; }\n          50% { opacity: 0.6; }\n        }\n        .animate-blob {\n          animation: blob 7s infinite;\n        }\n        .animate-float {\n          animation: float 3s ease-in-out infinite;\n        }\n        .animate-glow {\n          animation: glow 2s ease-in-out infinite;\n        }\n        .animation-delay-1000 {\n          animation-delay: 1s;\n        }\n        .animation-delay-2000 {\n          animation-delay: 2s;\n        }\n        .animation-delay-4000 {\n          animation-delay: 4s;\n        }\n        .animation-delay-6000 {\n          animation-delay: 6s;\n        }\n      "})]})},j=l("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),N=l("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),k=l("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),S=l("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),C=l("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),E=l("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),P=l("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),T=l("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),I=l("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),O=l("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),A=l("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),R=l("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),$=l("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),D=l("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),L=l("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),U=l("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),M=l("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),z=l("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),F=l("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),B=l("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);let q=!1,V=!1,W=null;const H=e=>{let{value:t,onChange:r,onPlaceSelect:n,placeholder:a="Enter property address",className:i="",disabled:o=!1,required:l=!1,error:c=null,darkMode:d=!1}=e;const u=(0,s.useRef)(null),h=(0,s.useRef)(null),[p,f]=(0,s.useState)(!1),[m,g]=(0,s.useState)(null);(0,s.useEffect)(()=>{const e=()=>{if(u.current)try{h.current=new window.google.maps.places.Autocomplete(u.current,{types:["address"],componentRestrictions:{country:"us"},fields:["address_components","geometry","formatted_address","name"]}),h.current.addListener("place_changed",()=>{const e=h.current.getPlace();if(e.geometry)if(e.address_components&&0!==e.address_components.length){f(!0),g(null);try{const t=v(e),s=(e=>{var t,r;const s=(e=>{const t=[];return e.street_address&&""!==e.street_address.trim()||t.push("Street address is required"),e.city&&""!==e.city.trim()||t.push("City is required"),e.state&&""!==e.state.trim()||t.push("State is required"),e.zip_code&&""!==e.zip_code.trim()||t.push("ZIP code is required"),e.zip_code&&!/^\d{5}(-\d{4})?$/.test(e.zip_code)&&t.push("ZIP code must be in format 12345 or 12345-6789"),e.state&&2!==e.state.length&&t.push("State must be a 2-letter abbreviation"),{isValid:0===t.length,errors:t}})(e);if(!s.isValid)return s;const n=[],a=null===(t=e.city)||void 0===t?void 0:t.toLowerCase(),i=null===(r=e.state)||void 0===r?void 0:r.toLowerCase();return"ny"!==i||null!==a&&void 0!==a&&a.includes("new york")||n.push("Address appears to be outside New York City"),"pa"!==i||null!==a&&void 0!==a&&a.includes("philadelphia")||n.push("Address appears to be outside Philadelphia"),"ny"!==i&&"pa"!==i&&n.push("Address is outside supported cities (NYC/Philadelphia)"),{isValid:s.isValid,errors:s.errors,warnings:n}})(t);if(!s.isValid)return void g(s.errors.join(", "));const a=e.formatted_address||e.name;if(r(a),n){const r=(e=>{if(!e)return null;const{street_address:t,city:r,state:s,zip_code:n,country:a="United States"}=e;return{full_address:`${t}, ${r}, ${s} ${n}`,street_address:t,city:r,state:s,zip_code:n,country:a,formatted_for_display:`${t}, ${r}, ${s} ${n}`,formatted_for_api:`${t}, ${r}, ${s} ${n}, ${a}`}})(t);n({formatted_address:a,components:t,formatted_data:r,geometry:e.geometry,place_id:e.place_id,validation:s})}}catch(c){console.error("Error processing place selection:",c),g("Error processing selected address")}finally{f(!1)}}else g("Incomplete address information. Please select a more specific address.");else g("No details available for the selected address. Please try a different address.")})}catch(c){console.error("Error initializing Google Places Autocomplete:",c),g("Failed to initialize address autocomplete")}};return(async()=>{const t={isValid:!0,message:"Google Maps API key is configured correctly"};if(t.isValid)if(q&&window.google&&window.google.maps&&window.google.maps.places)e();else try{f(!0),await(q?Promise.resolve():(V&&W||(V=!0,W=new Promise((e,t)=>{const r="AIzaSyA4gSJ9LDVqQ9AVxw3zVoHSQQVr_9W2V54";if(window.google&&window.google.maps&&window.google.maps.places)return q=!0,V=!1,void e();const s=document.createElement("script");s.src=`https://maps.googleapis.com/maps/api/js?key=${r}&libraries=places`,s.async=!0,s.defer=!0,s.onload=()=>{q=!0,V=!1,console.log("Google Maps API loaded successfully"),e()},s.onerror=e=>{V=!1;const r="Failed to load Google Maps API. Please check your API key and network connection.";console.error(r,e),t(new Error(r))},document.head.appendChild(s)})),W)),e()}catch(c){console.error("Failed to load Google Maps API:",c),g(c.message)}finally{f(!1)}else g(t.message)})(),()=>{h.current&&window.google.maps.event.clearInstanceListeners(h.current)}},[]);const v=e=>{const t={street_number:"",route:"",street_address:"",city:"",state:"",zip_code:"",country:"",county:"",neighborhood:""};return e.address_components&&(e.address_components.forEach(e=>{const r=e.types;r.includes("street_number")&&(t.street_number=e.long_name),r.includes("route")&&(t.route=e.long_name),r.includes("locality")&&(t.city=e.long_name),r.includes("administrative_area_level_1")&&(t.state=e.short_name),r.includes("postal_code")&&(t.zip_code=e.long_name),r.includes("country")&&(t.country=e.long_name),r.includes("administrative_area_level_2")&&(t.county=e.long_name),r.includes("neighborhood")&&(t.neighborhood=e.long_name)}),t.street_address=`${t.street_number} ${t.route}`.trim()),t};return(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsx)(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,w.jsx)("input",{ref:u,type:"text",value:t,onChange:e=>{const t=e.target.value;r(t),g(null)},placeholder:a,disabled:o,required:l,className:`w-full pl-10 pr-10 py-3 border rounded-xl focus:ring-2 focus:border-transparent transition-all duration-300 ${d?"bg-slate-800 border-slate-600 text-slate-200 placeholder-slate-400 hover:bg-slate-700 focus:ring-corporate-500 focus:border-corporate-500":"border-gray-300 focus:ring-blue-500"} ${c||m?"border-red-500 focus:ring-red-500":""} ${i}`}),p&&(0,w.jsx)(B,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-blue-500 animate-spin"})]}),(c||m)&&(0,w.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2 text-red-600 text-sm",children:[(0,w.jsx)(F,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:c||m})]}),m&&m.includes("Google Maps API")&&(0,w.jsx)("button",{onClick:()=>{if(!t||""===t.trim())return void g("Please enter a property address");const e=t.split(",");var r,s;e.length<2?g("Please enter a complete address (street, city, state)"):n&&n({formatted_address:t,components:{street_address:e[0].trim(),city:e[1].trim(),state:(null===(r=e[2])||void 0===r?void 0:r.trim())||"",zip_code:(null===(s=e[3])||void 0===s?void 0:s.trim())||"",country:"United States"},formatted_data:{full_address:t,formatted_for_display:t,formatted_for_api:t},geometry:null,place_id:null,validation:{isValid:!0,errors:[],warnings:["Address entered manually - not validated by Google Places"]}})},className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Use Manual Entry"})]}),(0,w.jsx)("div",{className:"mt-1 text-xs "+(d?"text-slate-400":"text-gray-500"),children:m&&m.includes("Google Maps API")?"Google Places API unavailable - you can still enter addresses manually":"Start typing to see address suggestions"})]})},G=l("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Y=l("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),K=l("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),J=l("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Q=(0,s.createContext)(),X=()=>{const e=(0,s.useContext)(Q);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},Z=e=>{let{children:t}=e;const[r,n]=(0,s.useState)(()=>{const e=localStorage.getItem("propply-theme");return e||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});(0,s.useEffect)(()=>{localStorage.setItem("propply-theme",r),document.documentElement.setAttribute("data-theme",r),document.body.className=`theme-${r}`},[r]);const a={theme:r,toggleTheme:()=>{n(e=>"dark"===e?"light":"dark")},isDark:"dark"===r,isLight:"light"===r};return(0,w.jsx)(Q.Provider,{value:a,children:t})},ee=e=>{let{user:t,properties:r}=e;const{theme:n,isDark:a}=X(),[i,o]=(0,s.useState)([]),[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(""),[h,p]=(0,s.useState)("all"),[g,v]=(0,s.useState)("all"),[x,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{_()},[t.id]);const _=async()=>{try{var e,t,s,n,a,i;c(!0);const l=[{id:1,property_id:null===(e=r[0])||void 0===e?void 0:e.id,property_address:(null===(t=r[0])||void 0===t?void 0:t.address)||"140 W 28th St, New York, NY 10001",title:"Fire Safety Inspection",description:"Annual fire safety inspection required by NYC Fire Department",status:"pending",priority:"high",due_date:"2024-02-15",created_at:"2024-01-15",category:"Safety"},{id:2,property_id:null===(s=r[0])||void 0===s?void 0:s.id,property_address:(null===(n=r[0])||void 0===n?void 0:n.address)||"140 W 28th St, New York, NY 10001",title:"Boiler Inspection",description:"Annual boiler inspection and certification",status:"in_progress",priority:"medium",due_date:"2024-03-01",created_at:"2024-01-10",category:"HVAC"},{id:3,property_id:null===(a=r[0])||void 0===a?void 0:a.id,property_address:(null===(i=r[0])||void 0===i?void 0:i.address)||"140 W 28th St, New York, NY 10001",title:"Elevator Certification",description:"Annual elevator safety inspection and certification",status:"completed",priority:"high",due_date:"2024-01-30",created_at:"2024-01-05",category:"Safety"}];o(l)}catch(l){console.error("Error fetching compliance items:",l)}finally{c(!1)}},j=e=>{switch(e){case"completed":return(0,w.jsx)(f,{className:"h-5 w-5 text-emerald-500"});case"in_progress":return(0,w.jsx)(G,{className:"h-5 w-5 text-corporate-500"});case"pending":return(0,w.jsx)(F,{className:"h-5 w-5 text-gold-500"});case"overdue":return(0,w.jsx)(D,{className:"h-5 w-5 text-ruby-500"});default:return(0,w.jsx)(Y,{className:"h-5 w-5 text-slate-400"})}},N=e=>{switch(e){case"completed":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"in_progress":return"bg-corporate-100 text-corporate-800 border-corporate-200";case"pending":return"bg-gold-100 text-gold-800 border-gold-200";case"overdue":return"bg-ruby-100 text-ruby-800 border-ruby-200";default:return"bg-slate-100 text-slate-800 border-slate-200"}},S=e=>{switch(e){case"high":return"bg-ruby-100 text-ruby-800 border-ruby-200";case"medium":return"bg-gold-100 text-gold-800 border-gold-200";case"low":return"bg-emerald-100 text-emerald-800 border-emerald-200";default:return"bg-slate-100 text-slate-800 border-slate-200"}},C=i.filter(e=>{const t=e.title.toLowerCase().includes(d.toLowerCase())||e.description.toLowerCase().includes(d.toLowerCase()),r="all"===h||e.status===h,s="all"===g||e.priority===g;return t&&r&&s}),E={total:i.length,pending:i.filter(e=>"pending"===e.status).length,inProgress:i.filter(e=>"in_progress"===e.status).length,completed:i.filter(e=>"completed"===e.status).length,overdue:i.filter(e=>"overdue"===e.status).length};return(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsx)("div",{className:"enterprise-card p-6",children:(0,w.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between",children:[(0,w.jsxs)("div",{className:"mb-4 lg:mb-0",children:[(0,w.jsx)("h1",{className:"text-3xl font-bold text-slate-100 mb-2",children:"Compliance Punch List"}),(0,w.jsx)("p",{className:"text-slate-400 text-lg",children:"Track and manage property compliance requirements"})]}),(0,w.jsx)("div",{className:"flex items-center space-x-3",children:(0,w.jsxs)("button",{className:"btn-primary",children:[(0,w.jsx)(A,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:"Add Compliance Item"})]})})]})}),(0,w.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[{label:"Total",value:E.total,icon:$,color:"corporate"},{label:"Pending",value:E.pending,icon:G,color:"gold"},{label:"In Progress",value:E.inProgress,icon:m,color:"corporate"},{label:"Completed",value:E.completed,icon:f,color:"emerald"},{label:"Overdue",value:E.overdue,icon:D,color:"ruby"}].map((e,t)=>{const r=e.icon;return(0,w.jsxs)("div",{className:"metric-card group",children:[(0,w.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,w.jsx)("div",{className:`p-3 bg-gradient-to-r ${{corporate:"from-corporate-500 to-corporate-600",emerald:"from-emerald-500 to-emerald-600",ruby:"from-ruby-500 to-ruby-600",gold:"from-gold-500 to-gold-600"}[e.color]} rounded-xl shadow-enterprise group-hover:shadow-glow transition-all duration-300`,children:(0,w.jsx)(r,{className:"h-6 w-6 text-white"})})}),(0,w.jsx)("div",{className:"metric-value text-4xl mb-1",children:e.value}),(0,w.jsx)("div",{className:"metric-label",children:e.label})]},t)})}),(0,w.jsx)("div",{className:"enterprise-card p-6",children:(0,w.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,w.jsxs)("div",{className:"flex-1 relative",children:[(0,w.jsx)(U,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),(0,w.jsx)("input",{type:"text",placeholder:"Search compliance items...",value:d,onChange:e=>u(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-800 border border-slate-600 rounded-xl focus:ring-2 focus:ring-corporate-500 focus:border-corporate-500 transition-all duration-300 text-slate-200 placeholder-slate-400 hover:bg-slate-700"})]}),(0,w.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"px-4 py-3 bg-slate-800 border border-slate-600 rounded-xl focus:ring-2 focus:ring-corporate-500 focus:border-corporate-500 transition-all duration-300 text-slate-200 hover:bg-slate-700",children:[(0,w.jsx)("option",{value:"all",children:"All Status"}),(0,w.jsx)("option",{value:"pending",children:"Pending"}),(0,w.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,w.jsx)("option",{value:"completed",children:"Completed"}),(0,w.jsx)("option",{value:"overdue",children:"Overdue"})]}),(0,w.jsxs)("select",{value:g,onChange:e=>v(e.target.value),className:"px-4 py-3 bg-slate-800 border border-slate-600 rounded-xl focus:ring-2 focus:ring-corporate-500 focus:border-corporate-500 transition-all duration-300 text-slate-200 hover:bg-slate-700",children:[(0,w.jsx)("option",{value:"all",children:"All Priority"}),(0,w.jsx)("option",{value:"high",children:"High"}),(0,w.jsx)("option",{value:"medium",children:"Medium"}),(0,w.jsx)("option",{value:"low",children:"Low"})]})]})}),(0,w.jsxs)("div",{className:"enterprise-card overflow-hidden",children:[(0,w.jsx)("div",{className:"enterprise-card-header",children:(0,w.jsxs)("h2",{className:"text-xl font-bold text-slate-100",children:["Compliance Items (",C.length,")"]})}),(0,w.jsx)("div",{className:"p-6",children:l?(0,w.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-corporate-500"}),(0,w.jsx)("span",{className:"ml-3 text-slate-400",children:"Loading compliance items..."})]}):0===C.length?(0,w.jsxs)("div",{className:"text-center py-12",children:[(0,w.jsx)("div",{className:"w-16 h-16 bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,w.jsx)(f,{className:"h-8 w-8 text-slate-400"})}),(0,w.jsx)("p",{className:"text-slate-400 text-lg",children:"No compliance items found"}),(0,w.jsx)("p",{className:"text-slate-500 text-sm mt-2",children:"Add your first compliance item to get started"})]}):(0,w.jsx)("div",{className:"space-y-4",children:C.map(e=>(0,w.jsx)("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6 hover:bg-slate-750 transition-all duration-300",children:(0,w.jsxs)("div",{className:"flex items-start justify-between",children:[(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[j(e.status),(0,w.jsx)("h3",{className:"text-lg font-semibold text-slate-100",children:e.title}),(0,w.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${N(e.status)}`,children:e.status.replace("_"," ").toUpperCase()}),(0,w.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${S(e.priority)}`,children:e.priority.toUpperCase()})]}),(0,w.jsx)("p",{className:"text-slate-400 mb-3",children:e.description}),(0,w.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-slate-500",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(z,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:e.property_address})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(k,{className:"h-4 w-4"}),(0,w.jsxs)("span",{children:["Due: ",new Date(e.due_date).toLocaleDateString()]})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)($,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:e.category})]})]})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,w.jsx)("button",{className:"p-2 text-corporate-400 hover:bg-corporate-500/20 rounded-lg transition-all duration-300",children:(0,w.jsx)(b,{className:"h-4 w-4"})}),(0,w.jsx)("button",{className:"p-2 text-slate-400 hover:bg-slate-700 rounded-lg transition-all duration-300",children:(0,w.jsx)(K,{className:"h-4 w-4"})}),(0,w.jsx)("button",{className:"p-2 text-ruby-400 hover:bg-ruby-500/20 rounded-lg transition-all duration-300",children:(0,w.jsx)(J,{className:"h-4 w-4"})})]})]})},e.id))})})]})]})},te=l("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),re=l("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),se=l("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),ne=e=>{let{user:t,properties:r}=e;const{theme:n,isDark:a}=X(),[i,o]=(0,s.useState)([]),[l,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(!1),[h,p]=(0,s.useState)(""),[m,v]=(0,s.useState)("all"),[x,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{_(),j()},[t.id]);const _=async()=>{try{u(!0);o([{id:1,name:"David Chen",rating:4.9,services:["comprehensive_inspection","violation_resolution"],response_time:"2 hours",price_range:"$150-300",verified:!0,location:"New York, NY",phone:"+1 (555) 123-4567",email:"david@example.com"},{id:2,name:"John Smith",rating:4.8,services:["boiler_inspection","elevator_inspection","fire_safety"],response_time:"4 hours",price_range:"$200-400",verified:!0,location:"Brooklyn, NY",phone:"+1 (555) 234-5678",email:"john@example.com"},{id:3,name:"Sarah Johnson",rating:4.7,services:["general_contracting","renovation","compliance_upgrades"],response_time:"6 hours",price_range:"$300-600",verified:!0,location:"Queens, NY",phone:"+1 (555) 345-6789",email:"sarah@example.com"},{id:4,name:"Maria Rodriguez",rating:4.6,services:["electrical_inspection","plumbing","hvac"],response_time:"8 hours",price_range:"$100-250",verified:!1,location:"Bronx, NY",phone:"+1 (555) 456-7890",email:"maria@example.com"}])}catch(e){console.error("Error fetching vendors:",e)}finally{u(!1)}},j=async()=>{try{c([{id:1,title:"Fire Safety Inspection",property_address:"140 W 28th St, New York, NY 10001",status:"open",due_date:"2024-02-15",budget:"$500-1000",responses:3,created_at:"2024-01-15"}])}catch(e){console.error("Error fetching RFPs:",e)}},N=e=>({comprehensive_inspection:"bg-corporate-100 text-corporate-800 border-corporate-200",violation_resolution:"bg-ruby-100 text-ruby-800 border-ruby-200",boiler_inspection:"bg-gold-100 text-gold-800 border-gold-200",elevator_inspection:"bg-emerald-100 text-emerald-800 border-emerald-200",fire_safety:"bg-ruby-100 text-ruby-800 border-ruby-200",general_contracting:"bg-slate-100 text-slate-800 border-slate-200",renovation:"bg-purple-100 text-purple-800 border-purple-200",compliance_upgrades:"bg-indigo-100 text-indigo-800 border-indigo-200",electrical_inspection:"bg-yellow-100 text-yellow-800 border-yellow-200",plumbing:"bg-blue-100 text-blue-800 border-blue-200",hvac:"bg-cyan-100 text-cyan-800 border-cyan-200"}[e]||"bg-slate-100 text-slate-800 border-slate-200"),k=i.filter(e=>{const t=e.name.toLowerCase().includes(h.toLowerCase())||e.services.some(e=>e.toLowerCase().includes(h.toLowerCase())),r="all"===m||e.services.includes(m);return t&&r}),S={totalVendors:i.length,verifiedVendors:i.filter(e=>e.verified).length,avgRating:i.reduce((e,t)=>e+t.rating,0)/i.length,totalRFPs:l.length,openRFPs:l.filter(e=>"open"===e.status).length};return(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsx)("div",{className:"enterprise-card p-6",children:(0,w.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between",children:[(0,w.jsxs)("div",{className:"mb-4 lg:mb-0",children:[(0,w.jsx)("h1",{className:"text-3xl font-bold text-slate-100 mb-2",children:"Vendor RFP Management"}),(0,w.jsx)("p",{className:"text-slate-400 text-lg",children:"Create formal Requests for Proposals and connect with certified vendors"})]}),(0,w.jsx)("div",{className:"flex items-center space-x-3",children:(0,w.jsxs)("button",{className:"btn-primary",children:[(0,w.jsx)(A,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:"Create RFP"})]})})]})}),(0,w.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[{label:"Total Vendors",value:S.totalVendors,icon:g,color:"corporate"},{label:"Verified",value:S.verifiedVendors,icon:f,color:"emerald"},{label:"Avg Rating",value:S.avgRating.toFixed(1),icon:te,color:"gold"},{label:"Total RFPs",value:S.totalRFPs,icon:$,color:"corporate"},{label:"Open RFPs",value:S.openRFPs,icon:G,color:"gold"}].map((e,t)=>{const r=e.icon;return(0,w.jsxs)("div",{className:"metric-card group",children:[(0,w.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,w.jsx)("div",{className:`p-3 bg-gradient-to-r ${{corporate:"from-corporate-500 to-corporate-600",emerald:"from-emerald-500 to-emerald-600",ruby:"from-ruby-500 to-ruby-600",gold:"from-gold-500 to-gold-600"}[e.color]} rounded-xl shadow-enterprise group-hover:shadow-glow transition-all duration-300`,children:(0,w.jsx)(r,{className:"h-6 w-6 text-white"})})}),(0,w.jsx)("div",{className:"metric-value text-4xl mb-1",children:e.value}),(0,w.jsx)("div",{className:"metric-label",children:e.label})]},t)})}),(0,w.jsx)("div",{className:"enterprise-card p-6",children:(0,w.jsx)("div",{className:"flex flex-col lg:flex-row gap-4",children:(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Select Property"}),(0,w.jsxs)("select",{value:x||"",onChange:e=>y(e.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-xl focus:ring-2 focus:ring-corporate-500 focus:border-corporate-500 transition-all duration-300 text-slate-200 hover:bg-slate-700",children:[(0,w.jsx)("option",{value:"",children:"Choose a property..."}),r.map(e=>(0,w.jsx)("option",{value:e.id,children:e.address},e.id))]})]})})}),(0,w.jsxs)("div",{className:"enterprise-card overflow-hidden",children:[(0,w.jsx)("div",{className:"enterprise-card-header",children:(0,w.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between",children:[(0,w.jsx)("h2",{className:"text-xl font-bold text-bright mb-4 lg:mb-0",children:"Certified Vendors"}),(0,w.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsx)(U,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-tertiary"}),(0,w.jsx)("input",{type:"text",placeholder:"Search vendors...",value:h,onChange:e=>p(e.target.value),className:"pl-12 pr-4 py-3 bg-card border border-bright rounded-xl focus:ring-2 focus:ring-corporate-500 focus:border-corporate-500 transition-all duration-300 text-primary placeholder-tertiary hover:bg-accent"})]}),(0,w.jsxs)("select",{value:m,onChange:e=>v(e.target.value),className:"px-4 py-3 bg-card border border-bright rounded-xl focus:ring-2 focus:ring-corporate-500 focus:border-corporate-500 transition-all duration-300 text-primary hover:bg-accent",children:[(0,w.jsx)("option",{value:"all",children:"All Services"}),(0,w.jsx)("option",{value:"comprehensive_inspection",children:"Comprehensive Inspection"}),(0,w.jsx)("option",{value:"violation_resolution",children:"Violation Resolution"}),(0,w.jsx)("option",{value:"boiler_inspection",children:"Boiler Inspection"}),(0,w.jsx)("option",{value:"elevator_inspection",children:"Elevator Inspection"}),(0,w.jsx)("option",{value:"fire_safety",children:"Fire Safety"})]})]})]})}),(0,w.jsx)("div",{className:"p-6",children:d?(0,w.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-corporate-500"}),(0,w.jsx)("span",{className:"ml-3 text-slate-400",children:"Loading vendors..."})]}):(0,w.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(e=>(0,w.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6 hover:bg-slate-750 transition-all duration-300 group",children:[(0,w.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,w.jsx)("h3",{className:"text-lg font-semibold text-slate-100",children:e.name}),e.verified&&(0,w.jsx)("div",{className:"p-1 bg-emerald-500 rounded-full",children:(0,w.jsx)(f,{className:"h-3 w-3 text-white"})})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,w.jsx)(te,{className:"h-4 w-4 text-gold-400 fill-current"}),(0,w.jsx)("span",{className:"text-slate-200 font-medium",children:e.rating})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-1 text-slate-400",children:[(0,w.jsx)(G,{className:"h-4 w-4"}),(0,w.jsx)("span",{className:"text-sm",children:e.response_time})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-1 text-slate-400",children:[(0,w.jsx)(re,{className:"h-4 w-4"}),(0,w.jsx)("span",{className:"text-sm",children:e.price_range})]})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-2 text-slate-400 text-sm mb-4",children:[(0,w.jsx)(z,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:e.location})]})]})}),(0,w.jsx)("div",{className:"mb-4",children:(0,w.jsx)("div",{className:"flex flex-wrap gap-2",children:e.services.map((e,t)=>(0,w.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${N(e)}`,children:e.replace("_"," ").toUpperCase()},t))})}),(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsxs)("button",{className:"flex-1 btn-primary text-sm py-2",children:[(0,w.jsx)(se,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:"Contact"})]}),(0,w.jsx)("button",{className:"p-2 text-slate-400 hover:bg-slate-700 rounded-lg transition-all duration-300",children:(0,w.jsx)(b,{className:"h-4 w-4"})})]})]},e.id))})})]})]})};const ae=new class{constructor(){this.subscriptions=new Map,this.listeners=new Map}subscribeToPropertyCompliance(e,t){const r=`property_${e}`;this.listeners.set(r,t);const s=a.ND.channel(`compliance_${e}`).on("postgres_changes",{event:"*",schema:"public",table:"nyc_compliance_summary",filter:`nyc_property_id=in.(${e})`},t=>{console.log("\ud83d\udcca Compliance data updated:",t),this.handleComplianceUpdate(e,t)}).on("postgres_changes",{event:"*",schema:"public",table:"nyc_dob_violations",filter:`nyc_property_id=in.(${e})`},t=>{console.log("\ud83d\udea8 DOB violations updated:",t),this.handleViolationsUpdate(e,"dob",t)}).on("postgres_changes",{event:"*",schema:"public",table:"nyc_hpd_violations",filter:`nyc_property_id=in.(${e})`},t=>{console.log("\ud83c\udfe0 HPD violations updated:",t),this.handleViolationsUpdate(e,"hpd",t)}).on("postgres_changes",{event:"*",schema:"public",table:"nyc_elevator_inspections",filter:`nyc_property_id=in.(${e})`},t=>{console.log("\ud83c\udfe2 Elevator data updated:",t),this.handleEquipmentUpdate(e,"elevators",t)}).on("postgres_changes",{event:"*",schema:"public",table:"nyc_boiler_inspections",filter:`nyc_property_id=in.(${e})`},t=>{console.log("\ud83d\udd25 Boiler data updated:",t),this.handleEquipmentUpdate(e,"boilers",t)}).subscribe();return this.subscriptions.set(r,s),()=>{this.unsubscribeFromPropertyCompliance(e)}}subscribeToUserReports(e,t){const r=`user_reports_${e}`;this.listeners.set(r,t);const s=a.ND.channel(`reports_${e}`).on("postgres_changes",{event:"*",schema:"public",table:"compliance_reports",filter:`user_id=eq.${e}`},t=>{console.log("\ud83d\udccb Reports updated:",t),this.handleReportsUpdate(e,t)}).subscribe();return this.subscriptions.set(r,s),()=>{this.unsubscribeFromUserReports(e)}}subscribeToDashboard(e,t){const r=`dashboard_${e}`;this.listeners.set(r,t);const s=a.ND.channel(`dashboard_${e}`).on("postgres_changes",{event:"*",schema:"public",table:"properties",filter:`user_id=eq.${e}`},t=>{console.log("\ud83c\udfe2 Properties updated:",t),this.handleDashboardUpdate(e,"properties",t)}).on("postgres_changes",{event:"*",schema:"public",table:"compliance_reports",filter:`user_id=eq.${e}`},t=>{console.log("\ud83d\udcca Reports updated:",t),this.handleDashboardUpdate(e,"reports",t)}).subscribe();return this.subscriptions.set(r,s),()=>{this.unsubscribeFromDashboard(e)}}async handleComplianceUpdate(e,t){try{const r=await fetch(`/api/properties/${e}/compliance-data`),s=await r.json();if(s.success){const r=this.listeners.get(`property_${e}`);r&&r({type:"compliance_update",data:s,payload:t})}}catch(r){console.error("Error handling compliance update:",r)}}async handleViolationsUpdate(e,t,r){try{const s=this.listeners.get(`property_${e}`);s&&s({type:"violations_update",violationType:t,payload:r})}catch(s){console.error("Error handling violations update:",s)}}async handleEquipmentUpdate(e,t,r){try{const s=this.listeners.get(`property_${e}`);s&&s({type:"equipment_update",equipmentType:t,payload:r})}catch(s){console.error("Error handling equipment update:",s)}}async handleReportsUpdate(e,t){try{const r=this.listeners.get(`user_reports_${e}`);r&&r({type:"reports_update",payload:t})}catch(r){console.error("Error handling reports update:",r)}}async handleDashboardUpdate(e,t,r){try{const s=this.listeners.get(`dashboard_${e}`);s&&s({type:"dashboard_update",dataType:t,payload:r})}catch(s){console.error("Error handling dashboard update:",s)}}unsubscribeFromPropertyCompliance(e){const t=`property_${e}`,r=this.subscriptions.get(t);r&&(a.ND.removeChannel(r),this.subscriptions.delete(t)),this.listeners.delete(t)}unsubscribeFromUserReports(e){const t=`user_reports_${e}`,r=this.subscriptions.get(t);r&&(a.ND.removeChannel(r),this.subscriptions.delete(t)),this.listeners.delete(t)}unsubscribeFromDashboard(e){const t=`dashboard_${e}`,r=this.subscriptions.get(t);r&&(a.ND.removeChannel(r),this.subscriptions.delete(t)),this.listeners.delete(t)}cleanup(){this.subscriptions.forEach(e=>{a.ND.removeChannel(e)}),this.subscriptions.clear(),this.listeners.clear()}async getPropertyComplianceData(e){try{const t=await fetch(`/api/properties/${e}/compliance-data`),r=await t.json();if(r.success)return r;throw new Error(r.error||"Failed to fetch compliance data")}catch(t){throw console.error("Error fetching property compliance data:",t),t}}async syncPropertyData(e){try{const t=await fetch(`/api/properties/${e}/sync`,{method:"POST",headers:{"Content-Type":"application/json"}}),r=await t.json();if(r.success)return r;throw new Error(r.error||"Failed to sync property data")}catch(t){throw console.error("Error syncing property data:",t),t}}async getDashboardOverview(e){try{const t=await fetch(`/api/dashboard/overview?user_id=${e}`),r=await t.json();if(r.success)return r;throw new Error(r.error||"Failed to fetch dashboard data")}catch(t){throw console.error("Error fetching dashboard overview:",t),t}}},ie=l("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),oe=l("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]),le=l("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),ce=l("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),de=l("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),ue=l("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),he=l("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),pe=l("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),fe=l("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),me=e=>{var t,r;let{reportId:n,onClose:i}=e;const{theme:o,isDark:l}=X(),[c,d]=(0,s.useState)(null),[h,p]=(0,s.useState)(!0),[m,g]=(0,s.useState)({hpdViolations:!1,dobViolations:!1,elevatorEquipment:!1,boilerEquipment:!1,electricalPermits:!1}),[v,x]=(0,s.useState)(""),[y,b]=(0,s.useState)(""),[_,j]=(0,s.useState)(!1),[k,S]=(0,s.useState)(!1);(0,s.useEffect)(()=>{n&&C()},[n]),(0,s.useEffect)(()=>{if(c&&c.properties){const e=ae.subscribeToPropertyCompliance(c.properties.id,e=>{switch(console.log("\ud83d\udcca Real-time update received:",e),S(!0),e.type){case"compliance_update":e.data&&e.data.compliance_summary&&d(t=>({...t,compliance_score:e.data.compliance_summary.compliance_score,risk_level:e.data.compliance_summary.risk_level,ai_analysis:{...t.ai_analysis,violations:e.data.violations,equipment:e.data.equipment}}));break;case"violations_update":d(t=>{var r;return{...t,ai_analysis:{...t.ai_analysis,violations:{...null===(r=t.ai_analysis)||void 0===r?void 0:r.violations,[e.violationType]:e.payload.new||e.payload.old}}}});break;case"equipment_update":d(t=>{var r;return{...t,ai_analysis:{...t.ai_analysis,equipment:{...null===(r=t.ai_analysis)||void 0===r?void 0:r.equipment,[e.equipmentType]:e.payload.new||e.payload.old}}}})}});return()=>{e()}}},[c]);const C=async()=>{try{p(!0);const e="http://localhost:5001",t=await fetch(`${e}/api/compliance-reports/${n}`),r=await t.json();if(!r.success)throw new Error(r.error||"Failed to fetch report");d(r.report)}catch(e){console.error("Error fetching report:",e);try{const{data:e,error:t}=await a.ND.from("compliance_reports").select("\n            *,\n            properties (\n              id,\n              address,\n              city,\n              state,\n              zip_code,\n              property_type,\n              units,\n              year_built,\n              square_footage\n            )\n          ").eq("id",n).single();if(t)throw t;d(e)}catch(t){console.error("Fallback fetch also failed:",t)}}finally{p(!1)}},E=e=>{g(t=>({...t,[e]:!t[e]}))},P=e=>e>=90?{bg:"bg-green-100",text:"text-green-800",border:"border-green-200",label:"EXCELLENT"}:e>=75?{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200",label:"GOOD"}:e>=60?{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-200",label:"CAUTION"}:{bg:"bg-red-100",text:"text-red-800",border:"border-red-200",label:"CRITICAL"},T=e=>{const t={LOW:{bg:"bg-green-100",text:"text-green-700"},MEDIUM:{bg:"bg-yellow-100",text:"text-yellow-700"},HIGH:{bg:"bg-orange-100",text:"text-orange-700"},CRITICAL:{bg:"bg-red-100",text:"text-red-700"}};return t[e]||t.MEDIUM},I=async()=>{if(v.trim())try{j(!0);const e=await fetch("/api/ai-questions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:v,reportId:n,context:null===c||void 0===c?void 0:c.ai_analysis})}),t=await e.json();b(t.response)}catch(e){console.error("Error asking AI question:",e),b("Sorry, I encountered an error. Please try again.")}finally{j(!1)}},O=async()=>{try{var e,t;const r=await fetch(`/api/reports/${n}/download`),s=await r.blob(),a=window.URL.createObjectURL(s),i=document.createElement("a");i.href=a,i.download=`compliance-report-${null===c||void 0===c||null===(e=c.properties)||void 0===e||null===(t=e.address)||void 0===t?void 0:t.replace(/\s+/g,"-")}-${(new Date).toISOString().split("T")[0]}.pdf`,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(a),document.body.removeChild(i)}catch(r){console.error("Error downloading report:",r)}};if(h)return(0,w.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,w.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!c)return(0,w.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)(D,{className:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),(0,w.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Report Not Found"}),(0,w.jsx)("p",{className:"text-gray-600 mb-4",children:"The requested compliance report could not be found."}),(0,w.jsx)("button",{onClick:i,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go Back"})]})});const A=c.ai_analysis||{},R=(A.violations,A.equipment,c.hpd_violations_data?JSON.parse(c.hpd_violations_data):[]),U=c.dob_violations_data?JSON.parse(c.dob_violations_data):[],M=c.elevator_data?JSON.parse(c.elevator_data):[],F=c.boiler_data?JSON.parse(c.boiler_data):[],B=c.electrical_data?JSON.parse(c.electrical_data):[];return(0,w.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,w.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,w.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,w.jsxs)("div",{className:"flex items-center justify-between py-6",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,w.jsx)("button",{onClick:i,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,w.jsx)(L,{className:"h-6 w-6"})}),(0,w.jsxs)("div",{children:[(0,w.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Compliance Report"}),(0,w.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,w.jsx)(z,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:null===(t=c.properties)||void 0===t?void 0:t.address})]})]})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[k&&(0,w.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-2 bg-green-100 text-green-800 rounded-lg",children:[(0,w.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,w.jsx)("span",{className:"text-sm font-medium",children:"Live Updates"})]}),(0,w.jsxs)("button",{onClick:async()=>{try{var e;if(null===c||void 0===c||null===(e=c.properties)||void 0===e||!e.id)return;p(!0);const t=await ae.syncPropertyData(c.properties.id);t.success?(console.log("\u2705 Property data synced successfully"),await C()):console.error("\u274c Sync failed:",t.error)}catch(t){console.error("Error syncing property data:",t)}finally{p(!1)}},disabled:h,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,w.jsx)(le,{className:"h-4 w-4 "+(h?"animate-spin":"")}),(0,w.jsx)("span",{children:"Sync Data"})]}),(0,w.jsxs)("button",{onClick:O,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,w.jsx)(ie,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:"Download PDF"})]}),(0,w.jsx)("button",{onClick:C,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,w.jsx)(le,{className:"h-5 w-5"})})]})]})})}),(0,w.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,w.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,w.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,w.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,w.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Overall Compliance Score"}),(0,w.jsxs)("div",{className:"text-sm text-gray-500",children:["Generated: ",new Date(c.generated_at).toLocaleDateString()]})]}),(0,w.jsx)("div",{className:"flex items-center justify-center",children:(0,w.jsx)("div",{className:`relative w-48 h-48 rounded-full flex items-center justify-center ${P(c.compliance_score).bg} ${P(c.compliance_score).border} border-4`,children:(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)("div",{className:`text-6xl font-bold ${P(c.compliance_score).text}`,children:c.compliance_score}),(0,w.jsx)("div",{className:"text-lg text-gray-600 font-medium",children:"Score"})]})})}),(0,w.jsx)("div",{className:"mt-6 text-center",children:(0,w.jsx)("div",{className:`inline-flex px-6 py-3 rounded-full ${P(c.compliance_score).bg} ${P(c.compliance_score).text} font-bold text-lg`,children:P(c.compliance_score).label})}),(0,w.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[(0,w.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,w.jsx)(D,{className:"h-5 w-5 text-red-600"}),(0,w.jsx)("span",{className:"text-sm text-gray-600",children:"Total Violations"})]}),(0,w.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:(c.hpd_violations_total||0)+(c.dob_violations_total||0)})]}),(0,w.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,w.jsx)(u,{className:`h-5 w-5 ${T(c.risk_level).text}`}),(0,w.jsx)("span",{className:"text-sm text-gray-600",children:"Risk Level"})]}),(0,w.jsx)("div",{className:`text-3xl font-bold ${T(c.risk_level).text}`,children:c.risk_level||"MEDIUM"})]})]}),(0,w.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[(0,w.jsxs)("div",{className:"bg-blue-50 p-4 rounded-xl",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,w.jsx)(ce,{className:"h-5 w-5 text-blue-600"}),(0,w.jsx)("span",{className:"text-sm text-gray-600",children:"HPD Score"})]}),(0,w.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[c.hpd_compliance_score||0,"%"]})]}),(0,w.jsxs)("div",{className:"bg-red-50 p-4 rounded-xl",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,w.jsx)(D,{className:"h-5 w-5 text-red-600"}),(0,w.jsx)("span",{className:"text-sm text-gray-600",children:"DOB Score"})]}),(0,w.jsxs)("div",{className:"text-2xl font-bold text-red-600",children:[c.dob_compliance_score||0,"%"]})]}),(0,w.jsxs)("div",{className:"bg-blue-50 p-4 rounded-xl",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,w.jsx)($,{className:"h-5 w-5 text-blue-600"}),(0,w.jsx)("span",{className:"text-sm text-gray-600",children:"Elevator Score"})]}),(0,w.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[c.elevator_compliance_score||0,"%"]})]}),(0,w.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-xl",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,w.jsx)(de,{className:"h-5 w-5 text-yellow-600"}),(0,w.jsx)("span",{className:"text-sm text-gray-600",children:"Electrical Score"})]}),(0,w.jsxs)("div",{className:"text-2xl font-bold text-yellow-600",children:[c.electrical_compliance_score||0,"%"]})]})]})]}),(0,w.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[(0,w.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Property Location"}),(0,w.jsx)("div",{className:"h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)(z,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),(0,w.jsx)("p",{className:"text-gray-600",children:"Map integration coming soon"}),(0,w.jsx)("p",{className:"text-sm text-gray-500",children:null===(r=c.properties)||void 0===r?void 0:r.address})]})})]}),(0,w.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,w.jsx)(ue,{className:"h-5 w-5 text-blue-600"}),(0,w.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Ask Compliance Questions"})]}),(0,w.jsxs)("div",{className:"space-y-4",children:[(0,w.jsxs)("div",{className:"flex space-x-3",children:[(0,w.jsx)("input",{type:"text",value:v,onChange:e=>x(e.target.value),placeholder:"Ask about violations, equipment, or compliance requirements...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyPress:e=>"Enter"===e.key&&I()}),(0,w.jsx)("button",{onClick:I,disabled:_||!v.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:_?(0,w.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,w.jsx)(he,{className:"h-5 w-5"})})]}),y&&(0,w.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,w.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,w.jsx)(ue,{className:"h-5 w-5 text-blue-600 mt-1"}),(0,w.jsx)("div",{children:(0,w.jsx)("p",{className:"text-gray-800",children:y})})]})})]})]}),(0,w.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 border-2 border-blue-100",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,w.jsx)(N,{className:"h-5 w-5 text-blue-600"}),(0,w.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Property Summary"})]}),(0,w.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,w.jsxs)("div",{className:"bg-white p-3 rounded-lg",children:[(0,w.jsx)("div",{className:"text-gray-600",children:"BIN"}),(0,w.jsx)("div",{className:"font-bold",children:c.bin||"N/A"})]}),(0,w.jsxs)("div",{className:"bg-white p-3 rounded-lg",children:[(0,w.jsx)("div",{className:"text-gray-600",children:"BBL"}),(0,w.jsx)("div",{className:"font-bold",children:c.bbl||"N/A"})]}),(0,w.jsxs)("div",{className:"bg-white p-3 rounded-lg",children:[(0,w.jsx)("div",{className:"text-gray-600",children:"Borough"}),(0,w.jsx)("div",{className:"font-bold",children:c.borough||"N/A"})]}),(0,w.jsxs)("div",{className:"bg-white p-3 rounded-lg",children:[(0,w.jsx)("div",{className:"text-gray-600",children:"Zip Code"}),(0,w.jsx)("div",{className:"font-bold",children:c.zip_code||"N/A"})]})]})]}),(0,w.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl p-6 border-2 border-green-100",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,w.jsx)(N,{className:"h-5 w-5 text-green-600"}),(0,w.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Detailed Compliance Analysis"})]}),(0,w.jsx)("p",{className:"text-gray-600 text-sm",children:"Click on any category to view detailed information"})]}),(0,w.jsxs)("div",{className:"border-2 border-gray-200 rounded-2xl overflow-hidden",children:[(0,w.jsxs)("button",{onClick:()=>E("hpdViolations"),className:"w-full flex items-center justify-between p-6 bg-white hover:bg-gray-50 transition-colors",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,w.jsx)("div",{className:"p-3 bg-purple-100 rounded-xl",children:(0,w.jsx)(ce,{className:"h-6 w-6 text-purple-600"})}),(0,w.jsxs)("div",{className:"text-left",children:[(0,w.jsx)("h4",{className:"font-bold text-gray-900",children:"HPD Violations"}),(0,w.jsxs)("p",{className:"text-sm text-gray-600",children:[c.hpd_violations_total||0," total, ",c.hpd_violations_active||0," active"]})]})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,w.jsx)("span",{className:"text-sm text-gray-500",children:"Housing Preservation & Development violations"}),m.hpdViolations?(0,w.jsx)(pe,{className:"h-5 w-5"}):(0,w.jsx)(L,{className:"h-5 w-5"})]})]}),m.hpdViolations&&(0,w.jsx)("div",{className:"bg-gray-50 p-6 border-t-2 border-gray-200",children:R&&R.length>0?(0,w.jsx)("div",{className:"space-y-3",children:R.slice(0,10).map((e,t)=>(0,w.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-purple-100",children:[(0,w.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,w.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-medium "+("A"===e.violation_class?"bg-red-100 text-red-800":"B"===e.violation_class?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:["Class ",e.violation_class||"N/A"]}),(0,w.jsx)("span",{className:"text-xs text-gray-500",children:e.inspection_date||"N/A"})]}),(0,w.jsxs)("div",{className:"text-sm text-gray-700",children:["Status: ",e.violation_status||"N/A"]}),(0,w.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["ID: ",e.violation_id||"N/A"]})]},t))}):(0,w.jsx)("div",{className:"text-center py-8 text-gray-500",children:0===c.hpd_violations_total?"No HPD violations found":"HPD violation details not available"})})]}),(0,w.jsxs)("div",{className:"border-2 border-gray-200 rounded-2xl overflow-hidden",children:[(0,w.jsxs)("button",{onClick:()=>E("dobViolations"),className:"w-full flex items-center justify-between p-6 bg-white hover:bg-gray-50 transition-colors",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,w.jsx)("div",{className:"p-3 bg-red-100 rounded-xl",children:(0,w.jsx)(D,{className:"h-6 w-6 text-red-600"})}),(0,w.jsxs)("div",{className:"text-left",children:[(0,w.jsx)("h4",{className:"font-bold text-gray-900",children:"DOB Violations"}),(0,w.jsxs)("p",{className:"text-sm text-gray-600",children:[c.dob_violations_total||0," total, ",c.dob_violations_active||0," active"]})]})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,w.jsx)("span",{className:"text-sm text-gray-500",children:"Building code and construction violations"}),m.dobViolations?(0,w.jsx)(pe,{className:"h-5 w-5"}):(0,w.jsx)(L,{className:"h-5 w-5"})]})]}),m.dobViolations&&(0,w.jsx)("div",{className:"bg-gray-50 p-6 border-t-2 border-gray-200",children:U&&U.length>0?(0,w.jsx)("div",{className:"space-y-3",children:U.slice(0,10).map((e,t)=>(0,w.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-red-100",children:[(0,w.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,w.jsx)("div",{children:(0,w.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium "+("FIRE"===e.violation_category?"bg-red-100 text-red-800":"STRUCTURAL"===e.violation_category?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"),children:e.violation_category||"GENERAL"})}),(0,w.jsx)("span",{className:"text-xs text-gray-500",children:e.issue_date||"N/A"})]}),(0,w.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-1",children:e.violation_type||"N/A"}),(0,w.jsxs)("div",{className:"text-xs text-gray-600",children:["ID: ",e.violation_number||"N/A"]}),(0,w.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Status: ",e.status||"N/A"]})]},t))}):(0,w.jsx)("div",{className:"text-center py-8 text-gray-500",children:0===c.dob_violations_total?"No DOB violations found":"DOB violation details not available"})})]}),(0,w.jsxs)("div",{className:"border-2 border-gray-200 rounded-2xl overflow-hidden",children:[(0,w.jsxs)("button",{onClick:()=>E("elevatorEquipment"),className:"w-full flex items-center justify-between p-6 bg-white hover:bg-gray-50 transition-colors",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,w.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl",children:(0,w.jsx)($,{className:"h-6 w-6 text-blue-600"})}),(0,w.jsxs)("div",{className:"text-left",children:[(0,w.jsx)("h4",{className:"font-bold text-gray-900",children:"Elevator Equipment"}),(0,w.jsxs)("p",{className:"text-sm text-gray-600",children:[c.elevator_devices_total||0," total, ",c.elevator_devices_active||0," active"]})]})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,w.jsx)("span",{className:"text-sm text-gray-500",children:"Elevator inspection records"}),m.elevatorEquipment?(0,w.jsx)(pe,{className:"h-5 w-5"}):(0,w.jsx)(L,{className:"h-5 w-5"})]})]}),m.elevatorEquipment&&(0,w.jsx)("div",{className:"bg-gray-50 p-6 border-t-2 border-gray-200",children:M&&M.length>0?(0,w.jsxs)("div",{className:"space-y-3",children:[(0,w.jsxs)("div",{className:"grid grid-cols-4 gap-4 px-4 py-2 bg-white rounded-lg font-semibold text-sm text-gray-700",children:[(0,w.jsx)("div",{children:"Device ID"}),(0,w.jsx)("div",{children:"Latest Inspection"}),(0,w.jsx)("div",{children:"Status"}),(0,w.jsx)("div",{children:"Type"})]}),M.slice(0,10).map((e,t)=>(0,w.jsxs)("div",{className:"grid grid-cols-4 gap-4 px-4 py-3 bg-white rounded-lg hover:bg-blue-50 transition-colors",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:"font-bold text-gray-900",children:e.device_id}),(0,w.jsx)("div",{className:"text-xs text-gray-500",children:e.device_name})]}),(0,w.jsx)("div",{className:"text-gray-700",children:e.latest_inspection_date||"N/A"}),(0,w.jsx)("div",{children:(0,w.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("Active"===e.device_status?"bg-green-100 text-green-800":"Removed"===e.device_status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.device_status||"UNKNOWN"})}),(0,w.jsx)("div",{className:"text-sm text-gray-600",children:e.device_type||"Elevator"})]},t))]}):(0,w.jsx)("div",{className:"text-center py-8 text-gray-500",children:0===c.elevator_devices_total?"No elevator data available":"Elevator details not available"})})]}),(0,w.jsxs)("div",{className:"border-2 border-gray-200 rounded-2xl overflow-hidden",children:[(0,w.jsxs)("button",{onClick:()=>E("boilerEquipment"),className:"w-full flex items-center justify-between p-6 bg-white hover:bg-gray-50 transition-colors",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,w.jsx)("div",{className:"p-3 bg-orange-100 rounded-xl",children:(0,w.jsx)(fe,{className:"h-6 w-6 text-orange-600"})}),(0,w.jsxs)("div",{className:"text-left",children:[(0,w.jsx)("h4",{className:"font-bold text-gray-900",children:"Boiler Equipment"}),(0,w.jsxs)("p",{className:"text-sm text-gray-600",children:[c.boiler_devices_total||0," total, ",c.boiler_devices_total||0," active"]})]})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,w.jsx)("span",{className:"text-sm text-gray-500",children:"Boiler inspection records"}),m.boilerEquipment?(0,w.jsx)(pe,{className:"h-5 w-5"}):(0,w.jsx)(L,{className:"h-5 w-5"})]})]}),m.boilerEquipment&&(0,w.jsx)("div",{className:"bg-gray-50 p-6 border-t-2 border-gray-200",children:F&&F.length>0?(0,w.jsxs)("div",{className:"space-y-3",children:[(0,w.jsxs)("div",{className:"grid grid-cols-4 gap-4 px-4 py-2 bg-white rounded-lg font-semibold text-sm text-gray-700",children:[(0,w.jsx)("div",{children:"Device ID"}),(0,w.jsx)("div",{children:"Latest Inspection"}),(0,w.jsx)("div",{children:"Status"}),(0,w.jsx)("div",{children:"Defects"})]}),F.slice(0,10).map((e,t)=>(0,w.jsxs)("div",{className:"grid grid-cols-4 gap-4 px-4 py-3 bg-white rounded-lg hover:bg-orange-50 transition-colors",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:"font-bold text-gray-900",children:e.device_id}),(0,w.jsx)("div",{className:"text-xs text-gray-500",children:e.device_name})]}),(0,w.jsx)("div",{className:"text-gray-700",children:e.latest_inspection_date||"N/A"}),(0,w.jsx)("div",{children:(0,w.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("Active"===e.device_status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.device_status||"UNKNOWN"})}),(0,w.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,w.jsx)(f,{className:"h-4 w-4 text-green-600"}),(0,w.jsx)("span",{className:"text-sm font-medium text-green-600",children:"No"===e.defects_exist?"No":"Yes"})]})]},t))]}):(0,w.jsx)("div",{className:"text-center py-8 text-gray-500",children:0===c.boiler_devices_total?"No boiler data available":"Boiler details not available"})})]}),(0,w.jsxs)("div",{className:"border-2 border-gray-200 rounded-2xl overflow-hidden",children:[(0,w.jsxs)("button",{onClick:()=>E("electricalPermits"),className:"w-full flex items-center justify-between p-6 bg-white hover:bg-gray-50 transition-colors",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,w.jsx)("div",{className:"p-3 bg-yellow-100 rounded-xl",children:(0,w.jsx)(de,{className:"h-6 w-6 text-yellow-600"})}),(0,w.jsxs)("div",{className:"text-left",children:[(0,w.jsx)("h4",{className:"font-bold text-gray-900",children:"Electrical Permits"}),(0,w.jsxs)("p",{className:"text-sm text-gray-600",children:[c.electrical_permits_total||0," total, ",c.electrical_permits_active||0," active"]})]})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,w.jsx)("span",{className:"text-sm text-gray-500",children:"Electrical permit applications"}),m.electricalPermits?(0,w.jsx)(pe,{className:"h-5 w-5"}):(0,w.jsx)(L,{className:"h-5 w-5"})]})]}),m.electricalPermits&&(0,w.jsx)("div",{className:"bg-gray-50 p-6 border-t-2 border-gray-200",children:B&&B.length>0?(0,w.jsxs)("div",{className:"space-y-3",children:[(0,w.jsxs)("div",{className:"grid grid-cols-4 gap-4 px-4 py-2 bg-white rounded-lg font-semibold text-sm text-gray-700",children:[(0,w.jsx)("div",{children:"Filing Number"}),(0,w.jsx)("div",{children:"Filing Date"}),(0,w.jsx)("div",{children:"Status"}),(0,w.jsx)("div",{children:"Job Description"})]}),B.slice(0,10).map((e,t)=>(0,w.jsxs)("div",{className:"grid grid-cols-4 gap-4 px-4 py-3 bg-white rounded-lg hover:bg-yellow-50 transition-colors",children:[(0,w.jsx)("div",{className:"font-bold text-gray-900",children:e.filing_number||"N/A"}),(0,w.jsx)("div",{className:"text-gray-700",children:e.filing_date||"N/A"}),(0,w.jsx)("div",{children:(0,w.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("Complete"===e.filing_status?"bg-green-100 text-green-800":"Permit Issued"===e.filing_status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.filing_status||"UNKNOWN"})}),(0,w.jsx)("div",{className:"text-sm text-gray-600 truncate",children:e.job_description||"N/A"})]},t))]}):(0,w.jsx)("div",{className:"text-center py-8 text-gray-500",children:0===c.electrical_permits_total?"No electrical permit data available":"Electrical permit details not available"})})]})]}),(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[(0,w.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Report Information"}),(0,w.jsxs)("div",{className:"space-y-3",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("span",{className:"text-sm text-gray-600",children:"Report ID"}),(0,w.jsx)("div",{className:"font-mono text-sm text-gray-900",children:c.id})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("span",{className:"text-sm text-gray-600",children:"Generated"}),(0,w.jsx)("div",{className:"text-sm text-gray-900",children:new Date(c.generated_at).toLocaleString()})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("span",{className:"text-sm text-gray-600",children:"Status"}),(0,w.jsx)("div",{className:"text-sm text-gray-900",children:c.status})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("span",{className:"text-sm text-gray-600",children:"Downloads"}),(0,w.jsx)("div",{className:"text-sm text-gray-900",children:c.download_count||0})]})]})]}),(0,w.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[(0,w.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Quick Actions"}),(0,w.jsxs)("div",{className:"space-y-3",children:[(0,w.jsxs)("button",{onClick:O,className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-gray-50 rounded-lg transition-colors",children:[(0,w.jsx)(ie,{className:"h-5 w-5 text-gray-600"}),(0,w.jsx)("span",{className:"text-gray-900",children:"Download PDF"})]}),(0,w.jsxs)("button",{className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-gray-50 rounded-lg transition-colors",children:[(0,w.jsx)(oe,{className:"h-5 w-5 text-gray-600"}),(0,w.jsx)("span",{className:"text-gray-900",children:"Share Report"})]}),(0,w.jsxs)("button",{className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-gray-50 rounded-lg transition-colors",children:[(0,w.jsx)(te,{className:"h-5 w-5 text-gray-600"}),(0,w.jsx)("span",{className:"text-gray-900",children:"Add to Favorites"})]})]})]}),c.recommendations&&c.recommendations.length>0&&(0,w.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[(0,w.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Recommendations"}),(0,w.jsx)("div",{className:"space-y-3",children:c.recommendations.slice(0,5).map((e,t)=>(0,w.jsx)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,w.jsx)("div",{className:"text-sm text-gray-800",children:e})},t))})]})]})]})})]})},ge=e=>{let{user:t,properties:n}=e;const{theme:i,isDark:o}=X(),[l,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(!1),[h,p]=(0,s.useState)(""),[m,g]=(0,s.useState)("all"),[v,x]=(0,s.useState)("all"),[y,_]=(0,s.useState)(null),[S,C]=(0,s.useState)(null),[E,P]=(0,s.useState)(!1);(0,s.useEffect)(()=>{T()},[t.id]),(0,s.useEffect)(()=>{if(null!==t&&void 0!==t&&t.id){const e=ae.subscribeToUserReports(t.id,e=>{console.log("\ud83d\udccb Reports update received:",e),P(!0),"reports_update"===e.type&&T()});return()=>{e()}}},[null===t||void 0===t?void 0:t.id]);const T=async()=>{try{u(!0);const e="http://localhost:5001",r=await fetch(`${e}/api/compliance-reports?user_id=${t.id}`),s=await r.json();if(!s.success)throw new Error(s.error||"Failed to fetch reports");const n=(s.reports||[]).map(e=>{var t,r,s,n,a;return{id:e.id,title:`Compliance Report - ${(null===(t=e.properties)||void 0===t?void 0:t.address)||"Unknown Property"}`,type:"compliance",status:e.status,property_address:null===(r=e.properties)||void 0===r?void 0:r.address,property_id:e.property_id,compliance_score:e.compliance_score,risk_level:e.risk_level,violations_count:e.violations?(null===(s=JSON.parse(e.violations).hpd)||void 0===s?void 0:s.length)+(null===(n=JSON.parse(e.violations).dob)||void 0===n?void 0:n.length):0,created_at:e.generated_at,updated_at:e.updated_at,file_size:"2.3 MB",format:"PDF",description:`Comprehensive compliance analysis with ${e.compliance_score}% score`,tags:["compliance","ai-generated",null===(a=e.risk_level)||void 0===a?void 0:a.toLowerCase()],downloads:e.download_count||0,shared:0,ai_analysis:e.ai_analysis,recommendations:e.recommendations}});c(n)}catch(e){console.error("Error fetching reports:",e);try{const{data:e,error:r}=await a.ND.from("compliance_reports").select("\n            *,\n            properties (\n              id,\n              address,\n              city,\n              state,\n              zip_code,\n              property_type\n            )\n          ").eq("user_id",t.id).order("generated_at",{ascending:!1});if(r)throw r;const s=e.map(e=>{var t,r,s,n,a;return{id:e.id,title:`Compliance Report - ${(null===(t=e.properties)||void 0===t?void 0:t.address)||"Unknown Property"}`,type:"compliance",status:e.status,property_address:null===(r=e.properties)||void 0===r?void 0:r.address,property_id:e.property_id,compliance_score:e.compliance_score,risk_level:e.risk_level,violations_count:e.violations?(null===(s=JSON.parse(e.violations).hpd)||void 0===s?void 0:s.length)+(null===(n=JSON.parse(e.violations).dob)||void 0===n?void 0:n.length):0,created_at:e.generated_at,updated_at:e.updated_at,file_size:"2.3 MB",format:"PDF",description:`Comprehensive compliance analysis with ${e.compliance_score}% score`,tags:["compliance","ai-generated",null===(a=e.risk_level)||void 0===a?void 0:a.toLowerCase()],downloads:e.download_count||0,shared:0,ai_analysis:e.ai_analysis,recommendations:e.recommendations}});c(s)}catch(r){console.error("Fallback fetch also failed:",r)}}finally{u(!1)}},I=e=>{switch(e){case"compliance":return(0,w.jsx)(f,{className:"h-5 w-5 text-emerald-500"});case"inspection":return(0,w.jsx)($,{className:"h-5 w-5 text-corporate-500"});case"analysis":return(0,w.jsx)(j,{className:"h-5 w-5 text-gold-500"});case"certificate":return(0,w.jsx)(N,{className:"h-5 w-5 text-purple-500"});default:return(0,w.jsx)(N,{className:"h-5 w-5 text-slate-400"})}},O=e=>{switch(e){case"compliance":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"inspection":return"bg-corporate-100 text-corporate-800 border-corporate-200";case"analysis":return"bg-gold-100 text-gold-800 border-gold-200";case"certificate":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-slate-100 text-slate-800 border-slate-200"}},R=()=>{C(null)},L=e=>e>=90?{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"}:e>=75?{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"}:e>=60?{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-200"}:{bg:"bg-red-100",text:"text-red-800",border:"border-red-200"},M=e=>{const t={LOW:{bg:"bg-green-100",text:"text-green-700"},MEDIUM:{bg:"bg-yellow-100",text:"text-yellow-700"},HIGH:{bg:"bg-orange-100",text:"text-orange-700"},CRITICAL:{bg:"bg-red-100",text:"text-red-700"}};return t[e]||t.MEDIUM},z=e=>{switch(e){case"completed":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"in_progress":return"bg-corporate-100 text-corporate-800 border-corporate-200";case"pending":return"bg-gold-100 text-gold-800 border-gold-200";default:return"bg-slate-100 text-slate-800 border-slate-200"}},F=l.filter(e=>{const t=e.title.toLowerCase().includes(h.toLowerCase())||e.description.toLowerCase().includes(h.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(h.toLowerCase())),r="all"===m||e.type===m,s="all"===v||e.status===v;return t&&r&&s});return S?(0,w.jsx)(me,{reportId:S.id,onClose:R}):(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsx)("div",{className:"enterprise-card p-6",children:(0,w.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between",children:[(0,w.jsxs)("div",{className:"mb-4 lg:mb-0",children:[(0,w.jsx)("h1",{className:"text-3xl font-bold text-slate-100 mb-2",children:"Report Library"}),(0,w.jsx)("p",{className:"text-slate-400 text-lg",children:"Access and manage all your property compliance reports and documents"})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[E&&(0,w.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-2 bg-green-100 text-green-800 rounded-lg",children:[(0,w.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,w.jsx)("span",{className:"text-sm font-medium",children:"Live Updates"})]}),(0,w.jsxs)("button",{onClick:async()=>{try{if(u(!0),console.log("\ud83d\udd04 Manual report generation from Report Library..."),n&&n.length>0){const e=n[0];console.log("\ud83d\udccb Using property:",e);const{generateSampleReport:s}=await Promise.resolve().then(r.bind(r,768));await s(e,t.id),console.log("\u2705 Report generated successfully"),window.alert("\u2705 Report generated successfully! Refresh the page to see it."),T()}else window.alert("\u274c No properties found. Please add a property first.")}catch(e){console.error("\u274c Report generation failed:",e),window.alert("\u274c Failed to generate report. Please try again.")}finally{u(!1)}},className:"btn-primary",children:[(0,w.jsx)(A,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:"Generate Report"})]})]})]})}),(0,w.jsx)("div",{className:"enterprise-card p-6",children:(0,w.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,w.jsxs)("div",{className:"flex-1 relative",children:[(0,w.jsx)(U,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),(0,w.jsx)("input",{type:"text",placeholder:"Search reports...",value:h,onChange:e=>p(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-800 border border-slate-600 rounded-xl focus:ring-2 focus:ring-corporate-500 focus:border-corporate-500 transition-all duration-300 text-slate-200 placeholder-slate-400 hover:bg-slate-700"})]}),(0,w.jsxs)("select",{value:m,onChange:e=>g(e.target.value),className:"px-4 py-3 bg-slate-800 border border-slate-600 rounded-xl focus:ring-2 focus:ring-corporate-500 focus:border-corporate-500 transition-all duration-300 text-slate-200 hover:bg-slate-700",children:[(0,w.jsx)("option",{value:"all",children:"All Types"}),(0,w.jsx)("option",{value:"compliance",children:"Compliance"}),(0,w.jsx)("option",{value:"inspection",children:"Inspection"}),(0,w.jsx)("option",{value:"analysis",children:"Analysis"}),(0,w.jsx)("option",{value:"certificate",children:"Certificate"})]}),(0,w.jsxs)("select",{value:v,onChange:e=>x(e.target.value),className:"px-4 py-3 bg-slate-800 border border-slate-600 rounded-xl focus:ring-2 focus:ring-corporate-500 focus:border-corporate-500 transition-all duration-300 text-slate-200 hover:bg-slate-700",children:[(0,w.jsx)("option",{value:"all",children:"All Status"}),(0,w.jsx)("option",{value:"completed",children:"Completed"}),(0,w.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,w.jsx)("option",{value:"pending",children:"Pending"})]})]})}),(0,w.jsxs)("div",{className:"enterprise-card overflow-hidden",children:[(0,w.jsx)("div",{className:"enterprise-card-header",children:(0,w.jsxs)("h2",{className:"text-xl font-bold text-slate-100",children:["Reports (",F.length,")"]})}),(0,w.jsx)("div",{className:"p-6",children:d?(0,w.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-corporate-500"}),(0,w.jsx)("span",{className:"ml-3 text-slate-400",children:"Loading reports..."})]}):0===F.length?(0,w.jsxs)("div",{className:"text-center py-12",children:[(0,w.jsx)("div",{className:"w-16 h-16 bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,w.jsx)(N,{className:"h-8 w-8 text-slate-400"})}),(0,w.jsx)("p",{className:"text-slate-400 text-lg",children:"No reports found"}),(0,w.jsx)("p",{className:"text-slate-500 text-sm mt-2",children:"Generate your first report to get started"})]}):(0,w.jsx)("div",{className:"space-y-4",children:F.map(e=>(0,w.jsx)("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6 hover:bg-slate-750 transition-all duration-300",children:(0,w.jsxs)("div",{className:"flex items-start justify-between",children:[(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[I(e.type),(0,w.jsx)("h3",{className:"text-lg font-semibold text-slate-100",children:e.title}),(0,w.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${O(e.type)}`,children:e.type.toUpperCase()}),(0,w.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${z(e.status)}`,children:e.status.replace("_"," ").toUpperCase()})]}),(0,w.jsx)("p",{className:"text-slate-400 mb-3",children:e.description}),(0,w.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-slate-500 mb-4",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)($,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:e.property_address})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(k,{className:"h-4 w-4"}),(0,w.jsxs)("span",{children:["Created: ",new Date(e.created_at).toLocaleDateString()]})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(N,{className:"h-4 w-4"}),(0,w.jsxs)("span",{children:[e.format," \u2022 ",e.file_size]})]})]}),void 0!==e.compliance_score&&(0,w.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,w.jsx)("div",{className:`px-3 py-2 rounded-lg border ${L(e.compliance_score).bg} ${L(e.compliance_score).text} ${L(e.compliance_score).border}`,children:(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(j,{className:"h-4 w-4"}),(0,w.jsxs)("span",{className:"font-semibold",children:["Score: ",e.compliance_score,"%"]})]})}),e.risk_level&&(0,w.jsx)("div",{className:`px-3 py-2 rounded-lg border ${M(e.risk_level).bg} ${M(e.risk_level).text}`,children:(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(D,{className:"h-4 w-4"}),(0,w.jsxs)("span",{className:"font-semibold",children:["Risk: ",e.risk_level]})]})}),e.violations_count>0&&(0,w.jsx)("div",{className:"px-3 py-2 rounded-lg border bg-red-100 text-red-800 border-red-200",children:(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(D,{className:"h-4 w-4"}),(0,w.jsxs)("span",{className:"font-semibold",children:[e.violations_count," Violations"]})]})})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-slate-500",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,w.jsx)(ie,{className:"h-4 w-4"}),(0,w.jsxs)("span",{children:[e.downloads," downloads"]})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,w.jsx)(oe,{className:"h-4 w-4"}),(0,w.jsxs)("span",{children:[e.shared," shared"]})]})]}),(0,w.jsx)("div",{className:"flex flex-wrap gap-2 mt-3",children:e.tags.map((e,t)=>(0,w.jsxs)("span",{className:"px-2 py-1 bg-slate-700 text-slate-300 rounded-full text-xs",children:["#",e]},t))})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,w.jsx)("button",{onClick:()=>(e=>{C(e)})(e),className:"p-2 text-corporate-400 hover:bg-corporate-500/20 rounded-lg transition-all duration-300",title:"View Report",children:(0,w.jsx)(b,{className:"h-4 w-4"})}),(0,w.jsx)("button",{className:"p-2 text-emerald-400 hover:bg-emerald-500/20 rounded-lg transition-all duration-300",children:(0,w.jsx)(ie,{className:"h-4 w-4"})}),(0,w.jsx)("button",{className:"p-2 text-slate-400 hover:bg-slate-700 rounded-lg transition-all duration-300",children:(0,w.jsx)(oe,{className:"h-4 w-4"})})]})]})},e.id))})})]})]})},ve=e=>{var t;let{user:r,properties:n}=e;const{theme:a,isDark:i}=X(),[o,l]=(0,s.useState)([]),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(""),[p,g]=(0,s.useState)("all"),[v,x]=(0,s.useState)("all"),[y,_]=(0,s.useState)(null);(0,s.useEffect)(()=>{j()},[r.id]);const j=async()=>{try{var e,t,r,s,a,i;d(!0);const o=[{id:1,title:"Schedule Fire Safety Inspection",description:"Contact NYC Fire Department to schedule annual fire safety inspection",property_id:null===(e=n[0])||void 0===e?void 0:e.id,property_address:(null===(t=n[0])||void 0===t?void 0:t.address)||"140 W 28th St, New York, NY 10001",status:"pending",priority:"high",due_date:"2024-02-15",created_at:"2024-01-15",category:"Safety",assigned_to:"Property Manager",tags:["fire_safety","inspection","urgent"]},{id:2,title:"Boiler Maintenance",description:"Schedule annual boiler maintenance and inspection",property_id:null===(r=n[0])||void 0===r?void 0:r.id,property_address:(null===(s=n[0])||void 0===s?void 0:s.address)||"140 W 28th St, New York, NY 10001",status:"in_progress",priority:"medium",due_date:"2024-03-01",created_at:"2024-01-10",category:"HVAC",assigned_to:"Maintenance Team",tags:["boiler","maintenance","hvac"]},{id:3,title:"Elevator Certification",description:"Renew elevator safety certification with NYC DOB",property_id:null===(a=n[0])||void 0===a?void 0:a.id,property_address:(null===(i=n[0])||void 0===i?void 0:i.address)||"140 W 28th St, New York, NY 10001",status:"completed",priority:"high",due_date:"2024-01-30",created_at:"2024-01-05",category:"Safety",assigned_to:"Property Manager",tags:["elevator","certification","safety"]}];l(o)}catch(o){console.error("Error fetching todos:",o)}finally{d(!1)}},N=e=>{switch(e){case"completed":return(0,w.jsx)(f,{className:"h-5 w-5 text-emerald-500"});case"in_progress":return(0,w.jsx)(G,{className:"h-5 w-5 text-corporate-500"});case"pending":return(0,w.jsx)(D,{className:"h-5 w-5 text-gold-500"});case"overdue":return(0,w.jsx)(D,{className:"h-5 w-5 text-ruby-500"});default:return(0,w.jsx)(k,{className:"h-5 w-5 text-slate-400"})}},S=e=>{switch(e){case"completed":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"in_progress":return"bg-corporate-100 text-corporate-800 border-corporate-200";case"pending":return"bg-gold-100 text-gold-800 border-gold-200";case"overdue":return"bg-ruby-100 text-ruby-800 border-ruby-200";default:return"bg-slate-100 text-slate-800 border-slate-200"}},C=e=>{switch(e){case"high":return"bg-ruby-100 text-ruby-800 border-ruby-200";case"medium":return"bg-gold-100 text-gold-800 border-gold-200";case"low":return"bg-emerald-100 text-emerald-800 border-emerald-200";default:return"bg-slate-100 text-slate-800 border-slate-200"}},E=o.filter(e=>{const t=e.title.toLowerCase().includes(u.toLowerCase())||e.description.toLowerCase().includes(u.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(u.toLowerCase())),r="all"===p||e.status===p,s="all"===v||e.priority===v;return t&&r&&s}),P={total:o.length,pending:o.filter(e=>"pending"===e.status).length,inProgress:o.filter(e=>"in_progress"===e.status).length,completed:o.filter(e=>"completed"===e.status).length,overdue:o.filter(e=>"overdue"===e.status).length};return(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsx)("div",{className:"enterprise-card p-6",children:(0,w.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between",children:[(0,w.jsxs)("div",{className:"mb-4 lg:mb-0",children:[(0,w.jsx)("h1",{className:"text-3xl font-bold text-slate-100 mb-2",children:"To-Do Generator"}),(0,w.jsx)("p",{className:"text-slate-400 text-lg",children:"Quick To-Do generation per property with portfolio roll-up"})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,w.jsxs)("button",{className:"btn-primary",children:[(0,w.jsx)(A,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:"Generate Quick Todos"})]}),(0,w.jsxs)("button",{className:"btn-secondary",children:[(0,w.jsx)(A,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:"Add Todo"})]})]})]})}),(0,w.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[{label:"Total",value:P.total,icon:k,color:"corporate"},{label:"Pending",value:P.pending,icon:G,color:"gold"},{label:"In Progress",value:P.inProgress,icon:m,color:"corporate"},{label:"Completed",value:P.completed,icon:f,color:"emerald"},{label:"Overdue",value:P.overdue,icon:D,color:"ruby"}].map((e,t)=>{const r=e.icon;return(0,w.jsxs)("div",{className:"metric-card group",children:[(0,w.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,w.jsx)("div",{className:`p-3 bg-gradient-to-r ${{corporate:"from-corporate-500 to-corporate-600",emerald:"from-emerald-500 to-emerald-600",ruby:"from-ruby-500 to-ruby-600",gold:"from-gold-500 to-gold-600"}[e.color]} rounded-xl shadow-enterprise group-hover:shadow-glow transition-all duration-300`,children:(0,w.jsx)(r,{className:"h-6 w-6 text-white"})})}),(0,w.jsx)("div",{className:"metric-value text-4xl mb-1",children:e.value}),(0,w.jsx)("div",{className:"metric-label",children:e.label})]},t)})}),(0,w.jsx)("div",{className:"enterprise-card p-6",children:(0,w.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Select Property"}),(0,w.jsxs)("select",{value:y||"",onChange:e=>_(e.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-xl focus:ring-2 focus:ring-corporate-500 focus:border-corporate-500 transition-all duration-300 text-slate-200 hover:bg-slate-700",children:[(0,w.jsx)("option",{value:"",children:"Choose a property..."}),n.map(e=>(0,w.jsx)("option",{value:e.id,children:e.address},e.id))]})]}),y&&(0,w.jsx)("div",{className:"flex items-center space-x-3",children:(0,w.jsx)("div",{className:"p-3 bg-slate-800 border border-slate-600 rounded-xl",children:(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,w.jsx)($,{className:"h-5 w-5 text-corporate-400"}),(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-slate-200 font-medium",children:null===(t=n.find(e=>e.id===y))||void 0===t?void 0:t.address}),(0,w.jsx)("p",{className:"text-slate-400 text-sm",children:"NYC"})]})]})})})]})}),(0,w.jsx)("div",{className:"enterprise-card p-6",children:(0,w.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,w.jsxs)("div",{className:"flex-1 relative",children:[(0,w.jsx)(U,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),(0,w.jsx)("input",{type:"text",placeholder:"Search todos...",value:u,onChange:e=>h(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-800 border border-slate-600 rounded-xl focus:ring-2 focus:ring-corporate-500 focus:border-corporate-500 transition-all duration-300 text-slate-200 placeholder-slate-400 hover:bg-slate-700"})]}),(0,w.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"px-4 py-3 bg-slate-800 border border-slate-600 rounded-xl focus:ring-2 focus:ring-corporate-500 focus:border-corporate-500 transition-all duration-300 text-slate-200 hover:bg-slate-700",children:[(0,w.jsx)("option",{value:"all",children:"All Status"}),(0,w.jsx)("option",{value:"pending",children:"Pending"}),(0,w.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,w.jsx)("option",{value:"completed",children:"Completed"}),(0,w.jsx)("option",{value:"overdue",children:"Overdue"})]}),(0,w.jsxs)("select",{value:v,onChange:e=>x(e.target.value),className:"px-4 py-3 bg-slate-800 border border-slate-600 rounded-xl focus:ring-2 focus:ring-corporate-500 focus:border-corporate-500 transition-all duration-300 text-slate-200 hover:bg-slate-700",children:[(0,w.jsx)("option",{value:"all",children:"All Priority"}),(0,w.jsx)("option",{value:"high",children:"High"}),(0,w.jsx)("option",{value:"medium",children:"Medium"}),(0,w.jsx)("option",{value:"low",children:"Low"})]})]})}),(0,w.jsxs)("div",{className:"enterprise-card overflow-hidden",children:[(0,w.jsx)("div",{className:"enterprise-card-header",children:(0,w.jsxs)("h2",{className:"text-xl font-bold text-slate-100",children:["Your Todos (",E.length,")"]})}),(0,w.jsx)("div",{className:"p-6",children:c?(0,w.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-corporate-500"}),(0,w.jsx)("span",{className:"ml-3 text-slate-400",children:"Loading todos..."})]}):0===E.length?(0,w.jsxs)("div",{className:"text-center py-12",children:[(0,w.jsx)("div",{className:"w-16 h-16 bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,w.jsx)(k,{className:"h-8 w-8 text-slate-400"})}),(0,w.jsx)("p",{className:"text-slate-400 text-lg",children:"No todos yet"}),(0,w.jsx)("p",{className:"text-slate-500 text-sm mt-2",children:"Create your first todo to get started"}),(0,w.jsxs)("button",{className:"btn-primary mt-4",children:[(0,w.jsx)(A,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:"Add Todo"})]})]}):(0,w.jsx)("div",{className:"space-y-4",children:E.map(e=>(0,w.jsx)("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6 hover:bg-slate-750 transition-all duration-300",children:(0,w.jsxs)("div",{className:"flex items-start justify-between",children:[(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[N(e.status),(0,w.jsx)("h3",{className:"text-lg font-semibold text-slate-100",children:e.title}),(0,w.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${S(e.status)}`,children:e.status.replace("_"," ").toUpperCase()}),(0,w.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${C(e.priority)}`,children:e.priority.toUpperCase()})]}),(0,w.jsx)("p",{className:"text-slate-400 mb-3",children:e.description}),(0,w.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-slate-500 mb-4",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)($,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:e.property_address})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(k,{className:"h-4 w-4"}),(0,w.jsxs)("span",{children:["Due: ",new Date(e.due_date).toLocaleDateString()]})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(te,{className:"h-4 w-4"}),(0,w.jsxs)("span",{children:["Assigned to: ",e.assigned_to]})]})]}),(0,w.jsx)("div",{className:"flex flex-wrap gap-2",children:e.tags.map((e,t)=>(0,w.jsxs)("span",{className:"px-2 py-1 bg-slate-700 text-slate-300 rounded-full text-xs",children:["#",e]},t))})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,w.jsx)("button",{className:"p-2 text-corporate-400 hover:bg-corporate-500/20 rounded-lg transition-all duration-300",children:(0,w.jsx)(b,{className:"h-4 w-4"})}),(0,w.jsx)("button",{className:"p-2 text-slate-400 hover:bg-slate-700 rounded-lg transition-all duration-300",children:(0,w.jsx)(K,{className:"h-4 w-4"})}),(0,w.jsx)("button",{className:"p-2 text-ruby-400 hover:bg-ruby-500/20 rounded-lg transition-all duration-300",children:(0,w.jsx)(J,{className:"h-4 w-4"})})]})]})},e.id))})})]})]})},xe=l("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),ye=l("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),be=l("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),we=l("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),_e=l("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),je=l("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Ne=e=>{let{user:t,onProfileUpdate:r}=e;const[n,o]=(0,s.useState)(null),[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!0),[h,p]=(0,s.useState)(!1),[m,g]=(0,s.useState)({type:"",text:""}),[v,x]=(0,s.useState)({full_name:"",email:"",phone:"",company:"",job_title:"",address:""}),y=(0,s.useCallback)(async()=>{try{u(!0);const e=await i.getUserProfile(t.id);e.success&&e.data&&(o(e.data),x({full_name:e.data.full_name||"",email:e.data.email||t.email||"",phone:e.data.phone||"",company:e.data.company||"",job_title:e.data.job_title||"",address:e.data.address||""}))}catch(e){console.error("Error fetching user profile:",e),g({type:"error",text:"Failed to load profile"})}finally{u(!1)}},[t.id,t.email]);(0,s.useEffect)(()=>{y()},[y]);const b=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A";if(d)return(0,w.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,w.jsx)("p",{className:"text-gray-600",children:"Loading profile..."})]})});const _=(null===n||void 0===n?void 0:n.subscription_tier)||"free",j=a.vQ.subscriptionTiers[_]||a.vQ.subscriptionTiers.free;return(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsx)("div",{className:"bg-white/60 backdrop-blur-xl rounded-3xl p-8 border border-white/20 shadow-2xl",children:(0,w.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between",children:[(0,w.jsxs)("div",{className:"mb-6 lg:mb-0",children:[(0,w.jsx)("h2",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 via-blue-800 to-purple-800 bg-clip-text text-transparent mb-2",children:"My Profile"}),(0,w.jsx)("p",{className:"text-gray-600 text-lg",children:"Manage your account information and preferences"})]}),!l&&(0,w.jsxs)("button",{onClick:()=>c(!0),className:"flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-2xl hover:from-blue-600 hover:to-purple-700 transition-all duration-300 shadow-lg transform hover:scale-105",children:[(0,w.jsx)(xe,{className:"h-5 w-5"}),(0,w.jsx)("span",{className:"font-medium",children:"Edit Profile"})]})]})}),m.text&&(0,w.jsx)("div",{className:"p-4 rounded-2xl border "+("success"===m.type?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"),children:(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:["success"===m.type?(0,w.jsx)(f,{className:"h-5 w-5"}):(0,w.jsx)(F,{className:"h-5 w-5"}),(0,w.jsx)("span",{className:"font-medium",children:m.text})]})}),(0,w.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsx)("div",{className:"bg-white/70 backdrop-blur-xl rounded-3xl p-6 border border-white/20 shadow-lg",children:(0,w.jsxs)("div",{className:"flex flex-col items-center",children:[(0,w.jsxs)("div",{className:"relative mb-4",children:[(0,w.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full blur opacity-75"}),(0,w.jsx)("div",{className:"relative h-32 w-32 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:null!==n&&void 0!==n&&n.avatar_url?(0,w.jsx)("img",{src:n.avatar_url,alt:"Profile",className:"h-28 w-28 rounded-full object-cover"}):(0,w.jsx)(S,{className:"h-16 w-16 text-white"})})]}),(0,w.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:(null===n||void 0===n?void 0:n.full_name)||"User"}),(0,w.jsx)("p",{className:"text-gray-600 mb-4",children:(null===n||void 0===n?void 0:n.email)||t.email}),(0,w.jsx)("div",{className:"w-full pt-4 border-t border-gray-200",children:(0,w.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,w.jsx)("span",{className:"text-gray-600",children:"Member since"}),(0,w.jsx)("span",{className:"font-medium text-gray-900",children:b(null===n||void 0===n?void 0:n.created_at)})]})})]})}),(0,w.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden",children:[(0,w.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-purple-600/20"}),(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,w.jsx)(O,{className:"h-5 w-5"}),(0,w.jsx)("span",{className:"text-sm font-semibold",children:"Current Plan"})]}),(0,w.jsx)("h3",{className:"text-2xl font-bold mb-2",children:j.name}),(0,w.jsx)("p",{className:"text-gray-300 text-sm mb-4",children:0===j.price?"Free Plan":`$${j.price}/${j.interval}`}),(0,w.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,w.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,w.jsx)("span",{children:"Reports Used"}),(0,w.jsxs)("span",{className:"font-semibold",children:[(null===n||void 0===n?void 0:n.reports_used)||0,-1===(null===n||void 0===n?void 0:n.reports_limit)?" / \u221e":` / ${(null===n||void 0===n?void 0:n.reports_limit)||0}`]})]}),(null===n||void 0===n?void 0:n.reports_limit)>0&&-1!==(null===n||void 0===n?void 0:n.reports_limit)&&(0,w.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,w.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(n.reports_used/n.reports_limit*100,100)}%`}})})]}),(0,w.jsxs)("button",{className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white text-sm font-medium py-2 px-4 rounded-xl hover:from-blue-600 hover:to-purple-700 transition-all duration-300 flex items-center justify-center space-x-2",children:[(0,w.jsx)(ye,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:"Upgrade Plan"})]})]})]})]}),(0,w.jsx)("div",{className:"lg:col-span-2",children:(0,w.jsxs)("div",{className:"bg-white/70 backdrop-blur-xl rounded-3xl border border-white/20 shadow-lg",children:[(0,w.jsxs)("div",{className:"p-8",children:[(0,w.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Personal Information"}),(0,w.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),p(!0),g({type:"",text:""});try{const e=await i.updateUserProfile(t.id,v);if(!e.success)throw new Error(e.error);o(e.data[0]),c(!1),g({type:"success",text:"Profile updated successfully!"}),r&&r(e.data[0])}catch(s){console.error("Error updating profile:",s),g({type:"error",text:s.message||"Failed to update profile"})}finally{p(!1)}},className:"space-y-6",children:[(0,w.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsxs)("label",{className:"text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[(0,w.jsx)(S,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:"Full Name"})]}),(0,w.jsx)("input",{type:"text",value:v.full_name,onChange:e=>x({...v,full_name:e.target.value}),disabled:!l,className:"w-full px-4 py-3 rounded-2xl border transition-all duration-300 "+(l?"bg-white border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent":"bg-gray-50 border-gray-200 cursor-not-allowed"),placeholder:"John Doe"})]}),(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsxs)("label",{className:"text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[(0,w.jsx)(be,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:"Email"})]}),(0,w.jsx)("input",{type:"email",value:v.email,onChange:e=>x({...v,email:e.target.value}),disabled:!0,className:"w-full px-4 py-3 rounded-2xl border bg-gray-50 border-gray-200 cursor-not-allowed transition-all duration-300",placeholder:"john@example.com"}),(0,w.jsx)("p",{className:"text-xs text-gray-500",children:"Email cannot be changed here"})]}),(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsxs)("label",{className:"text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[(0,w.jsx)(we,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:"Phone"})]}),(0,w.jsx)("input",{type:"tel",value:v.phone,onChange:e=>x({...v,phone:e.target.value}),disabled:!l,className:"w-full px-4 py-3 rounded-2xl border transition-all duration-300 "+(l?"bg-white border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent":"bg-gray-50 border-gray-200 cursor-not-allowed"),placeholder:"+1 (555) 123-4567"})]}),(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsxs)("label",{className:"text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[(0,w.jsx)($,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:"Company"})]}),(0,w.jsx)("input",{type:"text",value:v.company,onChange:e=>x({...v,company:e.target.value}),disabled:!l,className:"w-full px-4 py-3 rounded-2xl border transition-all duration-300 "+(l?"bg-white border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent":"bg-gray-50 border-gray-200 cursor-not-allowed"),placeholder:"ABC Property Management"})]}),(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsxs)("label",{className:"text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[(0,w.jsx)(_e,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:"Job Title"})]}),(0,w.jsx)("input",{type:"text",value:v.job_title,onChange:e=>x({...v,job_title:e.target.value}),disabled:!l,className:"w-full px-4 py-3 rounded-2xl border transition-all duration-300 "+(l?"bg-white border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent":"bg-gray-50 border-gray-200 cursor-not-allowed"),placeholder:"Property Manager"})]})]}),(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsxs)("label",{className:"text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[(0,w.jsx)(z,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:"Address"})]}),(0,w.jsx)("input",{type:"text",value:v.address,onChange:e=>x({...v,address:e.target.value}),disabled:!l,className:"w-full px-4 py-3 rounded-2xl border transition-all duration-300 "+(l?"bg-white border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent":"bg-gray-50 border-gray-200 cursor-not-allowed"),placeholder:"123 Main St, New York, NY 10001"})]}),l&&(0,w.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[(0,w.jsx)("button",{type:"submit",disabled:h,className:"flex items-center justify-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-2xl hover:from-blue-600 hover:to-purple-700 transition-all duration-300 shadow-lg transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:h?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,w.jsx)("span",{children:"Saving..."})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(je,{className:"h-5 w-5"}),(0,w.jsx)("span",{children:"Save Changes"})]})}),(0,w.jsx)("button",{type:"button",onClick:()=>{c(!1),x({full_name:(null===n||void 0===n?void 0:n.full_name)||"",email:(null===n||void 0===n?void 0:n.email)||t.email||"",phone:(null===n||void 0===n?void 0:n.phone)||"",company:(null===n||void 0===n?void 0:n.company)||"",job_title:(null===n||void 0===n?void 0:n.job_title)||"",address:(null===n||void 0===n?void 0:n.address)||""}),g({type:"",text:""})},disabled:h,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-2xl hover:bg-gray-50 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})]}),(0,w.jsxs)("div",{className:"p-8 border-t border-gray-200 bg-gradient-to-r from-blue-50/50 to-purple-50/50",children:[(0,w.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Account Details"}),(0,w.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,w.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,w.jsx)(k,{className:"h-5 w-5 text-gray-400 mt-0.5"}),(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-gray-600",children:"Account Created"}),(0,w.jsx)("p",{className:"font-medium text-gray-900",children:b(null===n||void 0===n?void 0:n.created_at)})]})]}),(0,w.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,w.jsx)(k,{className:"h-5 w-5 text-gray-400 mt-0.5"}),(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-gray-600",children:"Last Login"}),(0,w.jsx)("p",{className:"font-medium text-gray-900",children:b(null===n||void 0===n?void 0:n.last_login)})]})]}),(0,w.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,w.jsx)(f,{className:"h-5 w-5 text-green-500 mt-0.5"}),(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-gray-600",children:"Subscription Status"}),(0,w.jsx)("p",{className:"font-medium text-gray-900 capitalize",children:(null===n||void 0===n?void 0:n.subscription_status)||"Active"})]})]}),(null===n||void 0===n?void 0:n.current_period_end)&&(0,w.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,w.jsx)(k,{className:"h-5 w-5 text-gray-400 mt-0.5"}),(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-gray-600",children:"Renewal Date"}),(0,w.jsx)("p",{className:"font-medium text-gray-900",children:b(n.current_period_end)})]})]})]})]})]})})]})]})},ke=e=>{var t,r,n,i,o,l,c,d,h,p,g,v,y,b,_,j,N,k,S,C;let{property:E,isOpen:P,onClose:T}=e;const[I,O]=(0,s.useState)(!0),[A,R]=(0,s.useState)(!1),[$,U]=(0,s.useState)(null),[M,F]=(0,s.useState)({elevators:!1,boilers:!1,dobViolations:!1,hpdViolations:!1}),B=(0,s.useCallback)(async()=>{try{O(!0),console.log("\ud83d\udd04 Loading property data from Supabase...");const{data:e,error:t}=await a.ND.from("nyc_properties").select("*").eq("property_id",E.id).single();if(t||!e)return console.log("No NYC property data found"),U(null),void O(!1);console.log("\u2705 NYC Property found:",e);const{data:r}=await a.ND.from("nyc_compliance_summary").select("*").eq("nyc_property_id",e.id).single(),{data:s}=await a.ND.from("nyc_dob_violations").select("*").eq("nyc_property_id",e.id).order("issue_date",{ascending:!1}),{data:n}=await a.ND.from("nyc_hpd_violations").select("*").eq("nyc_property_id",e.id).order("inspection_date",{ascending:!1}),{data:i}=await a.ND.from("nyc_elevator_inspections").select("*").eq("nyc_property_id",e.id).order("last_inspection_date",{ascending:!1}),{data:o}=await a.ND.from("nyc_boiler_inspections").select("*").eq("nyc_property_id",e.id).order("inspection_date",{ascending:!1});console.log("\ud83d\udcca Data loaded:",{dob:(null===s||void 0===s?void 0:s.length)||0,hpd:(null===n||void 0===n?void 0:n.length)||0,elevators:(null===i||void 0===i?void 0:i.length)||0,boilers:(null===o||void 0===o?void 0:o.length)||0}),U({property:{id:E.id,address:E.address,bin:e.bin,bbl:e.bbl,borough:e.borough,last_synced_at:e.last_synced_at},compliance_summary:r||{compliance_score:0,risk_level:"UNKNOWN",total_violations:((null===s||void 0===s?void 0:s.length)||0)+((null===n||void 0===n?void 0:n.length)||0),open_violations:(null===s||void 0===s?void 0:s.length)||0,dob_violations:(null===s||void 0===s?void 0:s.length)||0,hpd_violations:(null===n||void 0===n?void 0:n.length)||0},violations:{dob:s||[],hpd:n||[]},equipment:{elevators:i||[],boilers:o||[]}})}catch(e){console.error("Error loading property data:",e),U(null)}finally{O(!1)}},[null===E||void 0===E?void 0:E.id,null===E||void 0===E?void 0:E.address]),q=(0,s.useCallback)(async()=>{try{R(!0),console.log("\ud83d\udd04 Syncing NYC data...");(await fetch(`${a.vQ.API_URL}/api/properties/${E.id}/sync`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok&&(console.log("\u2705 Sync completed, reloading data..."),await B())}catch(e){console.error("Error syncing property:",e)}finally{R(!1)}},[null===E||void 0===E?void 0:E.id,B]);(0,s.useEffect)(()=>{P&&E&&B()},[P,E,B]);const V=e=>{F(t=>({...t,[e]:!t[e]}))},W=e=>e>=90?{bg:"bg-emerald-500/20",text:"text-emerald-400",border:"border-emerald-500/30",label:"EXCELLENT"}:e>=75?{bg:"bg-blue-500/20",text:"text-blue-400",border:"border-blue-500/30",label:"GOOD"}:e>=60?{bg:"bg-yellow-500/20",text:"text-yellow-400",border:"border-yellow-500/30",label:"CAUTION"}:{bg:"bg-red-500/20",text:"text-red-400",border:"border-red-500/30",label:"CRITICAL"},H=e=>{const t={LOW:{bg:"bg-emerald-500/20",text:"text-emerald-400",border:"border-emerald-500/30"},MEDIUM:{bg:"bg-yellow-500/20",text:"text-yellow-400",border:"border-yellow-500/30"},HIGH:{bg:"bg-orange-500/20",text:"text-orange-400",border:"border-orange-500/30"},CRITICAL:{bg:"bg-red-500/20",text:"text-red-400",border:"border-red-500/30"}};return t[e]||t.MEDIUM};return P?(0,w.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,w.jsxs)("div",{className:"bg-slate-900 border border-slate-700/50 rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,w.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6",children:(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Property Compliance Report"}),(0,w.jsxs)("div",{className:"flex items-center space-x-2 text-blue-100",children:[(0,w.jsx)(z,{className:"h-4 w-4"}),(0,w.jsx)("span",{className:"text-sm",children:(null===E||void 0===E?void 0:E.address)||"Loading..."})]}),(null===$||void 0===$?void 0:$.property)&&(0,w.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-blue-200",children:[(0,w.jsxs)("span",{children:["BIN: ",$.property.bin]}),(0,w.jsx)("span",{children:"\u2022"}),(0,w.jsxs)("span",{children:["BBL: ",$.property.bbl]}),$.property.last_synced_at&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("span",{children:"\u2022"}),(0,w.jsxs)("span",{children:["Updated: ",new Date($.property.last_synced_at).toLocaleDateString()]})]})]})]}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsxs)("button",{onClick:q,disabled:I||A,className:"px-4 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2",title:"Sync NYC Data",children:[(0,w.jsx)(le,{className:"h-4 w-4 "+(I||A?"animate-spin":"")}),(0,w.jsx)("span",{className:"text-sm",children:"Sync Data"})]}),(0,w.jsx)("button",{onClick:T,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white",children:(0,w.jsx)(x,{className:"h-5 w-5"})})]})]})}),(0,w.jsx)("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-900",children:I?(0,w.jsxs)("div",{className:"flex flex-col items-center justify-center py-16",children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4"}),(0,w.jsx)("p",{className:"text-slate-300 text-lg",children:"Loading property data..."})]}):$?(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsxs)("div",{className:"bg-slate-800 border border-slate-700/50 rounded-xl p-6",children:[(0,w.jsx)("h3",{className:"text-lg font-bold text-slate-100 mb-6",children:"Compliance Overview"}),(0,w.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,w.jsxs)("div",{className:`${W($.compliance_summary.compliance_score).bg} border ${W($.compliance_summary.compliance_score).border} rounded-xl p-6 text-center`,children:[(0,w.jsx)("div",{className:`text-4xl font-bold ${W($.compliance_summary.compliance_score).text} mb-2`,children:$.compliance_summary.compliance_score||0}),(0,w.jsx)("div",{className:"text-slate-400 text-sm mb-2",children:"Compliance Score"}),(0,w.jsx)("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-bold ${W($.compliance_summary.compliance_score).text}`,children:W($.compliance_summary.compliance_score).label})]}),(0,w.jsxs)("div",{className:"bg-slate-700/50 border border-slate-600/50 rounded-xl p-6",children:[(0,w.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,w.jsx)(D,{className:"h-5 w-5 text-red-400"}),(0,w.jsx)("span",{className:"text-slate-400 text-sm",children:"Total Violations"})]}),(0,w.jsx)("div",{className:"text-3xl font-bold text-slate-100",children:$.compliance_summary.total_violations||0}),(0,w.jsxs)("div",{className:"text-sm text-red-400 mt-1",children:[$.compliance_summary.open_violations||0," open"]})]}),(0,w.jsxs)("div",{className:`${H($.compliance_summary.risk_level).bg} border ${H($.compliance_summary.risk_level).border} rounded-xl p-6`,children:[(0,w.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,w.jsx)(u,{className:`h-5 w-5 ${H($.compliance_summary.risk_level).text}`}),(0,w.jsx)("span",{className:"text-slate-400 text-sm",children:"Risk Level"})]}),(0,w.jsx)("div",{className:`text-2xl font-bold ${H($.compliance_summary.risk_level).text}`,children:$.compliance_summary.risk_level||"UNKNOWN"})]}),(0,w.jsxs)("div",{className:"bg-slate-700/50 border border-slate-600/50 rounded-xl p-6",children:[(0,w.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,w.jsx)(de,{className:"h-5 w-5 text-blue-400"}),(0,w.jsx)("span",{className:"text-slate-400 text-sm",children:"Equipment"})]}),(0,w.jsxs)("div",{className:"text-lg font-bold text-slate-100 mb-1",children:[((null===(t=$.equipment)||void 0===t||null===(r=t.elevators)||void 0===r?void 0:r.length)||0)+((null===(n=$.equipment)||void 0===n||null===(i=n.boilers)||void 0===i?void 0:i.length)||0)," Total"]}),(0,w.jsxs)("div",{className:"text-xs text-slate-400",children:[(null===(o=$.equipment)||void 0===o||null===(l=o.elevators)||void 0===l?void 0:l.length)||0," elevators, ",(null===(c=$.equipment)||void 0===c||null===(d=c.boilers)||void 0===d?void 0:d.length)||0," boilers"]})]})]})]}),(0,w.jsxs)("div",{className:"bg-slate-800 border border-slate-700/50 rounded-xl overflow-hidden",children:[(0,w.jsxs)("button",{onClick:()=>V("dobViolations"),className:"w-full flex items-center justify-between p-6 hover:bg-slate-750 transition-colors",children:[(0,w.jsxs)("div",{className:"flex items-center gap-4",children:[(0,w.jsx)("div",{className:"p-3 bg-red-500/20 border border-red-500/30 rounded-lg",children:(0,w.jsx)(D,{className:"h-6 w-6 text-red-400"})}),(0,w.jsxs)("div",{className:"text-left",children:[(0,w.jsx)("h4",{className:"font-bold text-slate-100",children:"DOB Violations"}),(0,w.jsxs)("p",{className:"text-sm text-slate-400",children:[(null===(h=$.violations)||void 0===h||null===(p=h.dob)||void 0===p?void 0:p.length)||0," Department of Buildings violations"]})]})]}),M.dobViolations?(0,w.jsx)(pe,{className:"h-5 w-5 text-slate-400"}):(0,w.jsx)(L,{className:"h-5 w-5 text-slate-400"})]}),M.dobViolations&&(0,w.jsx)("div",{className:"bg-slate-900 p-6 border-t border-slate-700/50",children:null!==(g=$.violations)&&void 0!==g&&g.dob&&$.violations.dob.length>0?(0,w.jsx)("div",{className:"space-y-3",children:$.violations.dob.slice(0,10).map((e,t)=>(0,w.jsxs)("div",{className:"bg-slate-800 border border-slate-700/50 rounded-lg p-4",children:[(0,w.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsx)("h5",{className:"font-semibold text-slate-100 mb-1",children:e.violation_type||"Building Violation"}),(0,w.jsx)("p",{className:"text-sm text-slate-400",children:e.description||"No description available"})]}),(0,w.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("ACTIVE"===e.status||"Open"===e.status?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30"),children:e.status||"UNKNOWN"})]}),(0,w.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[(0,w.jsxs)("span",{children:["Issued: ",e.issue_date?new Date(e.issue_date).toLocaleDateString():"N/A"]}),e.disposition_date&&(0,w.jsxs)("span",{children:["Resolved: ",new Date(e.disposition_date).toLocaleDateString()]})]})]},t))}):(0,w.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,w.jsx)(f,{className:"h-12 w-12 mx-auto mb-2 text-emerald-400"}),(0,w.jsx)("p",{children:"No DOB violations found"})]})})]}),(0,w.jsxs)("div",{className:"bg-slate-800 border border-slate-700/50 rounded-xl overflow-hidden",children:[(0,w.jsxs)("button",{onClick:()=>V("hpdViolations"),className:"w-full flex items-center justify-between p-6 hover:bg-slate-750 transition-colors",children:[(0,w.jsxs)("div",{className:"flex items-center gap-4",children:[(0,w.jsx)("div",{className:"p-3 bg-orange-500/20 border border-orange-500/30 rounded-lg",children:(0,w.jsx)(ce,{className:"h-6 w-6 text-orange-400"})}),(0,w.jsxs)("div",{className:"text-left",children:[(0,w.jsx)("h4",{className:"font-bold text-slate-100",children:"HPD Violations"}),(0,w.jsxs)("p",{className:"text-sm text-slate-400",children:[(null===(v=$.violations)||void 0===v||null===(y=v.hpd)||void 0===y?void 0:y.length)||0," Housing Preservation violations"]})]})]}),M.hpdViolations?(0,w.jsx)(pe,{className:"h-5 w-5 text-slate-400"}):(0,w.jsx)(L,{className:"h-5 w-5 text-slate-400"})]}),M.hpdViolations&&(0,w.jsx)("div",{className:"bg-slate-900 p-6 border-t border-slate-700/50",children:null!==(b=$.violations)&&void 0!==b&&b.hpd&&$.violations.hpd.length>0?(0,w.jsx)("div",{className:"space-y-3",children:$.violations.hpd.slice(0,10).map((e,t)=>(0,w.jsxs)("div",{className:"bg-slate-800 border border-slate-700/50 rounded-lg p-4",children:[(0,w.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,w.jsxs)("h5",{className:"font-semibold text-slate-100",children:["Class ",e.class||"N/A"," Violation"]}),(0,w.jsx)("span",{className:"text-xs px-2 py-0.5 bg-slate-700 text-slate-300 rounded",children:e.apartment||"Building-wide"})]}),(0,w.jsx)("p",{className:"text-sm text-slate-400",children:e.order_number||e.violation_id})]}),(0,w.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("Open"===e.violation_status?"bg-orange-500/20 text-orange-400 border border-orange-500/30":"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30"),children:e.violation_status||"UNKNOWN"})]}),(0,w.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[(0,w.jsxs)("span",{children:["Inspection: ",e.inspection_date?new Date(e.inspection_date).toLocaleDateString():"N/A"]}),e.current_status_date&&(0,w.jsxs)("span",{children:["Status: ",new Date(e.current_status_date).toLocaleDateString()]})]})]},t))}):(0,w.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,w.jsx)(f,{className:"h-12 w-12 mx-auto mb-2 text-emerald-400"}),(0,w.jsx)("p",{children:"No HPD violations found"})]})})]}),(0,w.jsxs)("div",{className:"bg-slate-800 border border-slate-700/50 rounded-xl overflow-hidden",children:[(0,w.jsxs)("button",{onClick:()=>V("elevators"),className:"w-full flex items-center justify-between p-6 hover:bg-slate-750 transition-colors",children:[(0,w.jsxs)("div",{className:"flex items-center gap-4",children:[(0,w.jsx)("div",{className:"p-3 bg-blue-500/20 border border-blue-500/30 rounded-lg",children:(0,w.jsx)(m,{className:"h-6 w-6 text-blue-400"})}),(0,w.jsxs)("div",{className:"text-left",children:[(0,w.jsx)("h4",{className:"font-bold text-slate-100",children:"Elevator Inspections"}),(0,w.jsxs)("p",{className:"text-sm text-slate-400",children:[(null===(_=$.equipment)||void 0===_||null===(j=_.elevators)||void 0===j?void 0:j.length)||0," inspection records"]})]})]}),M.elevators?(0,w.jsx)(pe,{className:"h-5 w-5 text-slate-400"}):(0,w.jsx)(L,{className:"h-5 w-5 text-slate-400"})]}),M.elevators&&(0,w.jsx)("div",{className:"bg-slate-900 p-6 border-t border-slate-700/50",children:null!==(N=$.equipment)&&void 0!==N&&N.elevators&&$.equipment.elevators.length>0?(0,w.jsx)("div",{className:"space-y-3",children:$.equipment.elevators.slice(0,10).map((e,t)=>(0,w.jsx)("div",{className:"bg-slate-800 border border-slate-700/50 rounded-lg p-4",children:(0,w.jsxs)("div",{className:"flex items-start justify-between",children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)("h5",{className:"font-semibold text-slate-100 mb-1",children:["Device #",e.device_number]}),(0,w.jsx)("p",{className:"text-sm text-slate-400",children:e.device_type||"Elevator"}),(0,w.jsxs)("div",{className:"text-xs text-slate-500 mt-2",children:["Last Inspection: ",e.last_inspection_date?new Date(e.last_inspection_date).toLocaleDateString():"N/A"]})]}),(0,w.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("ACTIVE"===e.device_status?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-slate-600 text-slate-300"),children:e.device_status||"UNKNOWN"})]})},t))}):(0,w.jsx)("div",{className:"text-center py-8 text-slate-400",children:"No elevator data available"})})]}),(0,w.jsxs)("div",{className:"bg-slate-800 border border-slate-700/50 rounded-xl overflow-hidden",children:[(0,w.jsxs)("button",{onClick:()=>V("boilers"),className:"w-full flex items-center justify-between p-6 hover:bg-slate-750 transition-colors",children:[(0,w.jsxs)("div",{className:"flex items-center gap-4",children:[(0,w.jsx)("div",{className:"p-3 bg-orange-500/20 border border-orange-500/30 rounded-lg",children:(0,w.jsx)(fe,{className:"h-6 w-6 text-orange-400"})}),(0,w.jsxs)("div",{className:"text-left",children:[(0,w.jsx)("h4",{className:"font-bold text-slate-100",children:"Boiler Inspections"}),(0,w.jsxs)("p",{className:"text-sm text-slate-400",children:[(null===(k=$.equipment)||void 0===k||null===(S=k.boilers)||void 0===S?void 0:S.length)||0," inspection records"]})]})]}),M.boilers?(0,w.jsx)(pe,{className:"h-5 w-5 text-slate-400"}):(0,w.jsx)(L,{className:"h-5 w-5 text-slate-400"})]}),M.boilers&&(0,w.jsx)("div",{className:"bg-slate-900 p-6 border-t border-slate-700/50",children:null!==(C=$.equipment)&&void 0!==C&&C.boilers&&$.equipment.boilers.length>0?(0,w.jsx)("div",{className:"space-y-3",children:$.equipment.boilers.slice(0,10).map((e,t)=>(0,w.jsx)("div",{className:"bg-slate-800 border border-slate-700/50 rounded-lg p-4",children:(0,w.jsxs)("div",{className:"flex items-start justify-between",children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)("h5",{className:"font-semibold text-slate-100 mb-1",children:["Device #",e.device_number]}),(0,w.jsx)("p",{className:"text-sm text-slate-400",children:e.device_type||"Boiler"}),(0,w.jsxs)("div",{className:"text-xs text-slate-500 mt-2",children:["Inspection: ",e.inspection_date?new Date(e.inspection_date).toLocaleDateString():"N/A"]})]}),(0,w.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("ACTIVE"===e.status?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-slate-600 text-slate-300"),children:e.status||"UNKNOWN"})]})},t))}):(0,w.jsx)("div",{className:"text-center py-8 text-slate-400",children:"No boiler data available"})})]})]}):(0,w.jsxs)("div",{className:"flex flex-col items-center justify-center py-16",children:[(0,w.jsx)(D,{className:"h-16 w-16 text-yellow-500 mb-4"}),(0,w.jsx)("p",{className:"text-slate-300 text-lg mb-4",children:"No NYC data found for this property"}),(0,w.jsx)("button",{onClick:q,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Sync NYC Data Now"})]})})]})}):null};var Se=r(768);const Ce=e=>{let{property:t,isOpen:r,onClose:n,onViewAnalysis:a,user:i}=e;const[o,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1);if(!r)return null;return(0,w.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,w.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,w.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white",children:(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Property Actions"}),(0,w.jsxs)("div",{className:"flex items-center space-x-2 text-blue-100",children:[(0,w.jsx)(z,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:(null===t||void 0===t?void 0:t.address)||"Loading..."})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm text-blue-100",children:[(0,w.jsxs)("span",{children:["City: ",null===t||void 0===t?void 0:t.city]}),(0,w.jsx)("span",{children:"\u2022"}),(0,w.jsxs)("span",{children:["ID: ",null===t||void 0===t?void 0:t.id]})]})]}),(0,w.jsx)("button",{onClick:n,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:(0,w.jsx)(x,{className:"h-6 w-6"})})]})}),(0,w.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[75vh]",children:[(0,w.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,w.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer group",onClick:()=>{a(t),n()},children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,w.jsx)("div",{className:"p-3 bg-green-100 rounded-xl group-hover:bg-green-200 transition-colors",children:(0,w.jsx)(j,{className:"h-6 w-6 text-green-600"})}),(0,w.jsx)(m,{className:"h-5 w-5 text-green-500"})]}),(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Compliance Analysis"}),(0,w.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"View detailed compliance reports, violations, and inspection history"}),(0,w.jsxs)("div",{className:"flex items-center text-sm text-green-600 font-medium",children:[(0,w.jsx)(b,{className:"h-4 w-4 mr-2"}),"View Analysis"]})]}),(0,w.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-2xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer group",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,w.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl group-hover:bg-blue-200 transition-colors",children:(0,w.jsx)($,{className:"h-6 w-6 text-blue-600"})}),(0,w.jsx)(I,{className:"h-5 w-5 text-blue-500"})]}),(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Property Details"}),(0,w.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Edit property information, contact details, and management settings"}),(0,w.jsxs)("div",{className:"flex items-center text-sm text-blue-600 font-medium",children:[(0,w.jsx)(I,{className:"h-4 w-4 mr-2"}),"Edit Details"]})]}),(0,w.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 border border-orange-200 rounded-2xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer group",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,w.jsx)("div",{className:"p-3 bg-orange-100 rounded-xl group-hover:bg-orange-200 transition-colors",children:(0,w.jsx)(k,{className:"h-6 w-6 text-orange-600"})}),(0,w.jsx)(G,{className:"h-5 w-5 text-orange-500"})]}),(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Inspection Schedule"}),(0,w.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Manage upcoming inspections and schedule new ones"}),(0,w.jsxs)("div",{className:"flex items-center text-sm text-orange-600 font-medium",children:[(0,w.jsx)(k,{className:"h-4 w-4 mr-2"}),"Schedule"]})]}),(0,w.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 border border-red-200 rounded-2xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer group",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,w.jsx)("div",{className:"p-3 bg-red-100 rounded-xl group-hover:bg-red-200 transition-colors",children:(0,w.jsx)(D,{className:"h-6 w-6 text-red-600"})}),(0,w.jsx)(u,{className:"h-5 w-5 text-red-500"})]}),(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Violations"}),(0,w.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"View and manage active violations and compliance issues"}),(0,w.jsxs)("div",{className:"flex items-center text-sm text-red-600 font-medium",children:[(0,w.jsx)(D,{className:"h-4 w-4 mr-2"}),"Manage"]})]}),(0,w.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 border border-purple-200 rounded-2xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer group",onClick:async()=>{try{d(!0),console.log("\ud83d\udcca Generating compliance report for:",t.address),await(0,Se.generateSampleReport)(t,i.id),console.log("\u2705 Compliance report generated successfully"),window.alert("Compliance report generated successfully! Check the Report Library to view it.")}catch(e){console.error("\u274c Error generating report:",e),window.alert("Failed to generate report. Please try again.")}finally{d(!1)}},children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,w.jsx)("div",{className:"p-3 bg-purple-100 rounded-xl group-hover:bg-purple-200 transition-colors",children:(0,w.jsx)(N,{className:"h-6 w-6 text-purple-600"})}),(0,w.jsx)(te,{className:"h-5 w-5 text-purple-500"})]}),(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Reports & Documents"}),(0,w.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Generate compliance reports and manage property documents"}),(0,w.jsx)("div",{className:"flex items-center text-sm text-purple-600 font-medium",children:c?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(le,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(N,{className:"h-4 w-4 mr-2"}),"Generate"]})})]}),(0,w.jsxs)("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 border border-teal-200 rounded-2xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer group",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,w.jsx)("div",{className:"p-3 bg-teal-100 rounded-xl group-hover:bg-teal-200 transition-colors",children:(0,w.jsx)(de,{className:"h-6 w-6 text-teal-600"})}),(0,w.jsx)(ce,{className:"h-5 w-5 text-teal-500"})]}),(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Maintenance"}),(0,w.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Track maintenance tasks and property improvements"}),(0,w.jsxs)("div",{className:"flex items-center text-sm text-teal-600 font-medium",children:[(0,w.jsx)(de,{className:"h-4 w-4 mr-2"}),"Track"]})]})]}),(0,w.jsxs)("div",{className:"mt-8 bg-gray-50 rounded-2xl p-6",children:[(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Stats"}),(0,w.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)("div",{className:"text-2xl font-bold text-green-600 mb-1",children:"85%"}),(0,w.jsx)("div",{className:"text-sm text-gray-600",children:"Compliance"})]}),(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)("div",{className:"text-2xl font-bold text-red-600 mb-1",children:"0"}),(0,w.jsx)("div",{className:"text-sm text-gray-600",children:"Violations"})]}),(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:"2"}),(0,w.jsx)("div",{className:"text-sm text-gray-600",children:"Inspections"})]}),(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:"5"}),(0,w.jsx)("div",{className:"text-sm text-gray-600",children:"Reports"})]})]})]})]})]})})};const Ee=new class{constructor(){this.baseUrl="http://localhost:5001"}async fetchRealNYCData(e){console.log(`\ud83d\uddfd Fetching real NYC data for: ${e.address}`);try{const t=await fetch(`${this.baseUrl}/api/sync-nyc-property`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({property_id:e.id,address:e.address,bin:e.bin_number,bbl:e.opa_account})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();return r.success&&r.data?(console.log("\u2705 Real NYC data synced successfully"),console.log("\ud83d\udcca Sync results:",r.data),r.data):(console.warn("\u26a0\ufe0f NYC sync completed with warnings:",r.message),null)}catch(t){return console.error("\u274c Error syncing NYC data:",t),null}}async getComprehensiveNYCData(e){console.log(`\ud83d\udcca Getting comprehensive NYC data for: ${e.address}`);try{const t=await fetch(`${this.baseUrl}/api/nyc-comprehensive-data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e.address,borough:e.borough||"NYC"})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();return r.success&&r.data?(console.log("\u2705 Comprehensive NYC data retrieved"),r.data):(console.warn("\u26a0\ufe0f No comprehensive data available:",r.message),null)}catch(t){return console.error("\u274c Error getting comprehensive NYC data:",t),null}}async syncPropertyData(e){console.log(`\ud83d\udd04 Syncing property data for ID: ${e}`);try{const t=await fetch(`${this.baseUrl}/api/properties/${e}/sync`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(r.success)return console.log("\u2705 Property data synced successfully"),r.data;throw new Error(r.message||"Failed to sync property data")}catch(t){throw console.error("\u274c Error syncing property data:",t),t}}};const Pe=new class{constructor(){this.syncQueue=new Set,this.isProcessing=!1}async autoSyncProperty(e){console.log(`\ud83d\udd04 Auto-syncing data for property: ${e.address}`);try{const t=this.performSync(e),r=new Promise((e,t)=>setTimeout(()=>t(new Error("Sync timeout after 10 seconds")),1e4));await Promise.race([t,r])}catch(t){console.error("\u274c Auto-sync failed:",t)}}async performSync(e){"NYC"===e.city?await this.syncNYCProperty(e):"Philadelphia"===e.city?await this.syncPhiladelphiaProperty(e):console.log(`\u26a0\ufe0f Unknown city "${e.city}" - skipping auto-sync`)}async syncNYCProperty(e){console.log(`\ud83d\uddfd Syncing REAL NYC data for: ${e.address}`);try{console.log("\ud83d\udd04 Fetching real NYC data using backend API...");const t=await Ee.fetchRealNYCData(e);if(t)return console.log("\u2705 Real NYC data synced successfully"),console.log("\ud83d\udcca Sync results:",t),{success:!0,message:"Real NYC compliance data synced successfully",data:t};console.warn("\u26a0\ufe0f No real NYC data synced - creating basic record");return{success:!0,message:"Basic NYC property record created (no real data synced)",data:await this.createBasicNYCProperty(e)}}catch(t){console.error("\u274c Real NYC data sync failed:",t);try{return{success:!0,message:"Basic NYC property record created (real data sync failed)",data:await this.createBasicNYCProperty(e)}}catch(r){throw console.error("\u274c Failed to create even basic NYC record:",r),t}}}async syncPhiladelphiaProperty(e){console.log(`\ud83c\udfdb\ufe0f Syncing Philadelphia data for: ${e.address}`);try{console.log("\u26a0\ufe0f Backend API not available - creating basic Philadelphia property record");const t=await this.createBasicPhiladelphiaProperty(e);return console.log("\u2705 Basic Philadelphia property record created"),{success:!0,message:"Basic Philadelphia property record created. Detailed compliance data will be synced in background.",data:t}}catch(t){throw console.error("\u274c Philadelphia sync failed:",t),t}}async fetchNYCComplianceData(e,t){try{console.log("\ud83d\udd0d Triggering comprehensive NYC data sync...");const r=a.vQ.apiUrl||window.location.origin,s=await fetch(`${r}/api/sync-nyc-property`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({property_id:e.id,address:e.address,bin:e.bin_number,bbl:e.opa_account})});if(s.ok){const e=await s.json();return console.log("\u2705 NYC data sync completed successfully"),console.log("\ud83d\udcca Sync results:",e),e}console.warn("\u26a0\ufe0f Backend sync API not available, using direct API calls..."),await this.fetchNYCDataDirectly(e,t)}catch(r){console.error("\u274c Error syncing NYC compliance data:",r),await this.fetchNYCDataDirectly(e,t)}}async fetchNYCDataDirectly(e,t){try{console.log("\ud83d\udd0d Fetching NYC data directly from APIs...");const r=await fetch(`https://data.cityofnewyork.us/resource/3h2n-5cm9.json?$where=house_number='${this.extractHouseNumber(e.address)}' AND street='${this.extractStreet(e.address)}'&$limit=50`);if(r.ok){const e=await r.json();console.log(`\ud83d\udccb Found ${e.length} DOB violations`),e.length>0&&await this.storeDOBViolations(t.id,e)}const s=await fetch(`https://data.cityofnewyork.us/resource/wvxf-dwi5.json?$where=house_number='${this.extractHouseNumber(e.address)}' AND street_name='${this.extractStreet(e.address)}'&$limit=50`);if(s.ok){const e=await s.json();console.log(`\ud83d\udccb Found ${e.length} HPD violations`),e.length>0&&await this.storeHPDViolations(t.id,e)}if(e.bin_number){const r=await fetch(`https://data.cityofnewyork.us/resource/ju4y-gjjz.json?$where=bin='${e.bin_number}'&$limit=50`);if(r.ok){const e=await r.json();console.log(`\ud83d\uded7 Found ${e.length} elevator inspections`),e.length>0&&await this.storeElevatorInspections(t.id,e)}}if(e.bin_number){const r=await fetch(`https://data.cityofnewyork.us/resource/yb3y-jj3p.json?$where=bin='${e.bin_number}'&$limit=50`);if(r.ok){const e=await r.json();console.log(`\ud83d\udd25 Found ${e.length} boiler inspections`),e.length>0&&await this.storeBoilerInspections(t.id,e)}}await this.createComplianceSummary(t.id,e)}catch(r){throw console.error("\u274c Error in direct API fetch:",r),r}}async storeDOBViolations(e,t){try{const r=t.map(t=>({nyc_property_id:e,violation_id:t.violation_number||`DOB-${Date.now()}`,bin:t.bin,bbl:t.block+t.lot,issue_date:t.issue_date,violation_type:t.violation_type,violation_type_code:t.violation_type_code,violation_description:t.description,violation_category:t.violation_category,violation_status:t.disposition_date?"RESOLVED":"OPEN",disposition_date:t.disposition_date,disposition_comments:t.disposition_comments,house_number:t.house_number,street:t.street,borough:t.boro})),{error:s}=await a.ND.from("nyc_dob_violations").insert(r);if(s)throw s;console.log(`\u2705 Stored ${r.length} DOB violations`)}catch(r){console.error("\u274c Error storing DOB violations:",r)}}async storeHPDViolations(e,t){try{const r=t.map(t=>({nyc_property_id:e,violation_id:t.violationid,building_id:t.buildingid,bbl:t.bbl,inspection_date:t.inspectiondate,violation_description:t.violationdescription,violation_class:t.class,violation_category:t.category,violation_status:t.status,current_status_date:t.currentstatusdate,apartment:t.apartment,story:t.story,house_number:t.housenumber,street_name:t.streetname,borough_id:t.boroid})),{error:s}=await a.ND.from("nyc_hpd_violations").insert(r);if(s)throw s;console.log(`\u2705 Stored ${r.length} HPD violations`)}catch(r){console.error("\u274c Error storing HPD violations:",r)}}async storeElevatorInspections(e,t){try{const r=t.map(t=>({nyc_property_id:e,inspection_id:t.inspection_id||`ELEV-${Date.now()}`,bin:t.bin,device_number:t.device_number,inspection_date:t.inspection_date,inspection_type:t.inspection_type,result:t.result,status:t.status,borough:t.borough,house_number:t.house_number,street:t.street,zip_code:t.zip_code})),{error:s}=await a.ND.from("nyc_elevator_inspections").insert(r);if(s)throw s;console.log(`\u2705 Stored ${r.length} elevator inspections`)}catch(r){console.error("\u274c Error storing elevator inspections:",r)}}async storeBoilerInspections(e,t){try{const r=t.map(t=>({nyc_property_id:e,inspection_id:t.inspection_id||`BOIL-${Date.now()}`,bin:t.bin,boiler_id:t.boiler_id,inspection_date:t.inspection_date,inspection_type:t.inspection_type,result:t.result,status:t.status,borough:t.borough,house_number:t.house_number,street:t.street,zip_code:t.zip_code})),{error:s}=await a.ND.from("nyc_boiler_inspections").insert(r);if(s)throw s;console.log(`\u2705 Stored ${r.length} boiler inspections`)}catch(r){console.error("\u274c Error storing boiler inspections:",r)}}async storeComprehensiveNYCData(e,t){try{var r,s;console.log("\ud83d\udce6 Storing comprehensive NYC data..."),null!==(r=t.violations)&&void 0!==r&&r.dob_violations&&await this.storeDOBViolations(e,t.violations.dob_violations),null!==(s=t.violations)&&void 0!==s&&s.hpd_violations&&await this.storeHPDViolations(e,t.violations.hpd_violations),t.elevator_inspections&&await this.storeElevatorInspections(e,t.elevator_inspections),t.boiler_inspections&&await this.storeBoilerInspections(e,t.boiler_inspections),t.complaints_311&&await this.store311Complaints(e,t.complaints_311),console.log("\u2705 Comprehensive NYC data stored successfully")}catch(n){console.error("\u274c Error storing comprehensive NYC data:",n)}}async store311Complaints(e,t){try{const r=t.map(t=>({nyc_property_id:e,complaint_id:t.unique_key,created_date:t.created_date,complaint_type:t.complaint_type,descriptor:t.descriptor,incident_address:t.incident_address,borough:t.borough,status:t.status,resolution_description:t.resolution_description,latitude:t.latitude,longitude:t.longitude})),{error:s}=await a.ND.from("nyc_311_complaints").insert(r);if(s)throw s;console.log(`\u2705 Stored ${r.length} 311 complaints`)}catch(r){console.error("\u274c Error storing 311 complaints:",r)}}async createComplianceSummary(e,t){try{var r,s;const{data:t}=await a.ND.from("nyc_dob_violations").select("id").eq("nyc_property_id",e),{data:n}=await a.ND.from("nyc_hpd_violations").select("id").eq("nyc_property_id",e),{data:i}=await a.ND.from("nyc_elevator_inspections").select("id, status").eq("nyc_property_id",e),{data:o}=await a.ND.from("nyc_boiler_inspections").select("id, status").eq("nyc_property_id",e),{data:l}=await a.ND.from("nyc_311_complaints").select("id").eq("nyc_property_id",e),c=((null===t||void 0===t?void 0:t.length)||0)+((null===n||void 0===n?void 0:n.length)||0),d=c,u=((null===i||void 0===i||null===(r=i.filter(e=>"FAIL"===e.status))||void 0===r?void 0:r.length)||0)+((null===o||void 0===o||null===(s=o.filter(e=>"FAIL"===e.status))||void 0===s?void 0:s.length)||0);let h=100;h-=5*c,h-=10*u,h-=2*((null===l||void 0===l?void 0:l.length)||0),h=Math.max(0,h);const p=h>80?"LOW":h>60?"MEDIUM":"HIGH",{error:f}=await a.ND.from("nyc_compliance_summary").insert({nyc_property_id:e,compliance_score:h,risk_level:p,total_violations:c,open_violations:d,dob_violations:(null===t||void 0===t?void 0:t.length)||0,hpd_violations:(null===n||void 0===n?void 0:n.length)||0,equipment_issues:u,open_311_complaints:(null===l||void 0===l?void 0:l.length)||0,fire_safety_issues:0,last_analyzed_at:(new Date).toISOString()});if(f)throw f;console.log(`\u2705 Created compliance summary: ${h}% compliance, ${c} violations, ${u} equipment issues`)}catch(n){console.error("\u274c Error creating compliance summary:",n)}}extractHouseNumber(e){const t=e.match(/^(\d+)/);return t?t[1]:""}extractStreet(e){const t=e.split(" ");return t.length>=2?t.slice(1,-2).join(" ").toUpperCase():""}async createBasicNYCProperty(e){try{console.log("\ud83d\udcdd Creating basic NYC property record...");const{data:t,error:r}=await a.ND.from("nyc_properties").insert({property_id:e.id,address:e.address,bin:e.bin_number,bbl:e.opa_account,borough:this.detectBorough(e.address),last_synced_at:(new Date).toISOString()}).select().single();if(r)throw r;return console.log("\u2705 Basic NYC property record created"),t}catch(t){throw console.error("\u274c Failed to create basic NYC property record:",t),t}}async createBasicPhiladelphiaProperty(e){try{return console.log("\ud83d\udcdd Creating basic Philadelphia property record..."),console.log("\u2705 Basic Philadelphia property record created (placeholder)"),{success:!0,message:"Philadelphia property record created"}}catch(t){throw console.error("\u274c Failed to create basic Philadelphia property record:",t),t}}detectBorough(e){const t=e.toUpperCase();return t.includes("MANHATTAN")||t.includes("NYC")?"Manhattan":t.includes("BROOKLYN")?"Brooklyn":t.includes("QUEENS")?"Queens":t.includes("BRONX")?"Bronx":t.includes("STATEN")?"Staten Island":"Manhattan"}queueSync(e){this.syncQueue.add(e.id),this.processQueue()}async processQueue(){if(!this.isProcessing&&0!==this.syncQueue.size){this.isProcessing=!0;try{for(const e of this.syncQueue){const{data:t}=await a.ND.from("properties").select("*").eq("id",e).single();t&&await this.autoSyncProperty(t),this.syncQueue.clear()}}finally{this.isProcessing=!1}}}async hasComplianceData(e){try{const{data:t}=await a.ND.from("nyc_properties").select("id").eq("property_id",e).single();return!!t}catch{return!1}}async getSyncStatus(e){try{const{data:t}=await a.ND.from("nyc_properties").select("last_synced_at, bin, bbl").eq("property_id",e).single();return{hasData:!!t,lastSynced:null===t||void 0===t?void 0:t.last_synced_at,bin:null===t||void 0===t?void 0:t.bin,bbl:null===t||void 0===t?void 0:t.bbl}}catch{return{hasData:!1,lastSynced:null,bin:null,bbl:null}}}},Te=e=>{var t,r,n,i,o,l,d,u;let{user:h,onLogout:p,initialTab:m="dashboard"}=e;const{theme:v,toggleTheme:y,isDark:b}=X(),[_,B]=(0,s.useState)(m),[q,V]=(0,s.useState)([]),[W,G]=(0,s.useState)(null),[Y,K]=(0,s.useState)(!1),[J,Q]=(0,s.useState)(""),[Z,te]=(0,s.useState)("all"),[re,se]=(0,s.useState)("address"),[ae,ie]=(0,s.useState)("asc"),[oe,le]=(0,s.useState)(!1),[ce,de]=(0,s.useState)(!1),[ue,he]=(0,s.useState)(!1),[pe,fe]=(0,s.useState)(!1),[me,xe]=(0,s.useState)(null),[ye,be]=(0,s.useState)({address:"",city:"NYC",type:"Residential",units:"",yearBuilt:"",contact:"",managementCompany:""}),[we,_e]=(0,s.useState)(!1),[je,Ee]=(0,s.useState)(!1),[Te,Ie]=(0,s.useState)(null);(0,s.useEffect)(()=>{console.log("MVPDashboard: initialTab prop is:",m),console.log("MVPDashboard: Setting activeTab to:",m),B(m)},[m]),(0,s.useEffect)(()=>{console.log("MVPDashboard: activeTab state is now:",_)},[_]),(0,s.useEffect)(()=>{Oe(),Ae()},[]);const Oe=(0,s.useCallback)(async()=>{try{const{data:e,error:t}=await a.ND.from("user_profiles").select("*").eq("id",h.id).single();if(t)throw t;G(e)}catch(e){console.error("Error fetching user profile:",e)}},[h.id]),Ae=(0,s.useCallback)(async()=>{try{le(!0);const{data:e,error:t}=await a.ND.from("properties").select("id, address, city, property_type, units, year_built, contact_name, management_company, bin_number, opa_account, user_id, created_at, updated_at").eq("user_id",h.id).order("created_at",{ascending:!1});if(t)throw t;V(e||[])}catch(e){console.error("Error fetching properties:",e)}finally{le(!1)}},[h.id]),Re=e=>{const t=e.toLowerCase();return t.includes("philadelphia")||t.includes("philly")||t.includes(", pa")?"Philadelphia":(t.includes("new york")||t.includes("ny")||t.includes("nyc")||t.includes("brooklyn")||t.includes("queens")||t.includes("bronx")||t.includes("manhattan")||t.includes("staten island"),"NYC")},$e={totalProperties:q.length,complianceRate:85,totalViolations:0,upcomingInspections:0},De=[{id:"dashboard",label:"Dashboard",icon:j,gradient:"from-corporate-500 to-corporate-600"},{id:"compliance",label:"Compliance Punch List",icon:f,gradient:"from-emerald-500 to-emerald-600"},{id:"vendors",label:"Vendor RFPs",icon:g,gradient:"from-gold-500 to-gold-600"},{id:"reports",label:"Report Library",icon:N,gradient:"from-purple-500 to-purple-600"},{id:"todos",label:"To-Do Generator",icon:k,gradient:"from-indigo-500 to-indigo-600"},{id:"profile",label:"My Profile",icon:S,gradient:"from-slate-500 to-slate-600"}];return(0,w.jsxs)("div",{className:"min-h-screen relative overflow-hidden",style:{backgroundColor:"var(--bg-primary)"},children:[(0,w.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,w.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-corporate-500/10 to-gold-500/10 rounded-full blur-3xl animate-pulse-slow"}),(0,w.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-emerald-500/10 to-corporate-500/10 rounded-full blur-3xl animate-pulse-slow"}),(0,w.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-gold-500/5 to-ruby-500/5 rounded-full blur-3xl animate-float"})]}),(0,w.jsx)("header",{className:"relative glass-effect border-b border-bright shadow-bright",children:(0,w.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,w.jsx)("button",{onClick:()=>K(!Y),className:"lg:hidden p-3 rounded-xl bg-gradient-to-r from-corporate-500 to-corporate-600 text-white hover:from-corporate-600 hover:to-corporate-700 transition-all duration-300 shadow-enterprise hover:shadow-glow",children:Y?(0,w.jsx)(x,{className:"h-5 w-5"}):(0,w.jsx)(C,{className:"h-5 w-5"})}),(0,w.jsx)("div",{className:"flex items-center space-x-4",children:(0,w.jsx)("img",{src:"/propply-logo-transparent.png",alt:"Propply AI",className:"h-12 w-auto filter brightness-0 invert"})})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,w.jsxs)("button",{className:"relative p-3 rounded-xl glass-effect-light hover:bg-accent transition-all duration-300 group",children:[(0,w.jsx)(E,{className:"h-5 w-5 text-tertiary group-hover:text-accent transition-colors"}),(0,w.jsx)("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-gradient-to-r from-ruby-500 to-ruby-600 rounded-full text-xs text-white flex items-center justify-center font-bold shadow-bright animate-pulse",children:"3"})]}),(0,w.jsx)("button",{onClick:y,className:"p-3 rounded-xl glass-effect-light hover:bg-accent transition-all duration-300 group",title:b?"Switch to Light Mode":"Switch to Dark Mode",children:b?(0,w.jsx)(P,{className:"h-5 w-5 text-tertiary group-hover:text-warning transition-colors"}):(0,w.jsx)(T,{className:"h-5 w-5 text-tertiary group-hover:text-accent transition-colors"})}),(0,w.jsx)("button",{onClick:()=>B("profile"),className:"p-3 rounded-xl glass-effect-light hover:bg-accent transition-all duration-300 group",title:"Settings",children:(0,w.jsx)(I,{className:"h-5 w-5 text-tertiary group-hover:text-accent transition-colors"})}),(0,w.jsxs)("button",{onClick:()=>B("profile"),className:"relative cursor-pointer group",title:"View Profile",children:[(0,w.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-corporate-500 to-corporate-600 rounded-xl blur opacity-75 group-hover:opacity-100 transition-opacity"}),(0,w.jsx)("div",{className:"relative h-10 w-10 bg-gradient-to-r from-corporate-500 to-corporate-600 rounded-xl flex items-center justify-center group-hover:shadow-glow transition-all duration-300",children:null!==W&&void 0!==W&&W.avatar_url?(0,w.jsx)("img",{src:W.avatar_url,alt:"Avatar",className:"h-8 w-8 rounded-lg"}):(0,w.jsx)(S,{className:"h-5 w-5 text-white"})})]}),(0,w.jsx)("button",{onClick:p,className:"text-tertiary hover:text-error transition-colors font-medium px-3 py-2 rounded-lg hover:bg-accent",children:"Logout"})]})]})})}),(0,w.jsxs)("div",{className:"flex",children:[(0,w.jsx)("nav",{className:(Y?"translate-x-0":"-translate-x-full")+" lg:translate-x-0 fixed lg:static inset-y-0 left-0 z-50 w-72 border-r shadow-enterprise transition-all duration-500 ease-out sidebar-mobile",style:{backgroundColor:"var(--bg-sidebar)",borderColor:"var(--border-primary)"},children:(0,w.jsxs)("div",{className:"flex flex-col h-full pt-20 lg:pt-8",children:[(0,w.jsx)("div",{className:"px-6 pb-6",children:(0,w.jsxs)("div",{className:"enterprise-card p-4",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,w.jsx)("div",{className:"p-2 bg-gradient-to-r from-corporate-500 to-corporate-600 rounded-lg shadow-enterprise",children:(0,w.jsx)(c,{className:"h-4 w-4 text-white"})}),(0,w.jsx)("span",{className:"font-semibold text-slate-100",children:"Executive Summary"})]}),(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsxs)("div",{className:"flex justify-between items-center",children:[(0,w.jsx)("span",{className:"text-sm text-slate-400",children:"Compliance Rate"}),(0,w.jsxs)("span",{className:"font-bold text-emerald-400 font-mono",children:[$e.complianceRate,"%"]})]}),(0,w.jsxs)("div",{className:"flex justify-between items-center",children:[(0,w.jsx)("span",{className:"text-sm text-slate-400",children:"Properties"}),(0,w.jsx)("span",{className:"font-bold text-corporate-400 font-mono",children:$e.totalProperties})]}),(0,w.jsxs)("div",{className:"flex justify-between items-center",children:[(0,w.jsx)("span",{className:"text-sm text-slate-400",children:"Violations"}),(0,w.jsx)("span",{className:"font-bold text-ruby-400 font-mono",children:$e.totalViolations})]})]})]})}),(0,w.jsx)("div",{className:"flex-1 px-6 space-y-2",children:De.map(e=>{const t=e.icon,r=_===e.id;return(0,w.jsxs)("button",{onClick:()=>{B(e.id),K(!1)},className:"group w-full flex items-center space-x-4 px-4 py-3 rounded-xl font-medium text-sm transition-all duration-300 transform hover:scale-105 "+(r?"bg-slate-800 border-l-4 border-gold-500 text-slate-100 shadow-enterprise":"text-slate-400 hover:bg-slate-800/50 hover:text-slate-200"),children:[(0,w.jsx)("div",{className:"p-2 rounded-lg transition-all duration-300 "+(r?"bg-gradient-to-r from-corporate-500 to-corporate-600 shadow-enterprise":"bg-slate-700 group-hover:bg-slate-600"),children:(0,w.jsx)(t,{className:"h-5 w-5 transition-colors "+(r?"text-white":"text-slate-400 group-hover:text-slate-200")})}),(0,w.jsx)("span",{className:"flex-1 text-left",children:e.label}),r&&(0,w.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-gold-500 to-gold-400 rounded-full animate-pulse"})]},e.id)})}),(0,w.jsx)("div",{className:"p-6",children:(0,w.jsxs)("div",{className:"enterprise-card p-4 relative overflow-hidden",children:[(0,w.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-corporate-500/10 to-gold-500/10"}),(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,w.jsx)(O,{className:"h-4 w-4 text-gold-400"}),(0,w.jsx)("span",{className:"text-sm font-semibold text-slate-100",children:"Current Plan"})]}),(0,w.jsx)("p",{className:"text-xs text-slate-400 mb-3",children:a.vQ.subscriptionTiers[(null===W||void 0===W?void 0:W.subscription_tier)||"free"].name}),(0,w.jsx)("button",{className:"w-full btn-gold text-xs font-medium py-2 px-3",children:"Upgrade Plan"})]})]})})]})}),Y&&(0,w.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>K(!1)}),(0,w.jsx)("main",{className:"flex-1 relative bg-secondary",children:(0,w.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 main-content-mobile",children:["dashboard"===_&&(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsx)("div",{className:"relative",children:(0,w.jsx)("div",{className:"enterprise-card p-6",children:(0,w.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between",children:[(0,w.jsxs)("div",{className:"mb-4 lg:mb-0",children:[(0,w.jsxs)("h2",{className:"text-3xl font-bold gradient-text mb-2",children:["Welcome back, ",(null===W||void 0===W?void 0:W.full_name)||"User","! \ud83d\udc4b"]}),(0,w.jsx)("p",{className:"text-lg",style:{color:"var(--text-secondary)"},children:"Here's your property compliance overview for today"})]}),(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,w.jsxs)("button",{onClick:()=>de(!ce),className:"btn-primary flex items-center space-x-2",children:[(0,w.jsx)(A,{className:"h-4 w-4"}),(0,w.jsx)("span",{className:"font-medium",children:"Add Property"})]}),(0,w.jsx)("button",{className:"p-3 glass-effect-light hover:bg-slate-700/50 transition-all duration-300 group rounded-xl",children:(0,w.jsx)(R,{className:"h-4 w-4 text-slate-400 group-hover:text-slate-200"})})]})]})})}),(0,w.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 metric-grid-mobile md:metric-grid-tablet lg:metric-grid-desktop",children:[{label:"Total Properties",value:$e.totalProperties,icon:$,color:"corporate",trend:"+2.3%"},{label:"Compliance Rate",value:`${$e.complianceRate}%`,icon:f,color:"emerald",trend:"+5.1%"},{label:"Active Violations",value:$e.totalViolations,icon:D,color:"ruby",trend:"-12.5%"},{label:"Upcoming Inspections",value:$e.upcomingInspections,icon:k,color:"gold",trend:"+3.2%"}].map((e,t)=>{const r=e.icon;return(0,w.jsxs)("div",{className:"metric-card group",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,w.jsx)("div",{className:`p-3 bg-gradient-to-r ${{corporate:"from-corporate-500 to-corporate-600",emerald:"from-emerald-500 to-emerald-600",ruby:"from-ruby-500 to-ruby-600",gold:"from-gold-500 to-gold-600"}[e.color]} rounded-xl shadow-enterprise group-hover:shadow-glow transition-all duration-300`,children:(0,w.jsx)(r,{className:"h-6 w-6 text-white"})}),(0,w.jsxs)("div",{className:"text-right",children:[(0,w.jsx)("div",{className:`text-sm font-medium ${{corporate:"text-corporate-400",emerald:"text-emerald-400",ruby:"text-ruby-400",gold:"text-gold-400"}[e.color]}`,children:e.trend}),(0,w.jsx)("div",{className:"text-xs text-slate-500",children:"vs last month"})]})]}),(0,w.jsx)("div",{className:"metric-value text-4xl mb-1",children:e.value}),(0,w.jsx)("div",{className:"metric-label",children:e.label})]},t)})}),(0,w.jsxs)("div",{className:"enterprise-card overflow-hidden",children:[(0,w.jsx)("div",{className:"enterprise-card-header",children:(0,w.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("h2",{className:"text-2xl font-bold text-slate-100 mb-2",children:"Property Portfolio"}),(0,w.jsx)("p",{className:"text-slate-400",children:"Manage and monitor your property compliance in real-time"})]}),(0,w.jsx)("div",{className:"flex flex-col sm:flex-row gap-3",children:(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsxs)("select",{value:Z,onChange:e=>te(e.target.value),className:"appearance-none bg-slate-800 border border-slate-600 rounded-xl px-4 py-3 pr-10 focus:ring-2 focus:ring-corporate-500 focus:border-corporate-500 transition-all duration-300 text-slate-200 font-medium text-sm hover:bg-slate-700",children:[(0,w.jsx)("option",{value:"all",children:"All Properties"}),(0,w.jsx)("option",{value:"NYC",children:"NYC Properties"}),(0,w.jsx)("option",{value:"Philadelphia",children:"Philadelphia Properties"})]}),(0,w.jsx)(L,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"})]})})]})}),(0,w.jsx)("div",{className:"p-6 border-b border-slate-700/50 bg-gradient-to-r from-slate-800/50 to-slate-700/50",children:(0,w.jsx)("div",{className:"flex flex-col lg:flex-row gap-3",children:(0,w.jsxs)("div",{className:"flex-1 relative",children:[(0,w.jsx)(U,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),(0,w.jsx)("input",{type:"text",placeholder:"Search properties by address or city...",value:J,onChange:e=>Q(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-800 border border-slate-600 rounded-xl focus:ring-2 focus:ring-corporate-500 focus:border-corporate-500 transition-all duration-300 text-slate-200 placeholder-slate-400 hover:bg-slate-700"})]})})}),(0,w.jsx)("div",{className:"overflow-x-auto",children:(0,w.jsxs)("table",{className:"w-full",children:[(0,w.jsx)("thead",{className:"bg-slate-800/80 backdrop-blur-sm",children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-[#CBD5E1] cursor-pointer hover:bg-slate-700/50 transition-colors tracking-[0.025em]",onClick:()=>{var e;re===(e="address")?ie("asc"===ae?"desc":"asc"):(se(e),ie("asc"))},children:(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)("span",{children:"Property Address"}),(0,w.jsx)(M,{className:"h-4 w-4 text-slate-400"})]})}),(0,w.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-[#CBD5E1] tracking-[0.025em]",children:"City"}),(0,w.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-[#CBD5E1] tracking-[0.025em]",children:"Compliance"}),(0,w.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-[#CBD5E1] tracking-[0.025em]",children:"Violations"}),(0,w.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-[#CBD5E1] tracking-[0.025em]",children:"Actions"})]})}),(0,w.jsx)("tbody",{className:"divide-y divide-slate-700/50",children:q.filter(e=>{var t,r;const s=(null===(t=e.address)||void 0===t?void 0:t.toLowerCase().includes(J.toLowerCase()))||(null===(r=e.city)||void 0===r?void 0:r.toLowerCase().includes(J.toLowerCase())),n="all"===Z||e.city===Z;return s&&n}).sort((e,t)=>{const r=e[re]||"",s=t[re]||"",n=r.toString().localeCompare(s.toString());return"asc"===ae?n:-n}).map((e,t)=>(0,w.jsxs)("tr",{className:(t%2===0?"bg-[#1E293B]":"bg-[#1A2332]")+" hover:bg-[#334155] transition-colors duration-200 group",children:[(0,w.jsx)("td",{className:"px-6 py-4",children:(0,w.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,w.jsx)("div",{className:"p-2 bg-gradient-to-r from-corporate-500 to-corporate-600 rounded-lg shadow-enterprise",children:(0,w.jsx)($,{className:"h-4 w-4 text-white"})}),(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:"font-semibold text-[#F8FAFC] text-sm",children:e.address}),(0,w.jsxs)("div",{className:"text-xs text-[#94A3B8] font-mono font-normal",children:["ID: ",e.id]})]})]})}),(0,w.jsx)("td",{className:"px-6 py-4",children:(0,w.jsx)("span",{className:"inline-flex px-3 py-1 rounded-full text-xs font-medium bg-[#334155]/60 text-[#F8FAFC]",children:e.city})}),(0,w.jsx)("td",{className:"px-6 py-4",children:(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)("div",{className:"w-3 h-3 rounded-full bg-emerald-500 shadow-glow"}),(0,w.jsx)("span",{className:"font-semibold text-white font-mono",children:"85%"})]})}),(0,w.jsx)("td",{className:"px-6 py-4",children:(0,w.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#065F46] text-white",children:"0 violations"})}),(0,w.jsx)("td",{className:"px-6 py-4",children:(0,w.jsx)("div",{className:"flex items-center space-x-2",children:(0,w.jsx)("button",{onClick:()=>(async e=>{try{console.log("Generating compliance report for:",e.address),le(!0);const t="http://localhost:5001",r=await fetch(`${t}/api/generate-compliance-report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({property_id:e.id,address:e.address,city:e.city,bin_number:e.bin_number})});if(!r.ok)throw new Error("Failed to generate compliance report");const s=await r.json();console.log("Compliance report generated:",s),alert("Compliance report generated successfully! Check the Reports tab to view it."),await Ae()}catch(t){console.error("Error generating compliance report:",t),alert("Failed to generate compliance report. Please try again.")}finally{le(!1)}})(e),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",title:"Generate Compliance Report",children:"Generate Report"})})})]},e.id))})]})})]})]}),"compliance"===_&&(0,w.jsx)(ee,{user:h,properties:q}),"vendors"===_&&(0,w.jsx)(ne,{user:h,properties:q}),"reports"===_&&(0,w.jsx)(ge,{user:h,properties:q}),"todos"===_&&(0,w.jsx)(ve,{user:h,properties:q}),"profile"===_&&(0,w.jsx)(Ne,{user:h,onProfileUpdate:Oe})]})})]}),ce&&(0,w.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,w.jsxs)("div",{className:"enterprise-card max-w-2xl w-full p-8 max-h-[90vh] overflow-y-auto animate-scale-in",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("h2",{className:"text-3xl font-bold text-slate-100 mb-2",children:"Add New Property"}),(0,w.jsx)("p",{className:"text-slate-400",children:"Enter property details to begin compliance monitoring"})]}),(0,w.jsx)("button",{onClick:()=>de(!1),className:"p-3 hover:bg-slate-700 rounded-xl transition-all duration-300 text-slate-400 hover:text-slate-200",children:(0,w.jsx)(x,{className:"h-6 w-6"})})]}),(0,w.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),ye.address)if(je||we)try{le(!0),console.log("\ud83d\udcbe Saving property to database:",ye);const{data:e,error:r}=await a.ND.from("properties").insert([{address:ye.address,city:ye.city,property_type:ye.type||"Residential",units:ye.units?parseInt(ye.units):null,year_built:ye.yearBuilt?parseInt(ye.yearBuilt):null,contact_name:ye.contact||null,management_company:ye.managementCompany||null,bin_number:ye.bin_number||null,opa_account:ye.opa_account||null,user_id:h.id}]).select("id, address, city, property_type, units, year_built, contact_name, management_company, bin_number, opa_account, user_id, created_at, updated_at");if(r)throw console.error("\u274c Database error:",r),r;if(!e||!e[0])throw console.error("\u274c No data returned from database insert"),new Error("No data returned from database");{const r=e[0];console.log("\u2705 Property saved successfully:",r),V(e=>[r,...e]),be({address:"",city:"NYC",type:"Residential",units:"",yearBuilt:"",contact:"",managementCompany:""}),Ee(!1),de(!1),console.log("\ud83d\udd04 Generating compliance report for new property..."),console.log("\ud83d\udccb Property details:",r),console.log("\ud83d\udc64 User ID:",h.id);try{console.log("\ud83d\udd04 Generating sample report...");const e=await(0,Se.generateSampleReport)(r,h.id);console.log("\u2705 Sample compliance report generated:",e),window.alert("\u2705 Property added successfully! A compliance report has been generated and is available in the Report Library.")}catch(reportError){console.error("\u274c Report generation failed:",reportError),console.error("\u274c Error details:",reportError.message),console.error("\u274c Full error:",reportError);if(window.confirm("\u26a0\ufe0f Property added successfully, but report generation failed. Would you like to try generating the report again?"))try{console.log("\ud83d\udd04 Retrying report generation..."),await(0,Se.generateSampleReport)(r,h.id),window.alert("\u2705 Report generated successfully on retry!")}catch(t){console.error("\u274c Retry also failed:",t),window.alert("\u274c Report generation failed again. You can generate a report manually from the property actions.")}}setTimeout(async()=>{try{console.log("\ud83d\udd04 Starting background data sync..."),await Pe.autoSyncProperty(r),console.log("\u2705 Background data sync completed")}catch(e){console.warn("\u26a0\ufe0f Background data sync failed:",e),Pe.queueSync(r)}},100)}}catch(r){console.error("\u274c Error adding property:",r),window.alert(`Failed to save property: ${r.message}`)}finally{le(!1)}else await(async e=>{try{_e(!0);const t=Re(e);return console.log(`Fetching real property data for ${e} in ${t}`),console.log("\u26a0\ufe0f Backend API not available - using basic city detection"),be(r=>({...r,city:t,address:e})),Ee(!0),console.log(`\u2705 Property data prepared for ${e} in ${t}`),{success:!0,city:t}}catch(r){console.error("Error preparing property data:",r);const s=Re(e);return be(e=>({...e,city:s})),Ee(!0),{success:!0,city:s}}finally{_e(!1)}})(ye.address)},className:"space-y-6",children:[(0,w.jsxs)("div",{className:"space-y-3",children:[(0,w.jsxs)("label",{className:"text-sm font-semibold text-slate-200 flex items-center space-x-2",children:[(0,w.jsx)(z,{className:"h-4 w-4 text-corporate-400"}),(0,w.jsx)("span",{children:"Property Address *"})]}),(0,w.jsx)(H,{value:ye.address,onChange:e=>{be({...ye,address:e}),Ee(!1)},onPlaceSelect:e=>{console.log("Selected address:",e)},placeholder:"123 Main Street, New York, NY 10001",className:"w-full",disabled:we||oe,required:!0,darkMode:!0})]}),we&&(0,w.jsx)("div",{className:"bg-slate-800 border border-corporate-500/30 rounded-2xl p-6",children:(0,w.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-corporate-500"}),(0,w.jsxs)("div",{className:"text-sm text-slate-200",children:[(0,w.jsxs)("p",{className:"font-semibold text-corporate-400",children:["Fetching property data from ",Re(ye.address),"..."]}),(0,w.jsx)("p",{className:"text-xs mt-1 text-slate-400",children:"Searching NYC/Philly Open Data for violations, permits, inspections, and compliance records."})]})]})}),je&&!we&&(0,w.jsx)("div",{className:"bg-slate-800 border border-emerald-500/30 rounded-2xl p-6",children:(0,w.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,w.jsx)(f,{className:"h-6 w-6 text-emerald-400 mt-0.5"}),(0,w.jsxs)("div",{className:"text-sm text-slate-200 flex-1",children:[(0,w.jsx)("p",{className:"font-semibold text-emerald-400",children:"Property data retrieved successfully!"}),(0,w.jsxs)("div",{className:"mt-3 space-y-2 text-xs",children:[ye.city&&(0,w.jsxs)("p",{className:"flex items-center space-x-2",children:[(0,w.jsx)("span",{className:"text-slate-400",children:"\ud83d\udccd"}),(0,w.jsxs)("span",{className:"text-slate-300",children:["City: ",ye.city]})]}),ye.type&&(0,w.jsxs)("p",{className:"flex items-center space-x-2",children:[(0,w.jsx)("span",{className:"text-slate-400",children:"\ud83c\udfe2"}),(0,w.jsxs)("span",{className:"text-slate-300",children:["Type: ",ye.type]})]}),ye.units&&(0,w.jsxs)("p",{className:"flex items-center space-x-2",children:[(0,w.jsx)("span",{className:"text-slate-400",children:"\ud83c\udfe0"}),(0,w.jsxs)("span",{className:"text-slate-300",children:["Units: ",ye.units]})]}),ye.yearBuilt&&(0,w.jsxs)("p",{className:"flex items-center space-x-2",children:[(0,w.jsx)("span",{className:"text-slate-400",children:"\ud83d\udcc5"}),(0,w.jsxs)("span",{className:"text-slate-300",children:["Year Built: ",ye.yearBuilt]})]}),ye.bin_number&&(0,w.jsxs)("p",{className:"flex items-center space-x-2",children:[(0,w.jsx)("span",{className:"text-slate-400",children:"\ud83d\udd22"}),(0,w.jsxs)("span",{className:"text-slate-300",children:["BIN: ",ye.bin_number]})]}),ye.opa_account&&(0,w.jsxs)("p",{className:"flex items-center space-x-2",children:[(0,w.jsx)("span",{className:"text-slate-400",children:"\ud83d\udd22"}),(0,w.jsxs)("span",{className:"text-slate-300",children:["OPA: ",ye.opa_account]})]})]}),(0,w.jsxs)("p",{className:"text-xs mt-3 text-slate-400",children:[(0,w.jsx)("span",{className:"font-medium text-slate-300",children:"Real Data:"})," Retrieved from ",ye.city," Open Data APIs including violations, permits, and compliance information."]}),(0,w.jsx)("p",{className:"text-xs mt-2 text-slate-400",children:'Click "Add Property" below to save this to your dashboard.'})]})]})}),(0,w.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[(0,w.jsx)("button",{type:"submit",disabled:oe||we,className:"btn-primary flex items-center justify-center space-x-3 disabled:opacity-50 disabled:cursor-not-allowed",children:oe?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,w.jsx)("span",{children:"Saving Property..."})]}):we?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,w.jsx)("span",{children:"Fetching Data..."})]}):je?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(A,{className:"h-5 w-5"}),(0,w.jsx)("span",{children:"Add Property"})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(U,{className:"h-5 w-5"}),(0,w.jsx)("span",{children:"Fetch Property Data"})]})}),je&&!oe&&(0,w.jsxs)("button",{type:"button",onClick:async()=>{try{le(!0),console.log("\ud83d\udd04 Manually generating report for property...");const e={id:"temp-"+Date.now(),address:ye.address,city:ye.city,type:ye.type};await(0,Se.generateSampleReport)(e,h.id),console.log("\u2705 Manual report generation completed"),window.alert("\u2705 Report generated successfully! Check the Report Library to view it.")}catch(e){console.error("\u274c Manual report generation failed:",e),window.alert("\u274c Failed to generate report. Please try again.")}finally{le(!1)}},className:"btn-secondary flex items-center justify-center space-x-2",children:[(0,w.jsx)(N,{className:"h-4 w-4"}),(0,w.jsx)("span",{children:"Generate Report"})]}),(0,w.jsx)("button",{type:"button",onClick:()=>{de(!1),Ee(!1),be({address:"",city:"NYC",type:"Residential",units:"",yearBuilt:"",contact:"",managementCompany:""})},className:"btn-secondary",children:"Cancel"})]})]})]})}),me&&(0,w.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,w.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,w.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white",children:(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("h2",{className:"text-2xl font-bold",children:"Property Compliance Details"}),(0,w.jsx)("p",{className:"text-blue-100",children:me.address}),(0,w.jsxs)("p",{className:"text-blue-200 text-sm",children:[me.city," \u2022 ",me.property_type]})]}),(0,w.jsx)("button",{onClick:()=>{xe(null),Ie(null)},className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:(0,w.jsx)(x,{className:"h-6 w-6"})})]})}),(0,w.jsx)("div",{className:"p-6 overflow-y-auto max-h-[75vh]",children:oe?(0,w.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,w.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading compliance data..."})]}):Te?(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl p-6",children:(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Compliance Score"}),(0,w.jsx)("p",{className:"text-gray-600",children:"Overall property compliance status"})]}),(0,w.jsxs)("div",{className:"text-right",children:[(0,w.jsxs)("div",{className:"text-3xl font-bold text-green-600",children:[(null===(t=Te.compliance)||void 0===t?void 0:t.score)||85,"%"]}),(0,w.jsx)("div",{className:"text-sm text-gray-500",children:(null===(r=Te.compliance)||void 0===r?void 0:r.score)>=90?"Excellent":(null===(n=Te.compliance)||void 0===n?void 0:n.score)>=70?"Good":"Needs Attention"})]})]})}),(0,w.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6",children:[(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Active Violations"}),(null===(i=Te.compliance)||void 0===i||null===(o=i.violations)||void 0===o?void 0:o.length)>0?(0,w.jsx)("div",{className:"space-y-3",children:Te.compliance.violations.map((e,t)=>(0,w.jsxs)("div",{className:"flex items-center justify-between p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)("span",{className:"text-sm font-medium text-red-800",children:e.type}),(0,w.jsx)("span",{className:"px-2 py-1 rounded-full text-xs "+("High"===e.severity?"bg-red-200 text-red-800":"Medium"===e.severity?"bg-yellow-200 text-yellow-800":"bg-green-200 text-green-800"),children:e.severity})]}),(0,w.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.description}),(0,w.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Date: ",e.date]})]}),(0,w.jsx)("div",{className:"text-right",children:(0,w.jsx)("span",{className:"text-sm font-medium text-red-600",children:e.status})})]},t))}):(0,w.jsxs)("div",{className:"text-center py-8",children:[(0,w.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,w.jsx)(f,{className:"h-8 w-8 text-green-600"})}),(0,w.jsx)("p",{className:"text-gray-600",children:"No active violations found"})]})]}),(0,w.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6",children:[(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upcoming Inspections"}),(null===(l=Te.compliance)||void 0===l||null===(d=l.inspections)||void 0===d?void 0:d.length)>0?(0,w.jsx)("div",{className:"space-y-3",children:Te.compliance.inspections.map((e,t)=>(0,w.jsxs)("div",{className:"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("h4",{className:"font-medium text-gray-900",children:e.type}),(0,w.jsxs)("p",{className:"text-sm text-gray-600",children:["Inspector: ",e.inspector]}),(0,w.jsxs)("p",{className:"text-sm text-gray-500",children:["Due: ",e.due_date]})]}),(0,w.jsx)("span",{className:"px-3 py-1 rounded-full text-sm "+("Overdue"===e.status?"bg-red-200 text-red-800":"Scheduled"===e.status?"bg-blue-200 text-blue-800":"bg-green-200 text-green-800"),children:e.status})]},t))}):(0,w.jsx)("p",{className:"text-gray-600",children:"No upcoming inspections"})]}),(0,w.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6",children:[(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recommendations"}),(0,w.jsx)("div",{className:"space-y-2",children:null===(u=Te.recommendations)||void 0===u?void 0:u.map((e,t)=>(0,w.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,w.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),(0,w.jsx)("p",{className:"text-gray-700",children:e})]},t))})]})]}):(0,w.jsxs)("div",{className:"text-center py-12",children:[(0,w.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,w.jsx)(F,{className:"h-8 w-8 text-gray-400"})}),(0,w.jsx)("p",{className:"text-gray-600",children:"Failed to load property details"})]})})]})}),(0,w.jsx)(Ce,{property:me,isOpen:pe,onClose:()=>{fe(!1),xe(null)},onViewAnalysis:e=>{console.log(`Opening PropertyDetailModal for analysis of ${e.address}`),xe({id:e.id,address:e.address,bin:e.bin_number,bbl:e.bbl,city:e.city}),he(!0)},user:h}),(0,w.jsx)(ke,{property:me,isOpen:ue,onClose:()=>{he(!1),xe(null)}})]})};const Ie=function(){const[e,t]=(0,s.useState)(null),[r,n]=(0,s.useState)(!0),[o,l]=(0,s.useState)(null),[c,d]=(0,s.useState)("profile");return(0,s.useEffect)(()=>{console.log("App: initialTab changed to:",c)},[c]),(0,s.useEffect)(()=>{let e=!0,r=!1,s=!0;const o=new URLSearchParams(window.location.search),c=o.get("error"),u=o.get("error_code"),h=o.get("error_description");if(c){console.error("OAuth error detected:",c,u,h),console.error("Current URL:",window.location.href),console.error("Current origin:",window.location.origin),console.error("Expected origin should match Supabase Site URL exactly");const e="bad_oauth_callback"===u?`OAuth configuration mismatch. Please verify your Supabase Site URL is exactly: ${window.location.origin} (no trailing slash, with https://)`:h||c;return l(`OAuth Error: ${e}`),n(!1),void window.history.replaceState({},document.title,window.location.pathname)}"profile"===o.get("tab")&&d("profile");new URLSearchParams(window.location.hash.substring(1)).get("access_token")&&(console.log("OAuth callback detected, waiting for auth state change..."),d("profile"),window.history.replaceState({},document.title,window.location.pathname));const p=setTimeout(()=>{e&&!r&&(console.warn("Auth initialization timeout - forcing app to load"),n(!1),l("Authentication timeout - please refresh the page"))},5e3),f=()=>{r=!0,clearTimeout(p)},m=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;for(let s=0;s<t;s++){const t=await i.getUserProfile(e);if(t.success)return t.data;await new Promise(e=>setTimeout(e,500))}console.log("Profile not found after retries, creating manually...");const r=await i.createUserProfile({id:e});return r.success?r.data[0]:null};(async()=>{try{console.log("Initializing auth...");const s=new URLSearchParams(window.location.search).get("code");if(s){var r;console.log("OAuth callback detected with code:",s.substring(0,20)+"..."),console.log("Current URL:",window.location.href),console.log("Exchanging OAuth code for session...");const{data:i,error:o}=await a.ND.auth.exchangeCodeForSession(window.location.href);if(window.history.replaceState({},document.title,window.location.pathname),!e)return;if(o)return console.error("\u274c OAuth code exchange failed:",o),console.error("Error details:",{message:o.message,status:o.status,name:o.name}),l(`Failed to complete Google sign-in: ${o.message}`),f(),void n(!1);if(null!==i&&void 0!==i&&null!==(r=i.session)&&void 0!==r&&r.user){const r=i.session;console.log("\u2705 OAuth session established for:",r.user.email),d("profile");const s=await m(r.user.id);if(!e)return;t(s?{...r.user,profile:s}:r.user)}else console.error("\u274c No session returned from code exchange"),l("Failed to complete Google sign-in. Please try again.");return void(e&&(f(),n(!1)))}const{data:{session:o}}=await a.ND.auth.getSession();if(!e)return;if(null!==o&&void 0!==o&&o.user){console.log("User found:",o.user.email);const r=await i.getUserProfile(o.user.id);if(console.log("Profile fetch result:",r),!e)return;if(r.success)t({...o.user,profile:r.data});else{const e=await m(o.user.id);t(e?{...o.user,profile:e}:o.user)}}else console.log("No session found"),t(null)}catch(o){console.error("Auth initialization error:",o),e&&(l(o.message),t(null))}finally{e&&(console.log("Auth initialization complete"),s=!1,f(),n(!1))}})();const{data:{subscription:g}}=a.ND.auth.onAuthStateChange(async(r,a)=>{var o;if(e)if(console.log("Auth state change:",r,null===a||void 0===a||null===(o=a.user)||void 0===o?void 0:o.email),s)console.log("Skipping auth state change during initialization");else if(null!==a&&void 0!==a&&a.user)if("SIGNED_IN"===r){console.log("User signed in via auth state change, redirecting to profile"),d("profile");const r=await m(a.user.id);if(!e)return;t(r?{...a.user,profile:r}:a.user),e&&(console.log("SIGNED_IN: User and profile loaded, clearing loading state"),f(),n(!1))}else{const r=await i.getUserProfile(a.user.id);if(!e)return;r.success?t({...a.user,profile:r.data}):t(a.user),e&&(console.log("Auth state change - User loaded, clearing loading state"),f(),n(!1))}else e&&(t(null),console.log("Auth state change - No session, clearing loading state"),f(),n(!1))});return()=>{e=!1,f(),g.unsubscribe()}},[]),r?(0,w.jsxs)("div",{className:"min-h-screen bg-navy-900 flex items-center justify-center relative overflow-hidden",children:[(0,w.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,w.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-corporate-500/10 to-gold-500/10 rounded-full blur-3xl animate-pulse-slow"}),(0,w.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-emerald-500/10 to-corporate-500/10 rounded-full blur-3xl animate-pulse-slow"})]}),(0,w.jsxs)("div",{className:"text-center relative z-10",children:[(0,w.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-corporate-500 to-corporate-600 rounded-2xl mb-6 shadow-enterprise animate-glow",children:(0,w.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-white"})}),(0,w.jsx)("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Propply AI"}),(0,w.jsx)("p",{className:"text-slate-400 text-lg font-medium",children:"Loading Enterprise Dashboard..."}),o&&(0,w.jsxs)("div",{className:"mt-6 p-4 bg-slate-800 border border-ruby-500/30 text-ruby-300 rounded-xl max-w-md mx-auto",children:[(0,w.jsx)("p",{className:"text-sm mb-3",children:o}),(0,w.jsx)("button",{onClick:()=>window.location.reload(),className:"btn-primary text-sm",children:"Refresh Page"})]})]})]}):(e&&console.log("App: Rendering MVPDashboard with initialTab:",c),(0,w.jsx)(Z,{children:(0,w.jsx)("div",{className:"App",children:e?(0,w.jsx)(Te,{user:e,onLogout:async()=>{(await i.signOut()).success&&(t(null),d("profile"))},initialTab:c}):(0,w.jsx)(_,{onLogin:async function(e){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(console.log("handleLogin called with redirectToProfile:",r),console.log("handleLogin: Setting initialTab to profile"),d("profile"),null!==e&&void 0!==e&&e.id){console.log("handleLogin: Fetching profile for user:",e.id);const r=await i.getUserProfile(e.id);r.success?(console.log("handleLogin: Profile loaded successfully:",r.data),t({...e,profile:r.data})):(console.warn("handleLogin: Profile not found, creating in background..."),i.createUserProfile(e),t(e))}else t(e)}})})}))};n.createRoot(document.getElementById("root")).render((0,w.jsx)(s.StrictMode,{children:(0,w.jsx)(Ie,{})}))})();